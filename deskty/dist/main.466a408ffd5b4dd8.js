"use strict";(self.webpackChunkdeskty=self.webpackChunkdeskty||[]).push([[179],{2011:(at,Se,P)=>{P.d(Se,{Dh:()=>de,GT:()=>le,cc:()=>Me,hO:()=>Le,on:()=>B,pX:()=>ie,xv:()=>he});var g=P(4650),J=P(127),O=P(5813);at=P.hmd(at);const se=["ngOnDestroy"],ie=(fe,Ye,rt,Ae={})=>new Proxy(fe,{get:(_e,Ie)=>rt.runOutsideAngular(()=>{var Ue;if(fe[Ie])return!(null===(Ue=Ae?.spy)||void 0===Ue)&&Ue.get&&Ae.spy.get(Ie,fe[Ie]),fe[Ie];if(se.indexOf(Ie)>-1)return()=>{};const je=Ye.toPromise().then(U=>{const ge=U&&U[Ie];return"function"==typeof ge?ge.bind(U):ge&&ge.then?ge.then(z=>rt.run(()=>z)):rt.run(()=>ge)});return new Proxy(()=>{},{get:(U,ge)=>je[ge],apply:(U,ge,z)=>je.then(Q=>{var ne;const te=Q&&Q(...z);return!(null===(ne=Ae?.spy)||void 0===ne)&&ne.apply&&Ae.spy.apply(Ie,z,te),te})})})}),le=(fe,Ye)=>{Ye.forEach(rt=>{Object.getOwnPropertyNames(rt.prototype||rt).forEach(Ae=>{Object.defineProperty(fe.prototype,Ae,Object.getOwnPropertyDescriptor(rt.prototype||rt,Ae))})})};class ce{constructor(Ye){return Ye}}const de=new g.OlP("angularfire2.app.options"),he=new g.OlP("angularfire2.app.name");function B(fe,Ye,rt){const _e="object"==typeof rt&&rt||{};_e.name=_e.name||"string"==typeof rt&&rt||"[DEFAULT]";const Ue=J.Z.apps.filter(je=>je&&je.name===_e.name)[0]||Ye.runOutsideAngular(()=>J.Z.initializeApp(fe,_e));try{JSON.stringify(fe)!==JSON.stringify(Ue.options)&&j("error",`${Ue.name} Firebase App already initialized with different options${at.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ce(Ue)}const j=(fe,...Ye)=>{(0,g.X6Q)()&&typeof console<"u"&&console[fe](...Ye)},K={provide:ce,useFactory:B,deps:[de,g.R0b,[new g.FiY,he]]};let Le=(()=>{class fe{constructor(rt){J.Z.registerVersion("angularfire",O.q4.full,"core"),J.Z.registerVersion("angularfire",O.q4.full,"app-compat"),J.Z.registerVersion("angular",g.q4F.full,rt.toString())}static initializeApp(rt,Ae){return{ngModule:fe,providers:[{provide:de,useValue:rt},{provide:he,useValue:Ae}]}}}return fe.\u0275fac=function(rt){return new(rt||fe)(g.LFG(g.Lbi))},fe.\u0275mod=g.oAB({type:fe}),fe.\u0275inj=g.cJS({providers:[K]}),fe})();function Me(fe,Ye,rt,Ae,_e){const[,Ie,Ue]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===fe)||[];if(Ie)return function we(fe,Ye){try{return fe.toString()===Ye.toString()}catch{return fe===Ye}}(_e,Ue)||(me("error",`${Ye} was already initialized on the ${rt} Firebase App with different settings.${et?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:_e,was:Ue})),Ie;{const je=Ae();return globalThis.\u0275AngularfireInstanceCache.push([fe,je,_e]),je}}const et=!!at.hot,me=(fe,...Ye)=>{(0,g.X6Q)()&&typeof console<"u"&&console[fe](...Ye)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(at,Se,P)=>{P.d(Se,{q4:()=>kr,iC:()=>Ji,fc:()=>Xc,HU:()=>Au,vb:()=>Zr,JM:()=>_a});var g=P(4650),J=P(5867),O=P(5861),se=P(9681),ie=P(2090),le=P(4859),ce=P(1877),de=P(8766);const he="@firebase/installations",B="0.5.16",K=`w:${B}`,Le="FIS_v2",Ye=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function rt(b){return b instanceof ie.ZR&&b.code.includes("request-failed")}function Ae({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function _e(b){return{token:b.token,requestStatus:2,expiresIn:Q(b.expiresIn),creationTime:Date.now()}}function Ie(b,C){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,O.Z)(function*(b,C){const F=(yield C.json()).error;return Ye.create("request-failed",{requestName:b,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function je({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function U(b,{refreshToken:C}){const x=je(b);return x.append("Authorization",function ne(b){return`${Le} ${b}`}(C)),x}function ge(b){return z.apply(this,arguments)}function z(){return(z=(0,O.Z)(function*(b){const C=yield b();return C.status>=500&&C.status<600?b():C})).apply(this,arguments)}function Q(b){return Number(b.replace("s","000"))}function te(b,C){return ke.apply(this,arguments)}function ke(){return(ke=(0,O.Z)(function*({appConfig:b,heartbeatServiceProvider:C},{fid:x}){const F=Ae(b),Z=je(b),re=C.getImmediate({optional:!0});if(re){const _t=yield re.getHeartbeatsHeader();_t&&Z.append("x-firebase-client",_t)}const Be={method:"POST",headers:Z,body:JSON.stringify({fid:x,authVersion:Le,appId:b.appId,sdkVersion:K})},lt=yield ge(()=>fetch(F,Be));if(lt.ok){const _t=yield lt.json();return{fid:_t.fid||x,registrationStatus:2,refreshToken:_t.refreshToken,authToken:_e(_t.authToken)}}throw yield Ie("Create Installation",lt)})).apply(this,arguments)}function Oe(b){return new Promise(C=>{setTimeout(C,b)})}const Xt=/^[cdef][\w-]{21}$/;function We(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const x=function an(b){return function ut(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Xt.test(x)?x:""}catch{return""}}function mn(b){return`${b.appName}!${b.appId}`}const Zt=new Map;function Jt(b,C){const x=mn(b);cn(x,C),function $i(b,C){const x=function Mr(){return!mi&&"BroadcastChannel"in self&&(mi=new BroadcastChannel("[Firebase] FID Change"),mi.onmessage=b=>{cn(b.data.key,b.data.fid)}),mi}();x&&x.postMessage({key:b,fid:C}),function $r(){0===Zt.size&&mi&&(mi.close(),mi=null)}()}(x,C)}function cn(b,C){const x=Zt.get(b);if(x)for(const F of x)F(C)}let mi=null;const ii="firebase-installations-store";let si=null;function Ko(){return si||(si=(0,de.X3)("firebase-installations-database",1,{upgrade:(b,C)=>{0===C&&b.createObjectStore(ii)}})),si}function Ke(b,C){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,O.Z)(function*(b,C){const x=mn(b),Z=(yield Ko()).transaction(ii,"readwrite"),re=Z.objectStore(ii),De=yield re.get(x);return yield re.put(C,x),yield Z.done,(!De||De.fid!==C.fid)&&Jt(b,C.fid),C})).apply(this,arguments)}function ps(b){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,O.Z)(function*(b){const C=mn(b),F=(yield Ko()).transaction(ii,"readwrite");yield F.objectStore(ii).delete(C),yield F.done})).apply(this,arguments)}function oi(b,C){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,O.Z)(function*(b,C){const x=mn(b),Z=(yield Ko()).transaction(ii,"readwrite"),re=Z.objectStore(ii),De=yield re.get(x),Be=C(De);return void 0===Be?yield re.delete(x):yield re.put(Be,x),yield Z.done,Be&&(!De||De.fid!==Be.fid)&&Jt(b,Be.fid),Be})).apply(this,arguments)}function Ln(b){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,O.Z)(function*(b){let C;const x=yield oi(b.appConfig,F=>{const Z=fn(F),re=ft(b,Z);return C=re.registrationPromise,re.installationEntry});return""===x.fid?{installationEntry:yield C}:{installationEntry:x,registrationPromise:C}})).apply(this,arguments)}function fn(b){return At(b||{fid:We(),registrationStatus:0})}function ft(b,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(Ye.create("app-offline"))};const x={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function it(b,C){return on.apply(this,arguments)}(b,x);return{installationEntry:x,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:dr(b)}:{installationEntry:C}}function on(){return(on=(0,O.Z)(function*(b,C){try{const x=yield te(b,C);return Ke(b.appConfig,x)}catch(x){throw rt(x)&&409===x.customData.serverCode?yield ps(b.appConfig):yield Ke(b.appConfig,{fid:C.fid,registrationStatus:0}),x}})).apply(this,arguments)}function dr(b){return jn.apply(this,arguments)}function jn(){return(jn=(0,O.Z)(function*(b){let C=yield Hr(b.appConfig);for(;1===C.registrationStatus;)yield Oe(100),C=yield Hr(b.appConfig);if(0===C.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield Ln(b);return F||x}return C})).apply(this,arguments)}function Hr(b){return oi(b,C=>{if(!C)throw Ye.create("installation-not-found");return At(C)})}function At(b){return function gs(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function en(b,C){return Si.apply(this,arguments)}function Si(){return(Si=(0,O.Z)(function*({appConfig:b,heartbeatServiceProvider:C},x){const F=tn(b,x),Z=U(b,x),re=C.getImmediate({optional:!0});if(re){const _t=yield re.getHeartbeatsHeader();_t&&Z.append("x-firebase-client",_t)}const Be={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:K,appId:b.appId}})},lt=yield ge(()=>fetch(F,Be));if(lt.ok)return _e(yield lt.json());throw yield Ie("Generate Auth Token",lt)})).apply(this,arguments)}function tn(b,{fid:C}){return`${Ae(b)}/${C}/authTokens:generate`}function Yn(b){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,O.Z)(function*(b,C=!1){let x;const F=yield oi(b.appConfig,re=>{if(!Pt(re))throw Ye.create("not-registered");const De=re.authToken;if(!C&&$(De))return re;if(1===De.requestStatus)return x=Xe(b,C),re;{if(!navigator.onLine)throw Ye.create("app-offline");const Be=q(re);return x=Dt(b,Be),Be}});return x?yield x:F.authToken})).apply(this,arguments)}function Xe(b,C){return be.apply(this,arguments)}function be(){return(be=(0,O.Z)(function*(b,C){let x=yield Qe(b.appConfig);for(;1===x.authToken.requestStatus;)yield Oe(100),x=yield Qe(b.appConfig);const F=x.authToken;return 0===F.requestStatus?Yn(b,C):F})).apply(this,arguments)}function Qe(b){return oi(b,C=>{if(!Pt(C))throw Ye.create("not-registered");return function ve(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Dt(b,C){return wt.apply(this,arguments)}function wt(){return(wt=(0,O.Z)(function*(b,C){try{const x=yield en(b,C),F=Object.assign(Object.assign({},C),{authToken:x});return yield Ke(b.appConfig,F),x}catch(x){if(!rt(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Ke(b.appConfig,F)}else yield ps(b.appConfig);throw x}})).apply(this,arguments)}function Pt(b){return void 0!==b&&2===b.registrationStatus}function $(b){return 2===b.requestStatus&&!function L(b){const C=Date.now();return C<b.creationTime||b.creationTime+b.expiresIn<C+36e5}(b)}function q(b){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:C})}function He(){return(He=(0,O.Z)(function*(b){const C=b,{installationEntry:x,registrationPromise:F}=yield Ln(C);return F?F.catch(console.error):Yn(C).catch(console.error),x.fid})).apply(this,arguments)}function Yt(){return(Yt=(0,O.Z)(function*(b,C=!1){const x=b;return yield dn(x),(yield Yn(x,C)).token})).apply(this,arguments)}function dn(b){return qt.apply(this,arguments)}function qt(){return(qt=(0,O.Z)(function*(b){const{registrationPromise:C}=yield Ln(b);C&&(yield C)})).apply(this,arguments)}function ms(b){return Ye.create("missing-app-config-values",{valueName:b})}const _o="installations",In=b=>{const C=b.getProvider("app").getImmediate(),x=function yn(b){if(!b||!b.options)throw ms("App Configuration");if(!b.name)throw ms("App Name");const C=["projectId","apiKey","appId"];for(const x of C)if(!b.options[x])throw ms(x);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(C);return{app:C,appConfig:x,heartbeatServiceProvider:(0,se._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Bs=b=>{const C=b.getProvider("app").getImmediate(),x=(0,se._getProvider)(C,_o).getImmediate();return{getId:()=>function Y(b){return He.apply(this,arguments)}(x),getToken:Z=>function ct(b){return Yt.apply(this,arguments)}(x,Z)}};(function Ka(){(0,se._registerComponent)(new le.wA(_o,In,"PUBLIC")),(0,se._registerComponent)(new le.wA("installations-internal",Bs,"PRIVATE"))})(),(0,se.registerVersion)(he,B),(0,se.registerVersion)(he,B,"esm2017");const Ai="@firebase/remote-config",Hn=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Zh{constructor(C,x,F,Z){this.client=C,this.storage=x,this.storageCache=F,this.logger=Z}isCachedDataFresh(C,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,Z=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${Z}.`),Z}fetch(C){var x=this;return(0,O.Z)(function*(){const[F,Z]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Z&&x.isCachedDataFresh(C.cacheMaxAgeMillis,F))return Z;C.eTag=Z&&Z.eTag;const re=yield x.client.fetch(C),De=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&De.push(x.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(De),re})()}}function Cc(b=navigator){return b.languages&&b.languages[0]||b.language}class Tc{constructor(C,x,F,Z,re,De){this.firebaseInstallations=C,this.sdkVersion=x,this.namespace=F,this.projectId=Z,this.apiKey=re,this.appId=De}fetch(C){var x=this;return(0,O.Z)(function*(){var F,Z,re;const[De,Be]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),_t=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Mt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},ht={sdk_version:x.sdkVersion,app_instance_id:De,app_instance_id_token:Be,app_id:x.appId,language_code:Cc()},En={method:"POST",headers:Mt,body:JSON.stringify(ht)},ar=fetch(_t,En),As=new Promise((Yr,Ms)=>{C.signal.addEventListener(()=>{const uf=new Error("The operation was aborted.");uf.name="AbortError",Ms(uf)})});let es;try{yield Promise.race([ar,As]),es=yield ar}catch(Yr){let Ms="fetch-client-network";throw"AbortError"===(null===(F=Yr)||void 0===F?void 0:F.name)&&(Ms="fetch-timeout"),Hn.create(Ms,{originalErrorMessage:null===(Z=Yr)||void 0===Z?void 0:Z.message})}let xs=es.status;const no=es.headers.get("ETag")||void 0;let ts,kn;if(200===es.status){let Yr;try{Yr=yield es.json()}catch(Ms){throw Hn.create("fetch-client-parse",{originalErrorMessage:null===(re=Ms)||void 0===re?void 0:re.message})}ts=Yr.entries,kn=Yr.state}if("INSTANCE_STATE_UNSPECIFIED"===kn?xs=500:"NO_CHANGE"===kn?xs=304:("NO_TEMPLATE"===kn||"EMPTY_CONFIG"===kn)&&(ts={}),304!==xs&&200!==xs)throw Hn.create("fetch-status",{httpStatus:xs});return{status:xs,eTag:no,config:ts}})()}}class zp{constructor(C,x){this.client=C,this.storage=x}fetch(C){var x=this;return(0,O.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:x,backoffCount:F}){var Z=this;return(0,O.Z)(function*(){yield function Xn(b,C){return new Promise((x,F)=>{const Z=Math.max(C-Date.now(),0),re=setTimeout(x,Z);b.addEventListener(()=>{clearTimeout(re),F(Hn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,x);try{const re=yield Z.client.fetch(C);return yield Z.storage.deleteThrottleMetadata(),re}catch(re){if(!function ud(b){if(!(b instanceof ie.ZR&&b.customData))return!1;const C=Number(b.customData.httpStatus);return 429===C||500===C||503===C||504===C}(re))throw re;const De={throttleEndTimeMillis:Date.now()+(0,ie.$s)(F),backoffCount:F+1};return yield Z.storage.setThrottleMetadata(De),Z.attemptFetch(C,De)}})()}}class cd{constructor(C,x,F,Z,re){this.app=C,this._client=x,this._storageCache=F,this._storage=Z,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Sc(b,C){var x;const F=b.target.error||void 0;return Hn.create(C,{originalErrorMessage:F&&(null===(x=F)||void 0===x?void 0:x.message)})}const ws="app_namespace_store";class Zp{constructor(C,x,F,Z=function Kp(){return new Promise((b,C)=>{var x;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=Z=>{C(Sc(Z,"storage-open"))},F.onsuccess=Z=>{b(Z.target.result)},F.onupgradeneeded=Z=>{0===Z.oldVersion&&Z.target.result.createObjectStore(ws,{keyPath:"compositeKey"})}}catch(F){C(Hn.create("storage-open",{originalErrorMessage:null===(x=F)||void 0===x?void 0:x.message}))}})}()){this.appId=C,this.appName=x,this.namespace=F,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Z,re)=>{var De;const lt=F.transaction([ws],"readonly").objectStore(ws),_t=x.createCompositeKey(C);try{const Mt=lt.get(_t);Mt.onerror=ht=>{re(Sc(ht,"storage-get"))},Mt.onsuccess=ht=>{const En=ht.target.result;Z(En?En.value:void 0)}}catch(Mt){re(Hn.create("storage-get",{originalErrorMessage:null===(De=Mt)||void 0===De?void 0:De.message}))}})})()}set(C,x){var F=this;return(0,O.Z)(function*(){const Z=yield F.openDbPromise;return new Promise((re,De)=>{var Be;const _t=Z.transaction([ws],"readwrite").objectStore(ws),Mt=F.createCompositeKey(C);try{const ht=_t.put({compositeKey:Mt,value:x});ht.onerror=En=>{De(Sc(En,"storage-set"))},ht.onsuccess=()=>{re()}}catch(ht){De(Hn.create("storage-set",{originalErrorMessage:null===(Be=ht)||void 0===Be?void 0:Be.message}))}})})()}delete(C){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Z,re)=>{var De;const lt=F.transaction([ws],"readwrite").objectStore(ws),_t=x.createCompositeKey(C);try{const Mt=lt.delete(_t);Mt.onerror=ht=>{re(Sc(ht,"storage-delete"))},Mt.onsuccess=()=>{Z()}}catch(Mt){re(Hn.create("storage-delete",{originalErrorMessage:null===(De=Mt)||void 0===De?void 0:De.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class dd{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,O.Z)(function*(){const x=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),Z=C.storage.getActiveConfig(),re=yield x;re&&(C.lastFetchStatus=re);const De=yield F;De&&(C.lastSuccessfulFetchTimestampMillis=De);const Be=yield Z;Be&&(C.activeConfig=Be)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Qa(){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,O.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}!function Is(){(0,se._registerComponent)(new le.wA("remote-config",function b(C,{instanceIdentifier:x}){const F=C.getProvider("app").getImmediate(),Z=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Hn.create("registration-window");if(!(0,ie.hl)())throw Hn.create("indexed-db-unavailable");const{projectId:re,apiKey:De,appId:Be}=F.options;if(!re)throw Hn.create("registration-project-id");if(!De)throw Hn.create("registration-api-key");if(!Be)throw Hn.create("registration-app-id");const lt=new Zp(Be,F.name,x=x||"firebase"),_t=new dd(lt),Mt=new ce.Yd(Ai);Mt.logLevel=ce.in.ERROR;const ht=new Tc(Z,se.SDK_VERSION,x,re,De,Be),En=new zp(ht,lt),ar=new Zh(En,lt,_t,Mt),As=new cd(F,ar,_t,lt,Mt);return function rr(b){const C=(0,ie.m9)(b);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(As),As},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(Ai,"0.3.15"),(0,se.registerVersion)(Ai,"0.3.15","esm2017")}();const xi="/firebase-messaging-sw.js",Gi="/firebase-cloud-messaging-push-scope",zi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Qo="google.c.a.c_id",Xa="google.c.a.c_l",Ac="google.c.a.ts",Qh="google.c.a.e";var qi=(()=>{return(b=qi||(qi={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",qi;var b})();function ai(b){const C=new Uint8Array(b);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function zr(b){const x=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),Z=new Uint8Array(F.length);for(let re=0;re<F.length;++re)Z[re]=F.charCodeAt(re);return Z}const wo="fcm_token_details_db",fr="fcm_token_object_Store";function Xh(b){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,O.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(wo))return null;let C=null;return(yield(0,de.X3)(wo,5,{upgrade:(F=(0,O.Z)(function*(Z,re,De,Be){var lt;if(re<2||!Z.objectStoreNames.contains(fr))return;const _t=Be.objectStore(fr),Mt=yield _t.index("fcmSenderId").get(b);if(yield _t.clear(),Mt)if(2===re){const ht=Mt;if(!ht.auth||!ht.p256dh||!ht.endpoint)return;C={token:ht.fcmToken,createTime:null!==(lt=ht.createTime)&&void 0!==lt?lt:Date.now(),subscriptionOptions:{auth:ht.auth,p256dh:ht.p256dh,endpoint:ht.endpoint,swScope:ht.swScope,vapidKey:"string"==typeof ht.vapidKey?ht.vapidKey:ai(ht.vapidKey)}}}else if(3===re){const ht=Mt;C={token:ht.fcmToken,createTime:ht.createTime,subscriptionOptions:{auth:ai(ht.auth),p256dh:ai(ht.p256dh),endpoint:ht.endpoint,swScope:ht.swScope,vapidKey:ai(ht.vapidKey)}}}else if(4===re){const ht=Mt;C={token:ht.fcmToken,createTime:ht.createTime,subscriptionOptions:{auth:ai(ht.auth),p256dh:ai(ht.p256dh),endpoint:ht.endpoint,swScope:ht.swScope,vapidKey:ai(ht.vapidKey)}}}}),function(re,De,Be,lt){return F.apply(this,arguments)})})).close(),yield(0,de.Lj)(wo),yield(0,de.Lj)("fcm_vapid_details_db"),yield(0,de.Lj)("undefined"),xn(C)?C:null;var F}),Jh.apply(this,arguments)}function xn(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:C}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const ui="firebase-messaging-store";let Or=null;function eu(){return Or||(Or=(0,de.X3)("firebase-messaging-database",1,{upgrade:(b,C)=>{0===C&&b.createObjectStore(ui)}})),Or}function Io(b){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,O.Z)(function*(b){const C=vi(b),F=yield(yield eu()).transaction(ui).objectStore(ui).get(C);if(F)return F;{const Z=yield Xh(b.appConfig.senderId);if(Z)return yield Wt(b,Z),Z}})).apply(this,arguments)}function Wt(b,C){return tu.apply(this,arguments)}function tu(){return(tu=(0,O.Z)(function*(b,C){const x=vi(b),Z=(yield eu()).transaction(ui,"readwrite");return yield Z.objectStore(ui).put(C,x),yield Z.done,C})).apply(this,arguments)}function Hs(b){return nu.apply(this,arguments)}function nu(){return(nu=(0,O.Z)(function*(b){const C=vi(b),F=(yield eu()).transaction(ui,"readwrite");yield F.objectStore(ui).delete(C),yield F.done})).apply(this,arguments)}function vi({appConfig:b}){return b.appId}const Tn=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function St(b,C){return iu.apply(this,arguments)}function iu(){return(iu=(0,O.Z)(function*(b,C){var x;const F=yield Mc(b),Z=Ce(C),re={method:"POST",headers:F,body:JSON.stringify(Z)};let De;try{De=yield(yield fetch(Ki(b.appConfig),re)).json()}catch(Be){throw Tn.create("token-subscribe-failed",{errorInfo:null===(x=Be)||void 0===x?void 0:x.toString()})}if(De.error)throw Tn.create("token-subscribe-failed",{errorInfo:De.error.message});if(!De.token)throw Tn.create("token-subscribe-no-token");return De.token})).apply(this,arguments)}function tf(b,C){return su.apply(this,arguments)}function su(){return(su=(0,O.Z)(function*(b,C){var x;const F=yield Mc(b),Z=Ce(C.subscriptionOptions),re={method:"PATCH",headers:F,body:JSON.stringify(Z)};let De;try{De=yield(yield fetch(`${Ki(b.appConfig)}/${C.token}`,re)).json()}catch(Be){throw Tn.create("token-update-failed",{errorInfo:null===(x=Be)||void 0===x?void 0:x.toString()})}if(De.error)throw Tn.create("token-update-failed",{errorInfo:De.error.message});if(!De.token)throw Tn.create("token-update-no-token");return De.token})).apply(this,arguments)}function ou(b,C){return xc.apply(this,arguments)}function xc(){return(xc=(0,O.Z)(function*(b,C){var x;const Z={method:"DELETE",headers:yield Mc(b)};try{const De=yield(yield fetch(`${Ki(b.appConfig)}/${C}`,Z)).json();if(De.error)throw Tn.create("token-unsubscribe-failed",{errorInfo:De.error.message})}catch(re){throw Tn.create("token-unsubscribe-failed",{errorInfo:null===(x=re)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function Ki({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function Mc(b){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,O.Z)(function*({appConfig:b,installations:C}){const x=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Ce({p256dh:b,auth:C,endpoint:x,vapidKey:F}){const Z={web:{endpoint:x,auth:C,p256dh:b}};return F!==zi&&(Z.web.applicationPubKey=F),Z}const Gt=6048e5;function Rc(b){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,O.Z)(function*(b){const C=yield Oc(b.swRegistration,b.vapidKey),x={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:C.endpoint,auth:ai(C.getKey("auth")),p256dh:ai(C.getKey("p256dh"))},F=yield Io(b.firebaseDependencies);if(F){if(gd(F.subscriptionOptions,x))return Date.now()>=F.createTime+Gt?Eo(b,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield ou(b.firebaseDependencies,F.token)}catch(Z){console.warn(Z)}return ea(b.firebaseDependencies,x)}return ea(b.firebaseDependencies,x)})).apply(this,arguments)}function Mn(b){return au.apply(this,arguments)}function au(){return(au=(0,O.Z)(function*(b){const C=yield Io(b.firebaseDependencies);C&&(yield ou(b.firebaseDependencies,C.token),yield Hs(b.firebaseDependencies));const x=yield b.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Eo(b,C){return ci.apply(this,arguments)}function ci(){return(ci=(0,O.Z)(function*(b,C){try{const x=yield tf(b.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:x,createTime:Date.now()});return yield Wt(b.firebaseDependencies,F),x}catch(x){throw yield Mn(b),x}})).apply(this,arguments)}function ea(b,C){return ta.apply(this,arguments)}function ta(){return(ta=(0,O.Z)(function*(b,C){const F={token:yield St(b,C),createTime:Date.now(),subscriptionOptions:C};return yield Wt(b,F),F.token})).apply(this,arguments)}function Oc(b,C){return kc.apply(this,arguments)}function kc(){return(kc=(0,O.Z)(function*(b,C){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:zr(C)})})).apply(this,arguments)}function gd(b,C){return C.vapidKey===b.vapidKey&&C.endpoint===b.endpoint&&C.auth===b.auth&&C.p256dh===b.p256dh}function na(b){const C={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function Rn(b,C){if(!C.notification)return;b.notification={};const x=C.notification.title;x&&(b.notification.title=x);const F=C.notification.body;F&&(b.notification.body=F);const Z=C.notification.image;Z&&(b.notification.image=Z);const re=C.notification.icon;re&&(b.notification.icon=re)}(C,b),function Mi(b,C){!C.data||(b.data=C.data)}(C,b),function Pc(b,C){var x,F,Z,re,De;if(!(C.fcmOptions||null!==(x=C.notification)&&void 0!==x&&x.click_action))return;b.fcmOptions={};const Be=null!==(Z=null===(F=C.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==Z?Z:null===(re=C.notification)||void 0===re?void 0:re.click_action;Be&&(b.fcmOptions.link=Be);const lt=null===(De=C.fcmOptions)||void 0===De?void 0:De.analytics_label;lt&&(b.fcmOptions.analyticsLabel=lt)}(C,b),C}function Gs(b){return"object"==typeof b&&!!b&&Qo in b}function Zi(b,C){const x=[];for(let F=0;F<b.length;F++)x.push(b.charAt(F)),F<C.length&&x.push(C.charAt(F));return x.join("")}function ra(b){return Tn.create("missing-app-config-values",{valueName:b})}Zi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Zi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Qp{constructor(C,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function Yp(b){if(!b||!b.options)throw ra("App Configuration Object");if(!b.name)throw ra("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:x}=b;for(const F of C)if(!x[F])throw ra(F);return{appName:b.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:Z,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Fc(b){return uu.apply(this,arguments)}function uu(){return(uu=(0,O.Z)(function*(b){var C;try{b.swRegistration=yield navigator.serviceWorker.register(xi,{scope:Gi}),b.swRegistration.update().catch(()=>{})}catch(x){throw Tn.create("failed-service-worker-registration",{browserErrorMessage:null===(C=x)||void 0===C?void 0:C.message})}})).apply(this,arguments)}function ia(b,C){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,O.Z)(function*(b,C){if(!C&&!b.swRegistration&&(yield Fc(b)),C||!b.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Tn.create("invalid-sw-registration");b.swRegistration=C}})).apply(this,arguments)}function sa(b,C){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,O.Z)(function*(b,C){C?b.vapidKey=C:b.vapidKey||(b.vapidKey=zi)})).apply(this,arguments)}function lu(){return(lu=(0,O.Z)(function*(b,C){if(!navigator)throw Tn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Tn.create("permission-blocked");return yield sa(b,C?.vapidKey),yield ia(b,C?.serviceWorkerRegistration),Rc(b)})).apply(this,arguments)}function Uc(b,C,x){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,O.Z)(function*(b,C,x){const F=jc(C);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[Qo],message_name:x[Xa],message_time:x[Ac],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function jc(b){switch(b){case qi.NOTIFICATION_CLICKED:return"notification_open";case qi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function zs(){return(zs=(0,O.Z)(function*(b,C){const x=C.data;if(!x.isFirebaseMessaging)return;b.onMessageHandler&&x.messageType===qi.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(na(x)):b.onMessageHandler.next(na(x)));const F=x.data;Gs(F)&&"1"===F[Qh]&&(yield Uc(b,x.messageType,F))})).apply(this,arguments)}const qs="@firebase/messaging",Jn=b=>{const C=new Qp(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function md(b,C){return zs.apply(this,arguments)}(C,x)),C},qr=b=>{const C=b.getProvider("messaging").getImmediate();return{getToken:F=>function cu(b,C){return lu.apply(this,arguments)}(C,F)}};function yd(){return $c.apply(this,arguments)}function $c(){return($c=(0,O.Z)(function*(){try{yield(0,ie.eu)()}catch{return!1}return typeof window<"u"&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function _n(){(0,se._registerComponent)(new le.wA("messaging",Jn,"PUBLIC")),(0,se._registerComponent)(new le.wA("messaging-internal",qr,"PRIVATE")),(0,se.registerVersion)(qs,"0.10.0"),(0,se.registerVersion)(qs,"0.10.0","esm2017")}();const bo="analytics",wd="firebase_id",Ks="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",pu="https://www.googletagmanager.com/gtag/js",Nn=new ce.Yd("@firebase/analytics");function gu(b){return Promise.all(b.map(C=>C.catch(x=>x)))}function mu(b,C){const x=document.createElement("script");x.src=`${pu}?l=${b}&id=${C}`,x.async=!0,document.head.appendChild(x)}function rf(b,C,x,F,Z,re){return Co.apply(this,arguments)}function Co(){return(Co=(0,O.Z)(function*(b,C,x,F,Z,re){const De=F[Z];try{if(De)yield C[De];else{const lt=(yield gu(x)).find(_t=>_t.measurementId===Z);lt&&(yield C[lt.appId])}}catch(Be){Nn.error(Be)}b("config",Z,re)})).apply(this,arguments)}function To(b,C,x,F,Z){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,O.Z)(function*(b,C,x,F,Z){try{let re=[];if(Z&&Z.send_to){let De=Z.send_to;Array.isArray(De)||(De=[De]);const Be=yield gu(x);for(const lt of De){const _t=Be.find(ht=>ht.measurementId===lt),Mt=_t&&C[_t.appId];if(!Mt){re=[];break}re.push(Mt)}}0===re.length&&(re=Object.values(C)),yield Promise.all(re),b("event",F,Z||{})}catch(re){Nn.error(re)}})).apply(this,arguments)}function Ed(b){const C=window.document.getElementsByTagName("script");for(const x of Object.values(C))if(x.src&&x.src.includes(pu)&&x.src.includes(b))return x;return null}const sr=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ca=new class Ri{constructor(C={},x=1e3){this.throttleMetadata=C,this.intervalMillis=x}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,x){this.throttleMetadata[C]=x}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function bd(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function la(b){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,O.Z)(function*(b){var C;const{appId:x,apiKey:F}=b,Z={method:"GET",headers:bd(F)},re=Ks.replace("{app-id}",x),De=yield fetch(re,Z);if(200!==De.status&&304!==De.status){let Be="";try{const lt=yield De.json();null!==(C=lt.error)&&void 0!==C&&C.message&&(Be=lt.error.message)}catch{}throw sr.create("config-fetch-failed",{httpStatus:De.status,responseMessage:Be})}return De.json()})).apply(this,arguments)}function Vn(b){return wi.apply(this,arguments)}function wi(){return(wi=(0,O.Z)(function*(b,C=ca,x){const{appId:F,apiKey:Z,measurementId:re}=b.options;if(!F)throw sr.create("no-app-id");if(!Z){if(re)return{measurementId:re,appId:F};throw sr.create("no-api-key")}const De=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Be=new wu;return setTimeout((0,O.Z)(function*(){Be.abort()}),void 0!==x?x:6e4),_u({appId:F,apiKey:Z,measurementId:re},De,Be,C)})).apply(this,arguments)}function _u(b,C,x){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,O.Z)(function*(b,{throttleEndTimeMillis:C,backoffCount:x},F,Z=ca){var re,De;const{appId:Be,measurementId:lt}=b;try{yield da(F,C)}catch(_t){if(lt)return Nn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${lt} provided in the "measurementId" field in the local Firebase config. [${null===(re=_t)||void 0===re?void 0:re.message}]`),{appId:Be,measurementId:lt};throw _t}try{const _t=yield la(b);return Z.deleteThrottleMetadata(Be),_t}catch(_t){const Mt=_t;if(!vu(Mt)){if(Z.deleteThrottleMetadata(Be),lt)return Nn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${lt} provided in the "measurementId" field in the local Firebase config. [${Mt?.message}]`),{appId:Be,measurementId:lt};throw _t}const ht=503===Number(null===(De=Mt?.customData)||void 0===De?void 0:De.httpStatus)?(0,ie.$s)(x,Z.intervalMillis,30):(0,ie.$s)(x,Z.intervalMillis),En={throttleEndTimeMillis:Date.now()+ht,backoffCount:x+1};return Z.setThrottleMetadata(Be,En),Nn.debug(`Calling attemptFetch again in ${ht} millis`),_u(b,En,F,Z)}})).apply(this,arguments)}function da(b,C){return new Promise((x,F)=>{const Z=Math.max(C-Date.now(),0),re=setTimeout(x,Z);b.addEventListener(()=>{clearTimeout(re),F(sr.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function vu(b){if(!(b instanceof ie.ZR&&b.customData))return!1;const C=Number(b.customData.httpStatus);return 429===C||500===C||503===C||504===C}class wu{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let bs,fa;function Cs(){return(Cs=(0,O.Z)(function*(b,C,x,F,Z){if(Z&&Z.global)b("event",x,F);else{const re=yield C;b("event",x,Object.assign(Object.assign({},F),{send_to:re}))}})).apply(this,arguments)}function Xs(b){fa=b}function Wc(b){bs=b}function Qi(){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,O.Z)(function*(){var b;if(!(0,ie.hl)())return Nn.warn(sr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(C){return Nn.warn(sr.create("indexeddb-unavailable",{errorInfo:null===(b=C)||void 0===b?void 0:b.toString()}).message),!1}return!0})).apply(this,arguments)}function xo(){return(xo=(0,O.Z)(function*(b,C,x,F,Z,re,De){var Be;const lt=Vn(b);lt.then(ar=>{x[ar.measurementId]=ar.appId,b.options.measurementId&&ar.measurementId!==b.options.measurementId&&Nn.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${ar.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ar=>Nn.error(ar)),C.push(lt);const _t=Qi().then(ar=>{if(ar)return F.getId()}),[Mt,ht]=yield Promise.all([lt,_t]);Ed(re)||mu(re,Mt.measurementId),fa&&(Z("consent","default",fa),Xs(void 0)),Z("js",new Date);const En=null!==(Be=De?.config)&&void 0!==Be?Be:{};return En.origin="firebase",En.update=!0,null!=ht&&(En[wd]=ht),Z("config",Mt.measurementId,En),bs&&(Z("set",bs),Wc(void 0)),Mt.measurementId})).apply(this,arguments)}class Du{constructor(C){this.app=C}_delete(){return delete Wr[this.app.options.appId],Promise.resolve()}}let Wr={},Ts=[];const Mo={};let No,Js,Ro="dataLayer",pa=!1;function Ty(b,C,x){!function Xp(){const b=[];if((0,ie.ru)()&&b.push("This is a browser extension environment."),(0,ie.zI)()||b.push("Cookies are not available."),b.length>0){const C=b.map((F,Z)=>`(${Z+1}) ${F}`).join(" "),x=sr.create("invalid-analytics-context",{errorInfo:C});Nn.warn(x.message)}}();const F=b.options.appId;if(!F)throw sr.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw sr.create("no-api-key");Nn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Wr[F])throw sr.create("already-exists",{id:F});if(!pa){!function Id(b){let C=[];Array.isArray(window[b])?C=window[b]:window[b]=C}(Ro);const{wrappedGtag:re,gtagCore:De}=function oa(b,C,x,F,Z){let re=function(...De){window[F].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(re=window[Z]),window[Z]=function yu(b,C,x,F){function re(){return(re=(0,O.Z)(function*(De,Be,lt){try{"event"===De?yield To(b,C,x,Be,lt):"config"===De?yield rf(b,C,x,F,Be,lt):"consent"===De?b("consent","update",lt):b("set",Be)}catch(_t){Nn.error(_t)}})).apply(this,arguments)}return function Z(De,Be,lt){return re.apply(this,arguments)}}(re,b,C,x),{gtagCore:re,wrappedGtag:window[Z]}}(Wr,Ts,Mo,Ro,"gtag");Js=re,No=De,pa=!0}return Wr[F]=function Ao(b,C,x,F,Z,re,De){return xo.apply(this,arguments)}(b,Ts,Mo,C,No,Ro,x),new Du(b)}function Ay(){return sf.apply(this,arguments)}function sf(){return(sf=(0,O.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}const af="@firebase/analytics";!function Kr(){(0,se._registerComponent)(new le.wA(bo,(C,{options:x})=>Ty(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,se._registerComponent)(new le.wA("analytics-internal",function b(C){try{const x=C.getProvider(bo).getImmediate();return{logEvent:(F,Z,re)=>function Qt(b,C,x,F){b=(0,ie.m9)(b),function Cd(b,C,x,F,Z){return Cs.apply(this,arguments)}(Js,Wr[b.app.options.appId],C,x,F).catch(Z=>Nn.error(Z))}(x,F,Z,re)}}catch(x){throw sr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,se.registerVersion)(af,"0.8.4"),(0,se.registerVersion)(af,"0.8.4","esm2017")}();var Ii=P(4408),Oo=P(7565);const Ni=new class Ei extends Oo.v{}(class Zc extends Ii.o{constructor(C,x){super(C,x),this.scheduler=C,this.work=x}schedule(C,x=0){return x>0?super.schedule(C,x):(this.delay=x,this.state=C,this.scheduler.flush(this),this)}execute(C,x){return x>0||this.closed?super.execute(C,x):this._execute(C,x)}requestAsyncId(C,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,x,F):(C.flush(this),0)}});var It=P(4986),Tu=P(8505),eo=P(5363),ga=P(9468);const kr=new g.GfV("7.4.1"),ma="__angularfire_symbol__analyticsIsSupportedValue",Xi="__angularfire_symbol__analyticsIsSupported",Oi="__angularfire_symbol__remoteConfigIsSupportedValue",Pr="__angularfire_symbol__remoteConfigIsSupported",Yc="__angularfire_symbol__messagingIsSupportedValue",Su="__angularfire_symbol__messagingIsSupported";function _a(b,C,x){if(C){if(1===C.length)return C[0];const re=C.filter(De=>De.app===x);if(1===re.length)return re[0]}return x.container.getProvider(b).getImmediate({optional:!0})}globalThis[Xi]||(globalThis[Xi]=Ay().then(b=>globalThis[ma]=b).catch(()=>globalThis[ma]=!1)),globalThis[Su]||(globalThis[Su]=yd().then(b=>globalThis[Yc]=b).catch(()=>globalThis[Yc]=!1)),globalThis[Pr]||(globalThis[Pr]=Qa().then(b=>globalThis[Oi]=b).catch(()=>globalThis[Oi]=!1));const Zr=(b,C)=>{const x=C?[C]:(0,J.C6)(),F=[];return x.forEach(Z=>{Z.container.getProvider(b).instances.forEach(De=>{F.includes(De)||F.push(De)})}),F};function ko(){}class gn{constructor(C,x=Ni){this.zone=C,this.delegate=x}now(){return this.delegate.now()}schedule(C,x,F){const Z=this.zone;return this.delegate.schedule(function(De){Z.runGuarded(()=>{C.apply(this,[De])})},x,F)}}class ki{constructor(C){this.zone=C,this.task=null}call(C,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ko,{},ko,ko)),x.pipe((0,Tu.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Au=(()=>{class b{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new gn(Zone.current)),this.insideAngular=x.run(()=>new gn(Zone.current,It.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(x){return new(x||b)(g.LFG(g.R0b))},b.\u0275prov=g.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Ss(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function Xc(b){return b.pipe((0,eo.Q)(Ss().outsideAngular))}function Ji(b){return Ss(),function Jc(b){return function(x){return(x=x.lift(new ki(b.ngZone))).pipe((0,ga.R)(b.outsideAngular),(0,eo.Q)(b.insideAngular))}}(Ss())(b)}},2090:(at,Se,P)=>{P.d(Se,{$s:()=>Qe,BH:()=>Ht,G6:()=>Ie,L:()=>de,LL:()=>Zt,Pz:()=>Xt,Sg:()=>We,UG:()=>we,US:()=>le,ZB:()=>j,ZR:()=>mn,aH:()=>ut,b$:()=>fe,eu:()=>je,hl:()=>Ue,jU:()=>et,m9:()=>Pt,ne:()=>Bn,pd:()=>Ti,r3:()=>yi,ru:()=>me,tV:()=>he,uI:()=>Me,vZ:()=>Ke,w1:()=>rt,xO:()=>Zn,xb:()=>si,z$:()=>Le,zI:()=>U,zd:()=>oi});const se=function($){const L=[];let q=0;for(let ve=0;ve<$.length;ve++){let Y=$.charCodeAt(ve);Y<128?L[q++]=Y:Y<2048?(L[q++]=Y>>6|192,L[q++]=63&Y|128):55296==(64512&Y)&&ve+1<$.length&&56320==(64512&$.charCodeAt(ve+1))?(Y=65536+((1023&Y)<<10)+(1023&$.charCodeAt(++ve)),L[q++]=Y>>18|240,L[q++]=Y>>12&63|128,L[q++]=Y>>6&63|128,L[q++]=63&Y|128):(L[q++]=Y>>12|224,L[q++]=Y>>6&63|128,L[q++]=63&Y|128)}return L},le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,L){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let Y=0;Y<$.length;Y+=3){const He=$[Y],ct=Y+1<$.length,Yt=ct?$[Y+1]:0,dn=Y+2<$.length,qt=dn?$[Y+2]:0;let jt=(15&Yt)<<2|qt>>6,nr=63&qt;dn||(nr=64,ct||(jt=64)),ve.push(q[He>>2],q[(3&He)<<4|Yt>>4],q[jt],q[nr])}return ve.join("")},encodeString($,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa($):this.encodeByteArray(se($),L)},decodeString($,L){return this.HAS_NATIVE_SUPPORT&&!L?atob($):function($){const L=[];let q=0,ve=0;for(;q<$.length;){const Y=$[q++];if(Y<128)L[ve++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const He=$[q++];L[ve++]=String.fromCharCode((31&Y)<<6|63&He)}else if(Y>239&&Y<365){const dn=((7&Y)<<18|(63&$[q++])<<12|(63&$[q++])<<6|63&$[q++])-65536;L[ve++]=String.fromCharCode(55296+(dn>>10)),L[ve++]=String.fromCharCode(56320+(1023&dn))}else{const He=$[q++],ct=$[q++];L[ve++]=String.fromCharCode((15&Y)<<12|(63&He)<<6|63&ct)}}return L.join("")}(this.decodeStringToByteArray($,L))},decodeStringToByteArray($,L){this.init_();const q=L?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let Y=0;Y<$.length;){const He=q[$.charAt(Y++)],Yt=Y<$.length?q[$.charAt(Y)]:0;++Y;const qt=Y<$.length?q[$.charAt(Y)]:64;++Y;const $e=Y<$.length?q[$.charAt(Y)]:64;if(++Y,null==He||null==Yt||null==qt||null==$e)throw Error();ve.push(He<<2|Yt>>4),64!==qt&&(ve.push(Yt<<4&240|qt>>2),64!==$e&&ve.push(qt<<6&192|$e))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}},de=function($){return function($){const L=se($);return le.encodeByteArray(L,!0)}($).replace(/\./g,"")},he=function($){try{return le.decodeString($,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function j($,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return L}for(const q in L)!L.hasOwnProperty(q)||!K(q)||($[q]=j($[q],L[q]));return $}function K($){return"__proto__"!==$}function Le(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Me(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function we(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function et(){return"object"==typeof self&&self.self===self}function me(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function fe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function rt(){const $=Le();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function Ie(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ue(){return"object"==typeof indexedDB}function je(){return new Promise(($,L)=>{try{let q=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(ve);Y.onsuccess=()=>{Y.result.close(),q||self.indexedDB.deleteDatabase(ve),$(!0)},Y.onupgradeneeded=()=>{q=!1},Y.onerror=()=>{var He;L((null===(He=Y.error)||void 0===He?void 0:He.message)||"")}}catch(q){L(q)}})}function U(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const te=()=>{try{return function ge(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if(typeof document>"u")return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=$&&he($[1]);return L&&JSON.parse(L)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},ut=()=>{var $;return null===($=te())||void 0===$?void 0:$.config},Xt=$=>{var L;return null===(L=te())||void 0===L?void 0:L[`_${$}`]};class Ht{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,q)=>{this.resolve=L,this.reject=q})}wrapCallback(L){return(q,ve)=>{q?this.reject(q):this.resolve(ve),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(q):L(q,ve))}}}function We($,L){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=L||"demo-project",Y=$.iat||0,He=$.sub||$.user_id;if(!He)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ct=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:Y,exp:Y+3600,auth_time:Y,sub:He,user_id:He,firebase:{sign_in_provider:"custom",identities:{}}},$);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(ct)),""].join(".")}class mn extends Error{constructor(L,q,ve){super(q),this.code=L,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,mn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zt.prototype.create)}}class Zt{constructor(L,q,ve){this.service=L,this.serviceName=q,this.errors=ve}create(L,...q){const ve=q[0]||{},Y=`${this.service}/${L}`,He=this.errors[L],ct=He?function Jt($,L){return $.replace(xr,(q,ve)=>{const Y=L[ve];return null!=Y?String(Y):`<${ve}?>`})}(He,ve):"Error";return new mn(Y,`${this.serviceName}: ${ct} (${Y}).`,ve)}}const xr=/\{\$([^}]+)}/g;function yi($,L){return Object.prototype.hasOwnProperty.call($,L)}function si($){for(const L in $)if(Object.prototype.hasOwnProperty.call($,L))return!1;return!0}function Ke($,L){if($===L)return!0;const q=Object.keys($),ve=Object.keys(L);for(const Y of q){if(!ve.includes(Y))return!1;const He=$[Y],ct=L[Y];if(Ir(He)&&Ir(ct)){if(!Ke(He,ct))return!1}else if(He!==ct)return!1}for(const Y of ve)if(!q.includes(Y))return!1;return!0}function Ir($){return null!==$&&"object"==typeof $}function Zn($){const L=[];for(const[q,ve]of Object.entries($))Array.isArray(ve)?ve.forEach(Y=>{L.push(encodeURIComponent(q)+"="+encodeURIComponent(Y))}):L.push(encodeURIComponent(q)+"="+encodeURIComponent(ve));return L.length?"&"+L.join("&"):""}function oi($){const L={};return $.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[Y,He]=ve.split("=");L[decodeURIComponent(Y)]=decodeURIComponent(He)}}),L}function Ti($){const L=$.indexOf("?");if(!L)return"";const q=$.indexOf("#",L);return $.substring(L,q>0?q:void 0)}function Bn($,L){const q=new fn($,L);return q.subscribe.bind(q)}class fn{constructor(L,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{L(this)}).catch(ve=>{this.error(ve)})}next(L){this.forEachObserver(q=>{q.next(L)})}error(L){this.forEachObserver(q=>{q.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,q,ve){let Y;if(void 0===L&&void 0===q&&void 0===ve)throw new Error("Missing Observer.");Y=function it($,L){if("object"!=typeof $||null===$)return!1;for(const q of L)if(q in $&&"function"==typeof $[q])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:q,complete:ve},void 0===Y.next&&(Y.next=on),void 0===Y.error&&(Y.error=on),void 0===Y.complete&&(Y.complete=on);const He=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch{}}),this.observers.push(Y),He}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,L)}sendOne(L,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{q(this.observers[L])}catch(ve){typeof console<"u"&&console.error&&console.error(ve)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function on(){}function Qe($,L=1e3,q=2){const ve=L*Math.pow(q,$),Y=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+Y)}function Pt($){return $&&$._delegate?$._delegate:$}},4713:(at,Se,P)=>{var g=P(4650);let J=null;function O(){return J}const ce=new g.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function he(){return(0,g.LFG)(j)}()},providedIn:"platform"}),n})();const B=new g.OlP("Location Initialized");let j=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){K()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){K()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ce))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Le(){return new j((0,g.LFG)(ce))}()},providedIn:"platform"}),n})();function K(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function et(n){return n&&"?"!==n[0]?"?"+n:n}let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(Ye)},providedIn:"root"}),n})();const fe=new g.OlP("appBaseHref");let Ye=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,g.f3M)(ce).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+et(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const l=this.prepareExternalUrl(o+et(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){const l=this.prepareExternalUrl(o+et(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(de),g.LFG(fe,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rt=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Me(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let l=this.prepareExternalUrl(o+et(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){let l=this.prepareExternalUrl(o+et(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(de),g.LFG(fe,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n{constructor(t){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=we(Ue(r)),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+et(r))}normalize(t){return n.stripTrailingSlash(function Ie(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ue(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+et(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+et(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=et,n.joinWithSlash=Me,n.stripTrailingSlash=we,n.\u0275fac=function(t){return new(t||n)(g.LFG(me))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function _e(){return new Ae((0,g.LFG)(me))}()},providedIn:"root"}),n})();function Ue(n){return n.replace(/\/index.html$/,"")}let rr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Dc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ir("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ir("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Dc{constructor(){this.$implicit=null,this.ngIf=null}}function ir(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}let Xo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function fr(n){return"server"===n}let Ja=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new ef((0,g.LFG)(ce),window)}),n})();class ef{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Or(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ui(this.window.history)||ui(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ui(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class zs extends class md extends class le{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ie(n){J||(J=n)}(new zs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function du(){return qs=qs||document.querySelector("base"),qs?qs.getAttribute("href"):null}();return null==t?null:function qr(n){Jn=Jn||document.createElement("a"),Jn.setAttribute("href",n);const e=Jn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){qs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Za(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Jn,qs=null;const _n=new g.OlP("TRANSITION_ID"),$c=[{provide:g.ip1,useFactory:function yd(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[_n,ce,g.zs3],multi:!0}];let Hc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const hu=new g.OlP("EventManagerPlugins");let _d=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const l=o[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(hu),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class fu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Ws=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Do=(()=>{class n extends Ws{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const l=this._doc.createElement("style");l.textContent=u,o.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(vd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(vd))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ce))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function vd(n){O().remove(n)}const bo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},wd=/%COMP%/g;function mu(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?mu(n,o,t):(o=o.replace(wd,n),t.push(o))}return t}function Id(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Co=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new To(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Ed(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case g.ifc.ShadowDom:return new Dd(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=mu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(_d),g.LFG(Do),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class To{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(bo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(oa(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(oa(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=bo[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=bo[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,o&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Id(r)):this.eventManager.addEventListener(e,t,Id(r))}}function oa(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ed extends To{constructor(e,t,r,o){super(e),this.component=r;const u=mu(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Nn(n){return"_ngcontent-%COMP%".replace(wd,n)}(o+"-"+r.id),this.hostAttr=function gu(n){return"_nghost-%COMP%".replace(wd,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Dd extends To{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=mu(o.id,o.styles,[]);for(let l=0;l<u.length;l++){const m=document.createElement("style");m.textContent=u[l],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let sr=(()=>{class n extends fu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ce))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const aa=["alt","control","meta","shift"],ua={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ri={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ca=(()=>{class n extends fu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),aa.forEach(D=>{const A=r.indexOf(D);A>-1&&(r.splice(A,1),l+=D+".")}),l+=u,0!=r.length||0===u.length)return null;const v={};return v.domEventName=o,v.fullKey=l,v}static matchEventFullKeyCode(t,r){let o=ua[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),aa.forEach(l=>{l!==o&&(0,Ri[l])(t)&&(u+=l+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ce))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const wu=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function _u(){zs.makeCurrent()},multi:!0},{provide:ce,useFactory:function da(){return(0,g.RDi)(document),document},deps:[]}]),bs=new g.OlP(""),Cd=[{provide:g.rWj,useClass:class nf{addToWindow(e){g.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const o=g.dqk.getAllAngularTestabilities();let u=o.length,l=!1;const m=function(v){l=l||v,u--,0==u&&r(l)};o.forEach(function(v){v.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:g.lri,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]}],Cs=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function Ys(){return new g.qLn},deps:[]},{provide:hu,useClass:sr,multi:!0,deps:[ce,g.R0b,g.Lbi]},{provide:hu,useClass:ca,multi:!0,deps:[ce]},{provide:Co,useClass:Co,deps:[_d,Do,g.AFp]},{provide:g.FYo,useExisting:Co},{provide:Ws,useExisting:Do},{provide:Do,useClass:Do,deps:[ce]},{provide:_d,useClass:_d,deps:[hu,g.R0b]},{provide:class Io{},useClass:Hc,deps:[]},[]];let zc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:_n,useExisting:g.AFp},$c]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(bs,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[...Cs,...Cd],imports:[Xo,g.hGG]}),n})(),Yi=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ce))},n.\u0275prov=g.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function So(){return new Yi((0,g.LFG)(ce))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Qt=P(8996),Dr=P(9751);const{isArray:af}=Array,{getPrototypeOf:Cu,prototype:Kr,keys:Ii}=Object;function Zc(n){if(1===n.length){const e=n[0];if(af(e))return{args:e,keys:null};if(function Oo(n){return n&&"object"==typeof n&&Cu(n)===Kr}(e)){const t=Ii(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ei=P(8421),Ni=P(7669),pr=P(5403),It=P(4004);const{isArray:Tu}=Array;function ga(n){return(0,It.U)(e=>function eo(n,e){return Tu(e)?n(...e):n(e)}(n,e))}function kr(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let Xi=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),Oi=(()=>{class n extends Xi{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const Pr=new g.OlP("NgValueAccessor"),ya={provide:Pr,useExisting:(0,g.Gpc)(()=>Qc),multi:!0},Sd=new g.OlP("CompositionEventMode");let Qc=(()=>{class n extends Xi{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function eg(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(Sd,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[g._Bn([ya]),g.qOj]}),n})();const gn=new g.OlP("NgValidators"),ki=new g.OlP("NgAsyncValidators");function C(n){return null!=n}function x(n){return(0,g.QGY)(n)?(0,Qt.D)(n):n}function F(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Z(n,e){return e.map(t=>t(n))}function De(n){return n.map(e=>function re(n){return!n.validate}(e)?e:t=>e.validate(t))}function lt(n){return null!=n?function Be(n){if(!n)return null;const e=n.filter(C);return 0==e.length?null:function(t){return F(Z(t,e))}}(De(n)):null}function Mt(n){return null!=n?function _t(n){if(!n)return null;const e=n.filter(C);return 0==e.length?null:function(t){return function ma(...n){const e=(0,Ni.jO)(n),{args:t,keys:r}=Zc(n),o=new Dr.y(u=>{const{length:l}=t;if(!l)return void u.complete();const m=new Array(l);let v=l,D=l;for(let A=0;A<l;A++){let M=!1;(0,Ei.Xf)(t[A]).subscribe((0,pr.x)(u,V=>{M||(M=!0,D--),m[A]=V},()=>v--,void 0,()=>{(!v||!M)&&(D||u.next(r?kr(r,m):m),u.complete())}))}});return e?o.pipe(ga(e)):o}(Z(t,e).map(x)).pipe((0,It.U)(F))}}(De(n)):null}function ht(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function As(n){return n?Array.isArray(n)?n:[n]:[]}function es(n,e){return Array.isArray(n)?n.includes(e):n===e}function xs(n,e){const t=As(e);return As(n).forEach(o=>{es(t,o)||t.push(o)}),t}function no(n,e){return As(e).filter(t=>!es(n,t))}class ts{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=lt(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Mt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class kn extends ts{get formDirective(){return null}get path(){return null}}class Yr extends ts{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let tg=(()=>{class n extends class Ms{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Yr,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[g.qOj]}),n})();const Ea="VALID",nl="INVALID",Da="PENDING",Mu="DISABLED";function ig(n){return Array.isArray(n)?lt(n):n||null}function sg(n){return Array.isArray(n)?Mt(n):n||null}function il(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Ou(n,e){(function ro(n,e){const t=function En(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(ht(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function ar(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(ht(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();Rd(e._rawValidators,o),Rd(e._rawAsyncValidators,o)})(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function io(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&hf(n,e)})}(n,e),function Nd(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function ba(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&hf(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function $w(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Rd(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function hf(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Pd(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Lu(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Hy={provide:Yr,useExisting:(0,g.Gpc)(()=>hg)},ol=(()=>Promise.resolve())();let hg=(()=>{class n extends Yr{constructor(t,r,o,u,l){super(),this._changeDetectorRef=l,this.control=new class extends class Nu{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=ig(this._rawValidators),this._composedAsyncValidatorFn=sg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ea}get invalid(){return this.status===nl}get pending(){return this.status==Da}get disabled(){return this.status===Mu}get enabled(){return this.status!==Mu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=ig(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=sg(e)}addValidators(e){this.setValidators(xs(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(xs(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(no(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(no(e,this._rawAsyncValidators))}hasValidator(e){return es(this._rawValidators,e)}hasAsyncValidator(e){return es(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Da,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Mu,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ea,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ea||this.status===Da)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Mu:Ea}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Da,this._hasOwnPendingAsyncValidator=!0;const t=x(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?Mu:this.errors?nl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Da)?Da:this._anyControlsHaveStatus(nl)?nl:Ea}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){il(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}{constructor(e=null,t,r){super(function Ru(n){return(il(n)?n.validators:n)||null}(t),function rl(n,e){return(il(e)?e.asyncValidators:n)||null}(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),il(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Lu(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Pd(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Pd(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Lu(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},this._registered=!1,this.update=new g.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function gf(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===Qc?t=u:function zw(n){return Object.getPrototypeOf(n.constructor)===Oi}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function ag(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ou(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){ol.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&(0,g.D6c)(r);ol.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function df(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(kn,9),g.Y36(gn,10),g.Y36(ki,10),g.Y36(Pr,10),g.Y36(g.sBO,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([Hy]),g.qOj,g.TTD]}),n})(),vf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})(),Sf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[vf]}),n})(),Qy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[Sf]}),n})();function tt(...n){const e=(0,Ni.yG)(n);return(0,Qt.D)(n,e)}var Ns=P(7579);class Os extends Ns.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const yg=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var cl=P(4671),Af=P(9672);function Qw(...n){const e=(0,Ni.yG)(n),t=(0,Ni.jO)(n),{args:r,keys:o}=Zc(n);if(0===r.length)return(0,Qt.D)([],e);const u=new Dr.y(function ab(n,e,t=cl.y){return r=>{Xw(e,()=>{const{length:o}=n,u=new Array(o);let l=o,m=o;for(let v=0;v<o;v++)Xw(e,()=>{const D=(0,Qt.D)(n[v],e);let A=!1;D.subscribe((0,pr.x)(r,M=>{u[v]=M,A||(A=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,o?l=>kr(o,l):cl.y));return t?u.pipe(ga(t)):u}function Xw(n,e,t){n?(0,Af.f)(t,n,e):e()}var qd=P(8189);function Jw(){return(0,qd.J)(1)}function t_(...n){return Jw()((0,Qt.D)(n,(0,Ni.yG)(n)))}function e0(n){return new Dr.y(e=>{(0,Ei.Xf)(n()).subscribe(e)})}var ub=P(9635),xf=P(576);function Mf(n,e){const t=(0,xf.m)(n)?n:()=>n,r=o=>o.error(t());return new Dr.y(e?o=>e.schedule(r,0,o):r)}var ll=P(515),t0=P(727),Fr=P(4482);function n_(){return(0,Fr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,pr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class n0 extends Dr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Fr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new t0.w0;const t=this.getSubject();e.add(this.source.subscribe((0,pr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=t0.w0.EMPTY)}return e}refCount(){return n_()(this)}}function nn(n,e){return(0,Fr.e)((t,r)=>{let o=null,u=0,l=!1;const m=()=>l&&!o&&r.complete();t.subscribe((0,pr.x)(r,v=>{o?.unsubscribe();let D=0;const A=u++;(0,Ei.Xf)(n(v,A)).subscribe(o=(0,pr.x)(r,M=>r.next(e?e(v,M,A,D++):M),()=>{o=null,m()}))},()=>{l=!0,m()}))})}function dl(n){return n<=0?()=>ll.E:(0,Fr.e)((e,t)=>{let r=0;e.subscribe((0,pr.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function Rf(...n){const e=(0,Ni.yG)(n);return(0,Fr.e)((t,r)=>{(e?t_(n,t,e):t_(n,t)).subscribe(r)})}function is(n,e){return(0,Fr.e)((t,r)=>{let o=0;t.subscribe((0,pr.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var hn=P(5577);function $u(n){return(0,Fr.e)((e,t)=>{let r=!1;e.subscribe((0,pr.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function r_(n=cb){return(0,Fr.e)((e,t)=>{let r=!1;e.subscribe((0,pr.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function cb(){return new yg}function Aa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?is((o,u)=>n(o,u,r)):cl.y,dl(1),t?$u(e):r_(()=>new yg))}function Hu(n,e){return(0,xf.m)(e)?(0,hn.z)(n,e,1):(0,hn.z)(n,1)}var li=P(8505);function xa(n){return(0,Fr.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,pr.x)(t,void 0,void 0,l=>{u=(0,Ei.Xf)(n(l,xa(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function lb(n,e,t,r,o){return(u,l)=>{let m=t,v=e,D=0;u.subscribe((0,pr.x)(l,A=>{const M=D++;v=m?n(v,A,M):(m=!0,A),r&&l.next(v)},o&&(()=>{m&&l.next(v),l.complete()})))}}function Wd(n,e){return(0,Fr.e)(lb(n,e,arguments.length>=2,!0))}function i_(n){return n<=0?()=>ll.E:(0,Fr.e)((e,t)=>{let r=[];e.subscribe((0,pr.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function r0(n,e){const t=arguments.length>=2;return r=>r.pipe(n?is((o,u)=>n(o,u,r)):cl.y,i_(1),t?$u(e):r_(()=>new yg))}function s_(n){return(0,Fr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Lt="primary",ss=Symbol("RouteTitle");class fb{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Kd(n){return new fb(n)}function XA(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))o[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function so(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!pb(n[o],e[o]))return!1;return!0}function pb(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function oo(n){return Array.prototype.concat.apply([],n)}function _g(n){return n.length>0?n[n.length-1]:null}function Jr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ma(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,Qt.D)(Promise.resolve(n)):tt(n)}const gb={exact:function u_(n,e,t){if(!pl(n.segments,e.segments)||!Of(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!u_(n.children[r],e.children[r],t))return!1;return!0},subset:hl},o0={exact:function a_(n,e){return so(n,e)},subset:function ex(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>pb(n[t],e[t]))},ignored:()=>!0};function vg(n,e,t){return gb[t.paths](n.root,e.root,t.matrixParams)&&o0[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function hl(n,e,t){return wg(n,e,e.segments,t)}function wg(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!pl(o,t)||e.hasChildren()||!Of(o,t,r))}if(n.segments.length===t.length){if(!pl(n.segments,t)||!Of(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!hl(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(pl(n.segments,o)&&Of(n.segments,o,r)&&n.children[Lt])&&wg(n.children[Lt],e,u,r)}}function Of(n,e,t){return e.every((r,o)=>o0[t](n[o].parameters,r.parameters))}class fl{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Kd(this.queryParams)),this._queryParamMap}toString(){return u0.serialize(this)}}class zt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Jr(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zd(this)}}class kf{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Kd(this.parameters)),this._parameterMap}toString(){return l_(this)}}function pl(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let a0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return new c_},providedIn:"root"}),n})();class c_{parse(e){const t=new d_(e);return new fl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Yd(e.root,!0)}`,r=function vb(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Eg(t)}=${Eg(o)}`).join("&"):`${Eg(t)}=${Eg(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function _b(n){return encodeURI(n)}(e.fragment)}`:""}`}}const u0=new c_;function Zd(n){return n.segments.map(e=>l_(e)).join("/")}function Yd(n,e){if(!n.hasChildren())return Zd(n);if(e){const t=n.children[Lt]?Yd(n.children[Lt],!1):"",r=[];return Jr(n.children,(o,u)=>{u!==Lt&&r.push(`${u}:${Yd(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function yb(n,e){let t=[];return Jr(n.children,(r,o)=>{o===Lt&&(t=t.concat(e(r,o)))}),Jr(n.children,(r,o)=>{o!==Lt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Lt?[Yd(n.children[Lt],!1)]:[`${o}:${Yd(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Lt]?`${Zd(n)}/${t[0]}`:`${Zd(n)}/(${t.join("//")})`}}function Ig(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Eg(n){return Ig(n).replace(/%3B/gi,";")}function Dg(n){return Ig(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Pf(n){return decodeURIComponent(n)}function Gu(n){return Pf(n.replace(/\+/g,"%20"))}function l_(n){return`${Dg(n.path)}${function c0(n){return Object.keys(n).map(e=>`;${Dg(e)}=${Dg(n[e])}`).join("")}(n.parameters)}`}const tx=/^[^\/()?;=#]+/;function gl(n){const e=n.match(tx);return e?e[0]:""}const wb=/^[^=?&#]+/,d0=/^[^&#]+/;class d_{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new zt([],{}):new zt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Lt]=new zt(e,t)),r}parseSegment(){const e=gl(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new g.vHH(4009,!1);return this.capture(e),new kf(Pf(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=gl(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=gl(this.remaining);o&&(r=o,this.capture(r))}e[Pf(t)]=Pf(r)}parseQueryParam(e){const t=function l0(n){const e=n.match(wb);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function h0(n){const e=n.match(d0);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const o=Gu(t),u=Gu(r);if(e.hasOwnProperty(o)){let l=e[o];Array.isArray(l)||(l=[l],e[o]=l),l.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=gl(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new g.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Lt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Lt]:new zt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new g.vHH(4011,!1)}}function bg(n){return n.segments.length>0?new zt([],{[Lt]:n}):n}function ml(n){const e={};for(const r of Object.keys(n.children)){const u=ml(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Cg(n){if(1===n.numberOfChildren&&n.children[Lt]){const e=n.children[Lt];return new zt(n.segments.concat(e.segments),e.children)}return n}(new zt(n.segments,e))}function zu(n){return n instanceof fl}function Eb(n,e,t,r,o){if(0===t.length)return Xd(e.root,e.root,e.root,r,o);const u=function p_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Tg(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Jr(u.outlets,(v,D)=>{m[D]="string"==typeof v?v.split("/"):v}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===l?(u.split("/").forEach((m,v)=>{0==v&&"."===m||(0==v&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new Tg(t,e,r)}(t);return u.toRoot()?Xd(e.root,e.root,new zt([],{}),r,o):function l(v){const D=function Db(n,e,t,r){if(n.isAbsolute)return new Uf(e.root,!0,0);if(-1===r)return new Uf(t,t===e.root,0);return function g_(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new g.vHH(4005,!1);o=r.segments.length}return new Uf(r,!1,o-u)}(t,r+(Qd(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,v),A=D.processChildren?Di(D.segmentGroup,D.index,u.commands):m_(D.segmentGroup,D.index,u.commands);return Xd(e.root,D.segmentGroup,A,r,o)}(n.snapshot?._lastPathIndex)}function Qd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Vf(n){return"object"==typeof n&&null!=n&&n.outlets}function Xd(n,e,t,r,o){let l,u={};r&&Jr(r,(v,D)=>{u[D]=Array.isArray(v)?v.map(A=>`${A}`):`${v}`}),l=n===e?t:f_(n,e,t);const m=bg(ml(l));return new fl(m,u,o)}function f_(n,e,t){const r={};return Jr(n.children,(o,u)=>{r[u]=o===e?t:f_(o,e,t)}),new zt(n.segments,r)}class Tg{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Qd(r[0]))throw new g.vHH(4003,!1);const o=r.find(Vf);if(o&&o!==_g(r))throw new g.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Uf{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function m_(n,e,t){if(n||(n=new zt([],{})),0===n.segments.length&&n.hasChildren())return Di(n,e,t);const r=function Cb(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const l=n.segments[o],m=t[r];if(Vf(m))break;const v=`${m}`,D=r<t.length-1?t[r+1]:null;if(o>0&&void 0===v)break;if(v&&D&&"object"==typeof D&&void 0===D.outlets){if(!g0(v,D,l))return u;r+=2}else{if(!g0(v,{},l))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new zt(n.segments.slice(0,r.pathIndex),{});return u.children[Lt]=new zt(n.segments.slice(r.pathIndex),n.children),Di(u,0,o)}return r.match&&0===o.length?new zt(n.segments,{}):r.match&&!n.hasChildren()?Sg(n,e,t):r.match?Di(n,0,o):Sg(n,e,t)}function Di(n,e,t){if(0===t.length)return new zt(n.segments,{});{const r=function bb(n){return Vf(n[0])?n[0].outlets:{[Lt]:n}}(t),o={};return Jr(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[l]=m_(n.children[l],e,u))}),Jr(n.children,(u,l)=>{void 0===r[l]&&(o[l]=u)}),new zt(n.segments,o)}}function Sg(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Vf(u)){const v=Tb(u.outlets);return new zt(r,v)}if(0===o&&Qd(t[0])){r.push(new kf(n.segments[e].path,p0(t[0]))),o++;continue}const l=Vf(u)?u.outlets[Lt]:`${u}`,m=o<t.length-1?t[o+1]:null;l&&m&&Qd(m)?(r.push(new kf(l,p0(m))),o+=2):(r.push(new kf(l,{})),o++)}return new zt(r,{})}function Tb(n){const e={};return Jr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Sg(new zt([],{}),0,t))}),e}function p0(n){const e={};return Jr(n,(t,r)=>e[r]=`${t}`),e}function g0(n,e,t){return n==t.path&&so(e,t.parameters)}class Ra{constructor(e,t){this.id=e,this.url=t}}class Ag extends Ra{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class yl extends Ra{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class xg extends Ra{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class m0 extends Ra{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Vt extends Ra{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class y0 extends Ra{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _0 extends Ra{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class v0 extends Ra{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sb extends Ra{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ab{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class w0{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class xb{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class I0{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mb{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rb{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nb{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class y_{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Na(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Na(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=__(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return __(e,this._root).map(t=>t.value)}}function Na(n,e){if(n===e.value)return e;for(const t of e.children){const r=Na(n,t);if(r)return r}return null}function __(n,e){if(n===e.value)return[e];for(const t of e.children){const r=__(n,t);if(r.length)return r.unshift(e),r}return[]}class ao{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function qu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class D0 extends y_{constructor(e,t){super(e),this.snapshot=t,Wu(this,e)}toString(){return this.snapshot.toString()}}function Ob(n,e){const t=function nx(n,e){const l=new v_([],{},{},"",{},Lt,e,null,n.root,-1,{});return new T0("",new ao(l,[]))}(n,e),r=new Os([new kf("",{})]),o=new Os({}),u=new Os({}),l=new Os({}),m=new Os(""),v=new Jd(r,o,l,m,u,Lt,e,t.root);return v.snapshot=t.root,new D0(new ao(v,[]),t)}class Jd{constructor(e,t,r,o,u,l,m,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=m,this.title=this.data?.pipe((0,It.U)(D=>D[ss]))??tt(void 0),this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,It.U)(e=>Kd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,It.U)(e=>Kd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function b0(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function C0(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class v_{constructor(e,t,r,o,u,l,m,v,D,A,M,V){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=m,this.title=this.data?.[ss],this.routeConfig=v,this._urlSegment=D,this._lastPathIndex=A,this._correctedLastPathIndex=V??A,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Kd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Kd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class T0 extends y_{constructor(e,t){super(t),this.url=e,Wu(this,t)}toString(){return S0(this._root)}}function Wu(n,e){e.value._routerState=n,e.children.forEach(t=>Wu(n,t))}function S0(n){const e=n.children.length>0?` { ${n.children.map(S0).join(", ")} } `:"";return`${n.value}${e}`}function Mg(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,so(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),so(e.params,t.params)||n.params.next(t.params),function JA(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!so(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),so(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function eh(n,e){const t=so(n.params,e.params)&&function mb(n,e){return pl(n,e)&&n.every((t,r)=>so(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||eh(n.parent,e.parent))}function th(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function Pb(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return th(n,r,o);return th(n,r)})}(n,e,t);return new ao(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>th(n,m)),l}}const r=function Fb(n){return new Jd(new Os(n.url),new Os(n.params),new Os(n.queryParams),new Os(n.fragment),new Os(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>th(n,u));return new ao(r,o)}}const w_="ngNavigationCancelingError";function A0(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=zu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=x0(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function x0(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[w_]=!0,r.cancellationCode=e,t&&(r.url=t),r}function I_(n){return M0(n)&&zu(n.url)}function M0(n){return n&&n[w_]}class R0{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new nh,this.attachRef=null}}let nh=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new R0,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rh=!1;let N0=(()=>{class n{constructor(t,r,o,u,l){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=o||Lt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,rh);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,rh);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,rh);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new g.vHH(4013,rh);this._activatedRoute=t;const o=this.location,l=t._futureSnapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,v=new E_(t,m,o.injector);if(r&&function Lb(n){return!!n.resolveComponentFactory}(r)){const D=r.resolveComponentFactory(l);this.activated=o.createComponent(D,o.length,v)}else this.activated=o.createComponent(l,{index:o.length,injector:v,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(nh),g.Y36(g.s_b),g.$8M("name"),g.Y36(g.sBO),g.Y36(g.lqb))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class E_{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Jd?this.route:e===nh?this.childContexts:this.parent.get(e,t)}}let O0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[g.jDz],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},dependencies:[N0],encapsulation:2}),n})();function _l(n,e){return n.providers&&!n._injector&&(n._injector=(0,g.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Bf(n){const e=n.children&&n.children.map(Bf),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Lt&&(t.component=O0),t}function os(n){return n.outlet||Lt}function Ng(n,e){const t=n.filter(r=>os(r)===e);return t.push(...n.filter(r=>os(r)!==e)),t}function Og(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class rx{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Mg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=qu(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,o[l],r),delete o[l]}),Jr(o,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const l=r.getContext(o.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=qu(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=qu(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=qu(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Rb(u.value.snapshot))}),e.children.length&&this.forwardEvent(new I0(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Mg(o),o===u)if(o.component){const l=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const l=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),Mg(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=Og(o.snapshot),v=m?.get(g._Vd)??null;l.attachRef=null,l.route=o,l.resolver=v,l.injector=m,l.outlet&&l.outlet.activateWith(o,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class jf{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class vl{constructor(e,t){this.component=e,this.route=t}}function C_(n,e,t){const r=n._root;return kg(r,e?e._root:null,t,[r.value])}function Ku(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,g.Z0I)(n)?e.get(n):n:r}function kg(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=qu(e);return n.children.forEach(l=>{(function jb(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const v=function $b(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!pl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!pl(n.url,e.url)||!so(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!eh(n,e)||!so(n.queryParams,e.queryParams);default:return!eh(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);v?o.canActivateChecks.push(new jf(r)):(u.data=l.data,u._resolvedData=l._resolvedData),kg(n,e,u.component?m?m.children:null:t,r,o),v&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new vl(m.outlet.component,l))}else l&&$f(e,m,o),o.canActivateChecks.push(new jf(r)),kg(n,null,u.component?m?m.children:null:t,r,o)})(l,u[l.value.outlet],t,r.concat([l.value]),o),delete u[l.value.outlet]}),Jr(u,(l,m)=>$f(l,t.getContext(m),o)),o}function $f(n,e,t){const r=qu(n),o=n.value;Jr(r,(u,l)=>{$f(u,o.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new vl(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function Hf(n){return"function"==typeof n}function V0(n){return n instanceof yg||"EmptyError"===n?.name}const A_=Symbol("INITIAL_VALUE");function Gf(){return nn(n=>Qw(n.map(e=>e.pipe(dl(1),Rf(A_)))).pipe((0,It.U)(e=>{for(const t of e)if(!0!==t){if(t===A_)return A_;if(!1===t||t instanceof fl)return t}return!0}),is(e=>e!==A_),dl(1)))}function U0(n){return(0,ub.z)((0,li.b)(e=>{if(zu(e))throw A0(0,e)}),(0,It.U)(e=>!0===e))}const zf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function M_(n,e,t,r,o){const u=qf(n,e,t);return u.matched?function B0(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?tt(o.map(l=>{const m=Ku(l,n);return Ma(function L0(n){return n&&Hf(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(Gf(),U0()):tt(!0)}(r=_l(e,r),e,t).pipe((0,It.U)(l=>!0===l?u:{...zf})):tt(u)}function qf(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...zf}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||XA)(t,n,e);if(!o)return{...zf};const u={};Jr(o.posParams,(m,v)=>{u[v]=m.path});const l=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:l,positionalParamSegments:o.posParams??{}}}function Pg(n,e,t,r,o="corrected"){if(t.length>0&&function Gb(n,e,t){return t.some(r=>Wf(n,e,r)&&os(r)!==Lt)}(n,t,r)){const l=new zt(e,function j0(n,e,t,r){const o={};o[Lt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&os(u)!==Lt){const l=new zt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,o[os(u)]=l}return o}(n,e,r,new zt(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function zb(n,e,t){return t.some(r=>Wf(n,e,r))}(n,t,r)){const l=new zt(n.segments,function Yu(n,e,t,r,o,u){const l={};for(const m of r)if(Wf(n,t,m)&&!o[os(m)]){const v=new zt([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===u?n.segments.length:e.length,l[os(m)]=v}return{...o,...l}}(n,e,t,r,n.children,o));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const u=new zt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Wf(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function $0(n,e,t,r){return!!(os(n)===r||r!==Lt&&Wf(e,t,n))&&("**"===n.path||qf(e,n,t).matched)}function H0(n,e,t){return 0===e.length&&!n.children[t]}const wl=!1;class ka{constructor(e){this.segmentGroup=e||null}}class Fg{constructor(e){this.urlTree=e}}function Fo(n){return Mf(new ka(n))}function Lg(n){return Mf(new Fg(n))}class R_{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=Pg(this.urlTree.root,[],[],this.config).segmentGroup,t=new zt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Lt).pipe((0,It.U)(u=>this.createUrlTree(ml(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(xa(u=>{if(u instanceof Fg)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof ka?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Lt).pipe((0,It.U)(o=>this.createUrlTree(ml(o),e.queryParams,e.fragment))).pipe(xa(o=>{throw o instanceof ka?this.noMatchError(o):o}))}noMatchError(e){return new g.vHH(4002,wl)}createUrlTree(e,t,r){const o=bg(e);return new fl(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,It.U)(u=>new zt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,Qt.D)(o).pipe(Hu(u=>{const l=r.children[u],m=Ng(t,u);return this.expandSegmentGroup(e,m,l,u).pipe((0,It.U)(v=>({segment:v,outlet:u})))}),Wd((u,l)=>(u[l.outlet]=l.segment,u),{}),r0())}expandSegment(e,t,r,o,u,l){return(0,Qt.D)(r).pipe(Hu(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,l).pipe(xa(D=>{if(D instanceof ka)return tt(null);throw D}))),Aa(m=>!!m),xa((m,v)=>{if(V0(m))return H0(t,o,u)?tt(new zt([],{})):Fo(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,l,m){return $0(o,t,u,l)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,l):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l):Fo(t):Fo(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Lg(u):this.lineralizeSegments(r,u).pipe((0,hn.z)(l=>{const m=new zt(l,{});return this.expandSegment(e,m,t,l,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){const{matched:m,consumedSegments:v,remainingSegments:D,positionalParamSegments:A}=qf(t,o,u);if(!m)return Fo(t);const M=this.applyRedirectCommands(v,o.redirectTo,A);return o.redirectTo.startsWith("/")?Lg(M):this.lineralizeSegments(o,M).pipe((0,hn.z)(V=>this.expandSegment(e,t,r,V.concat(D),l,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=_l(r,e),r.loadChildren?(r._loadedRoutes?tt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,It.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new zt(o,{})))):tt(new zt(o,{}))):M_(t,r,o,e).pipe(nn(({matched:l,consumedSegments:m,remainingSegments:v})=>l?this.getChildConfig(e=r._injector??e,r,o).pipe((0,hn.z)(A=>{const M=A.injector??e,V=A.routes,{segmentGroup:W,slicedSegments:ee}=Pg(t,m,v,V),xe=new zt(W.segments,W.children);if(0===ee.length&&xe.hasChildren())return this.expandChildren(M,V,xe).pipe((0,It.U)(dt=>new zt(m,dt)));if(0===V.length&&0===ee.length)return tt(new zt(m,{}));const Ee=os(r)===u;return this.expandSegment(M,xe,V,ee,Ee?Lt:u,!0).pipe((0,It.U)(vt=>new zt(m.concat(vt.segments),vt.children)))})):Fo(t)))}getChildConfig(e,t,r){return t.children?tt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?tt({routes:t._loadedRoutes,injector:t._loadedInjector}):function x_(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?tt(!0):tt(o.map(l=>{const m=Ku(l,n);return Ma(function ix(n){return n&&Hf(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(Gf(),U0())}(e,t,r).pipe((0,hn.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,li.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function G0(n){return Mf(x0(wl,3))}())):tt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return tt(r);if(o.numberOfChildren>1||!o.children[Lt])return Mf(new g.vHH(4e3,wl));o=o.children[Lt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new fl(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Jr(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let l={};return Jr(t.children,(m,v)=>{l[v]=this.createSegmentGroup(e,m,r,o)}),new zt(u,l)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new g.vHH(4001,wl);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class O_{}class Wb{constructor(e,t,r,o,u,l,m,v){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=m,this.urlSerializer=v}recognize(){const e=Pg(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Lt).pipe((0,It.U)(t=>{if(null===t)return null;const r=new v_([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Lt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new ao(r,t),u=new T0(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=b0(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,Qt.D)(Object.keys(r.children)).pipe(Hu(o=>{const u=r.children[o],l=Ng(t,o);return this.processSegmentGroup(e,l,u,o)}),Wd((o,u)=>o&&u?(o.push(...u),o):null),function db(n,e=!1){return(0,Fr.e)((t,r)=>{let o=0;t.subscribe((0,pr.x)(r,u=>{const l=n(u,o++);(l||e)&&r.next(u),!l&&r.complete()}))})}(o=>null!==o),$u(null),r0(),(0,It.U)(o=>{if(null===o)return null;const u=k_(o);return function q0(n){n.sort((e,t)=>e.value.outlet===Lt?-1:t.value.outlet===Lt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,Qt.D)(t).pipe(Hu(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,o,u)),Aa(l=>!!l),xa(l=>{if(V0(l))return H0(r,o,u)?tt([]):tt(null);throw l}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!$0(t,r,o,u))return tt(null);let l;if("**"===t.path){const m=o.length>0?_g(o).parameters:{},v=P_(r)+o.length;l=tt({snapshot:new v_(o,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Yb(t),os(t),t.component??t._loadedComponent??null,t,Li(r),v,Z0(t),v),consumedSegments:[],remainingSegments:[]})}else l=M_(r,t,o,e).pipe((0,It.U)(({matched:m,consumedSegments:v,remainingSegments:D,parameters:A})=>{if(!m)return null;const M=P_(r)+v.length;return{snapshot:new v_(v,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Yb(t),os(t),t.component??t._loadedComponent??null,t,Li(r),M,Z0(t),M),consumedSegments:v,remainingSegments:D}}));return l.pipe(nn(m=>{if(null===m)return tt(null);const{snapshot:v,consumedSegments:D,remainingSegments:A}=m;e=t._injector??e;const M=t._loadedInjector??e,V=function Kb(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:W,slicedSegments:ee}=Pg(r,D,A,V.filter(Ee=>void 0===Ee.redirectTo),this.relativeLinkResolution);if(0===ee.length&&W.hasChildren())return this.processChildren(M,V,W).pipe((0,It.U)(Ee=>null===Ee?null:[new ao(v,Ee)]));if(0===V.length&&0===ee.length)return tt([new ao(v,[])]);const xe=os(t)===u;return this.processSegment(M,V,W,ee,xe?Lt:u).pipe((0,It.U)(Ee=>null===Ee?null:[new ao(v,Ee)]))}))}}function W0(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function k_(n){const e=[],t=new Set;for(const r of n){if(!W0(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=k_(r.children);e.push(new ao(r.value,o))}return e.filter(r=>!t.has(r))}function Li(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function P_(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Yb(n){return n.data||{}}function Z0(n){return n.resolve||{}}function X0(n){return"string"==typeof n.title||null===n.title}function Ug(n){return nn(e=>{const t=n(e);return t?(0,Qt.D)(t).pipe((0,It.U)(()=>e)):tt(e)})}let J0=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===Lt);return r}getResolvedTitleForRoute(t){return t.data[ss]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(eI)},providedIn:"root"}),n})(),eI=(()=>{class n extends J0{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Yi))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class tI{}class Lo extends class tC{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Bg=new g.OlP("",{providedIn:"root",factory:()=>({})}),rI=new g.OlP("ROUTES");let jg=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return tt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ma(t.loadComponent()).pipe((0,li.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),s_(()=>{this.componentLoaders.delete(t)})),o=new n0(r,()=>new Ns.x).pipe(n_());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return tt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,It.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let v,D,A=!1;Array.isArray(m)?D=m:(v=m.create(t).injector,D=oo(v.get(rI,[],g.XFs.Self|g.XFs.Optional)));return{routes:D.map(Bf),injector:v}}),s_(()=>{this.childrenLoaders.delete(r)})),l=new n0(u,()=>new Ns.x).pipe(n_());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Ma(t()).pipe((0,hn.z)(r=>r instanceof g.YKP||Array.isArray(r)?tt(r):(0,Qt.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3),g.LFG(g.Sil))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class nC{}class rC{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function V_(n){throw n}function iC(n,e,t){return e.parse("/")}const sC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Hg={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Zf(){const n=(0,g.f3M)(a0),e=(0,g.f3M)(nh),t=(0,g.f3M)(Ae),r=(0,g.f3M)(g.zs3),o=(0,g.f3M)(g.Sil),u=(0,g.f3M)(rI,{optional:!0})??[],l=(0,g.f3M)(Bg,{optional:!0})??{},m=(0,g.f3M)(eI),v=(0,g.f3M)(J0,{optional:!0}),D=(0,g.f3M)(nC,{optional:!0}),A=(0,g.f3M)(tI,{optional:!0}),M=new ei(null,n,e,t,r,o,oo(u));return D&&(M.urlHandlingStrategy=D),A&&(M.routeReuseStrategy=A),M.titleStrategy=v??m,function U_(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,M),M}let ei=(()=>{class n{constructor(t,r,o,u,l,m,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ns.x,this.errorHandler=V_,this.malformedUriErrorHandler=iC,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>tt(void 0),this.urlHandlingStrategy=new rC,this.routeReuseStrategy=new Lo,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(jg),this.configLoader.onLoadEndListener=V=>this.triggerEvent(new w0(V)),this.configLoader.onLoadStartListener=V=>this.triggerEvent(new Ab(V)),this.ngModule=l.get(g.h0i),this.console=l.get(g.c2e);const M=l.get(g.R0b);this.isNgZoneEnabled=M instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function Nf(){return new fl(new zt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ob(this.currentUrlTree,this.rootComponentType),this.transitions=new Os({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(is(o=>0!==o.id),(0,It.U)(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),nn(o=>{let u=!1,l=!1;return tt(o).pipe((0,li.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),nn(m=>{const v=this.browserUrlTree.toString(),D=!this.navigated||m.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||D)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return oC(m.source)&&(this.browserUrlTree=m.extractedUrl),tt(m).pipe(nn(M=>{const V=this.transitions.getValue();return r.next(new Ag(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),V!==this.transitions.getValue()?ll.E:Promise.resolve(M)}),function N_(n,e,t,r){return nn(o=>function z0(n,e,t,r,o){return new R_(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,It.U)(u=>({...o,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,li.b)(M=>{this.currentNavigation={...this.currentNavigation,finalUrl:M.urlAfterRedirects},o.urlAfterRedirects=M.urlAfterRedirects}),function F_(n,e,t,r,o,u){return(0,hn.z)(l=>function px(n,e,t,r,o,u,l="emptyOnly",m="legacy"){return new Wb(n,e,t,r,o,l,m,u).recognize().pipe(nn(v=>null===v?function qb(n){return new Dr.y(e=>e.error(n))}(new O_):tt(v)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,o,u).pipe((0,It.U)(m=>({...l,targetSnapshot:m}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,li.b)(M=>{if(o.targetSnapshot=M.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const W=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(W,M)}this.browserUrlTree=M.urlAfterRedirects}const V=new Vt(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(V)}));if(D&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:V,extractedUrl:W,source:ee,restoredState:xe,extras:Ee}=m,gt=new Ag(V,this.serializeUrl(W),ee,xe);r.next(gt);const vt=Ob(W,this.rootComponentType).snapshot;return tt(o={...m,targetSnapshot:vt,urlAfterRedirects:W,extras:{...Ee,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=m.rawUrl,m.resolve(null),ll.E}),(0,li.b)(m=>{const v=new y0(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),(0,It.U)(m=>o={...m,guards:C_(m.targetSnapshot,m.currentSnapshot,this.rootContexts)}),function ax(n,e){return(0,hn.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?tt({...t,guardsResult:!0}):function ux(n,e,t,r){return(0,Qt.D)(n).pipe((0,hn.z)(o=>function Zu(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?tt(u.map(m=>{const v=Og(e)??o,D=Ku(m,v);return Ma(function F0(n){return n&&Hf(n.canDeactivate)}(D)?D.canDeactivate(n,e,t,r):v.runInContext(()=>D(n,e,t,r))).pipe(Aa())})).pipe(Gf()):tt(!0)}(o.component,o.route,t,e,r)),Aa(o=>!0!==o,!0))}(l,r,o,n).pipe((0,hn.z)(m=>m&&function P0(n){return"boolean"==typeof n}(m)?function cx(n,e,t,r){return(0,Qt.D)(e).pipe(Hu(o=>t_(function dx(n,e){return null!==n&&e&&e(new xb(n)),tt(!0)}(o.route.parent,r),function lx(n,e){return null!==n&&e&&e(new Mb(n)),tt(!0)}(o.route,r),function fx(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function T_(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>e0(()=>tt(l.guards.map(v=>{const D=Og(l.node)??t,A=Ku(v,D);return Ma(function sx(n){return n&&Hf(n.canActivateChild)}(A)?A.canActivateChild(r,n):D.runInContext(()=>A(r,n))).pipe(Aa())})).pipe(Gf())));return tt(u).pipe(Gf())}(n,o.path,t),function hx(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return tt(!0);const o=r.map(u=>e0(()=>{const l=Og(e)??t,m=Ku(u,l);return Ma(function Hb(n){return n&&Hf(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(Aa())}));return tt(o).pipe(Gf())}(n,o.route,t))),Aa(o=>!0!==o,!0))}(r,u,n,e):tt(m)),(0,It.U)(m=>({...t,guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,li.b)(m=>{if(o.guardsResult=m.guardsResult,zu(m.guardsResult))throw A0(0,m.guardsResult);const v=new _0(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(v)}),is(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",3),!1)),Ug(m=>{if(m.guards.canActivateChecks.length)return tt(m).pipe((0,li.b)(v=>{const D=new v0(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(D)}),nn(v=>{let D=!1;return tt(v).pipe(function Y0(n,e){return(0,hn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return tt(t);let u=0;return(0,Qt.D)(o).pipe(Hu(l=>function Qb(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!X0(o)&&(u[ss]=o.title),function Xb(n,e,t,r){const o=function Jb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return tt({});const u={};return(0,Qt.D)(o).pipe((0,hn.z)(l=>function Q0(n,e,t,r){const o=Og(e)??r,u=Ku(n,o);return Ma(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(Aa(),(0,li.b)(m=>{u[l]=m}))),i_(1),function hb(n){return(0,It.U)(()=>n)}(u),xa(l=>V0(l)?ll.E:Mf(l)))}(u,n,e,r).pipe((0,It.U)(l=>(n._resolvedData=l,n.data=b0(n,t).resolve,o&&X0(o)&&(n.data[ss]=o.title),null)))}(l.route,r,n,e)),(0,li.b)(()=>u++),i_(1),(0,hn.z)(l=>u===o.length?tt(t):ll.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,li.b)({next:()=>D=!0,complete:()=>{D||(this.restoreHistory(v),this.cancelNavigationTransition(v,"",2))}}))}),(0,li.b)(v=>{const D=new Sb(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(D)}))}),Ug(m=>{const v=D=>{const A=[];D.routeConfig?.loadComponent&&!D.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(D.routeConfig).pipe((0,li.b)(M=>{D.component=M}),(0,It.U)(()=>{})));for(const M of D.children)A.push(...v(M));return A};return Qw(v(m.targetSnapshot.root)).pipe($u(),dl(1))}),Ug(()=>this.afterPreactivation()),(0,It.U)(m=>{const v=function kb(n,e,t){const r=th(n,e._root,t?t._root:void 0);return new D0(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return o={...m,targetRouterState:v}}),(0,li.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,It.U)(r=>(new rx(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,li.b)({next(){u=!0},complete(){u=!0}}),s_(()=>{u||l||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),xa(m=>{if(l=!0,M0(m)){I_(m)||(this.navigated=!0,this.restoreHistory(o,!0));const v=new xg(o.id,this.serializeUrl(o.extractedUrl),m.message,m.cancellationCode);if(r.next(v),I_(m)){const D=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),A={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||oC(o.source)};this.scheduleNavigation(D,"imperative",null,A,{resolve:o.resolve,reject:o.reject,promise:o.promise})}else o.resolve(!1)}else{this.restoreHistory(o,!0);const v=new m0(o.id,this.serializeUrl(o.extractedUrl),m,o.targetSnapshot??void 0);r.next(v);try{o.resolve(this.errorHandler(m))}catch(D){o.reject(D)}}return ll.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const o={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const m={...u};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(o.state=m)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,u,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Bf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:v}=r,D=o||this.routerState.root,A=v?this.currentUrlTree.fragment:l;let M=null;switch(m){case"merge":M={...this.currentUrlTree.queryParams,...u};break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),Eb(D,this.currentUrlTree,t,M,A??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=zu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function B_(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new g.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...sC}:!1===r?{...Hg}:r,zu(t))return vg(this.currentUrlTree,t,o);const u=this.parseUrl(t);return vg(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new yl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,l){if(this.disposed)return Promise.resolve(!1);let m,v,D;l?(m=l.resolve,v=l.reject,D=l.promise):D=new Promise((V,W)=>{m=V,v=W});const A=++this.navigationId;let M;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),M=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):M=0,this.setTransition({id:A,targetPageId:M,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:m,reject:v,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(V=>Promise.reject(V))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===o?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,o){const u=new xg(t.id,this.serializeUrl(t.extractedUrl),r,o);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:function(){return Zf()},providedIn:"root"}),n})();function oC(n){return"imperative"!==n}class qg{}let Wg=(()=>{class n{constructor(t,r,o,u,l){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(is(t=>t instanceof yl),Hu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,g.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(l,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,Qt.D)(o).pipe((0,qd.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):tt(null);const u=o.pipe((0,hn.z)(l=>null===l?tt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Qt.D)([u,l]).pipe((0,qd.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ei),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(qg),g.LFG(jg))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Il=new g.OlP("");let oI=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ag?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof yl&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Nb&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Nb(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function sh(n,e){return{\u0275kind:n,\u0275providers:e}}function El(n){return[{provide:rI,multi:!0,useValue:n}]}function uC(){const n=(0,g.f3M)(g.zs3);return e=>{const t=n.get(g.z2F);if(e!==t.components[0])return;const r=n.get(ei),o=n.get(uI);1===n.get(cI)&&r.initialNavigation(),n.get($_,null,g.XFs.Optional)?.setUpPreloading(),n.get(Il,null,g.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.next(),o.complete()}}const uI=new g.OlP("",{factory:()=>new Ns.x}),cI=new g.OlP("",{providedIn:"root",factory:()=>1});const $_=new g.OlP("");function H_(n){return sh(0,[{provide:$_,useExisting:Wg},{provide:qg,useExisting:n}])}const lI=new g.OlP("ROUTER_FORROOT_GUARD"),hC=[Ae,{provide:a0,useClass:c_},{provide:ei,useFactory:Zf},nh,{provide:Jd,useFactory:function aI(n){return n.routerState.root},deps:[ei]},jg];function fC(){return new g.PXZ("Router",ei)}let dI=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[hC,[],El(t),{provide:lI,useFactory:_x,deps:[[ei,new g.FiY,new g.tp0]]},{provide:Bg,useValue:r||{}},r?.useHash?{provide:me,useClass:rt}:{provide:me,useClass:Ye},{provide:Il,useFactory:()=>{const n=(0,g.f3M)(ei),e=(0,g.f3M)(Ja),t=(0,g.f3M)(Bg);return t.scrollOffset&&e.setOffset(t.scrollOffset),new oI(n,e,t)}},r?.preloadingStrategy?H_(r.preloadingStrategy).\u0275providers:[],{provide:g.PXZ,multi:!0,useFactory:fC},r?.initialNavigation?Yf(r):[],[{provide:hI,useFactory:uC},{provide:g.tb,multi:!0,useExisting:hI}]]}}static forChild(t){return{ngModule:n,providers:[El(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(lI,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[O0]}),n})();function _x(n){return"guarded"}function Yf(n){return["disabled"===n.initialNavigation?sh(3,[{provide:g.ip1,multi:!0,useFactory:()=>{const e=(0,g.f3M)(ei);return()=>{e.setUpLocationChangeListener()}}},{provide:cI,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?sh(2,[{provide:cI,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:e=>{const t=e.get(B,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const l=e.get(ei),m=e.get(uI);(function o(u){e.get(ei).events.pipe(is(m=>m instanceof yl||m instanceof xg||m instanceof m0),(0,It.U)(m=>m instanceof yl||m instanceof xg&&(0===m.code||1===m.code)&&null),is(m=>null!==m),dl(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),l.afterPreactivation=()=>(u(!0),r||m.closed?tt(void 0):m),l.initialNavigation()}))}}]).\u0275providers:[]]}const hI=new g.OlP("");class bl{get electron(){return this._electron?this._electron:window&&window.require?(this._electron=window.require("electron"),this._electron):null}get isElectronApp(){return!!window.navigator.userAgent.match(/Electron/)}get isMacOS(){return this.isElectronApp&&"darwin"===process.platform}get isWindows(){return this.isElectronApp&&"win32"===process.platform}get isLinux(){return this.isElectronApp&&"linux"===process.platform}get isX86(){return this.isElectronApp&&"ia32"===process.arch}get isX64(){return this.isElectronApp&&"x64"===process.arch}get isArm(){return this.isElectronApp&&"arm"===process.arch}get desktopCapturer(){return this.electron?this.electron.desktopCapturer:null}get ipcRenderer(){return this.electron?this.electron.ipcRenderer:null}get remote(){return this.electron?this.electron.remote:null}get webFrame(){return this.electron?this.electron.webFrame:null}get clipboard(){return this.electron?this.electron.clipboard:null}get crashReporter(){return this.electron?this.electron.crashReporter:null}get process(){return this.remote?this.remote.process:null}get nativeImage(){return this.electron?this.electron.nativeImage:null}get screen(){return this.electron?this.remote.screen:null}get shell(){return this.electron?this.electron.shell:null}}let di=(()=>{class n extends bl{constructor(){super()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Cl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[{provide:bl,useClass:di}]}),n})(),Zg=(()=>{class n{constructor(){if(window.require)try{this.ipc=window.require("electron").ipcRenderer}catch(t){throw t}else console.warn("Electron IPC was not loaded")}on(t,r){!this.ipc||this.ipc.on(t,r)}once(t,r){!this.ipc||this.ipc.once(t,r)}send(t,...r){!this.ipc||this.ipc.send(t,...r)}removeAllListener(t){!this.ipc||this.ipc.removeAllListeners(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var as=P(4986),Sn=P(5813);function Xu(){return(0,Fr.e)((n,e)=>{let t,r=!1;n.subscribe((0,pr.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function uh(n,e){return n===e}var st,mr=P(2011),Tl=(P(1277),P(3942)),pe=P(5861),hi=P(9681),uo=P(4859),Pa=P(1877),Ut=P(2090),pI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Uo={},Yg=Yg||{},Rt=pI||self;function Xf(){}function Jf(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function ep(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Qg="closure_uid_"+(1e9*Math.random()>>>0),_C=0;function vC(n,e,t){return n.call.apply(n.bind,arguments)}function G_(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Lr(n,e,t){return(Lr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?vC:G_).apply(null,arguments)}function Xg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function yr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,o,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[o].apply(r,l)}}function co(){this.s=this.s,this.o=this.o}co.prototype.s=!1,co.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function yC(n){Object.prototype.hasOwnProperty.call(n,Qg)&&n[Qg]||(n[Qg]=++_C)}(this)},co.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const gI=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function tp(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Jg(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Jf(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let l=0;l<u;l++)n[o+l]=r[l]}else n.push(r)}}function ti(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ti.prototype.h=function(){this.defaultPrevented=!0};var wC=function(){if(!Rt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Rt.addEventListener("test",Xf,e),Rt.removeEventListener("test",Xf,e)}catch{}return n}();function ch(n){return/^[\s\xa0]*$/.test(n)}var q_=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function em(n,e){return n<e?-1:n>e?1:0}function lh(){var n=Rt.navigator;return n&&(n=n.userAgent)?n:""}function lo(n){return-1!=lh().indexOf(n)}function W_(n){return W_[" "](n),n}W_[" "]=Xf;var dh,n,yI=lo("Opera"),Sl=lo("Trident")||lo("MSIE"),K_=lo("Edge"),Z_=K_||Sl,_I=lo("Gecko")&&!(-1!=lh().toLowerCase().indexOf("webkit")&&!lo("Edge"))&&!(lo("Trident")||lo("MSIE"))&&!lo("Edge"),IC=-1!=lh().toLowerCase().indexOf("webkit")&&!lo("Edge");function Y_(){var n=Rt.document;return n?n.documentMode:void 0}e:{var tm="",nm=(n=lh(),_I?/rv:([^\);]+)(\)|;)/.exec(n):K_?/Edge\/([\d\.]+)/.exec(n):Sl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):IC?/WebKit\/(\S+)/.exec(n):yI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(nm&&(tm=nm?nm[1]:""),Sl){var rm=Y_();if(null!=rm&&rm>parseFloat(tm)){dh=String(rm);break e}}dh=tm}var vI={};var II=Rt.document&&Sl&&(Y_()||parseInt(dh,10))||void 0;function sm(n,e){if(ti.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(_I){e:{try{W_(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:EC[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&sm.X.h.call(this)}}yr(sm,ti);var EC={2:"touch",3:"pen",4:"mouse"};sm.prototype.h=function(){sm.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var np="closure_listenable_"+(1e6*Math.random()|0),EI=0;function DC(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++EI,this.ba=this.ea=!1}function er(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function om(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function DI(n){const e={};for(const t in n)e[t]=n[t];return e}const bI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X_(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<bI.length;u++)t=bI[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function am(n){this.src=n,this.g={},this.h=0}function um(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=gI(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(er(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function cm(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return o}return-1}am.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=cm(n,e,r,o);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new DC(e,this.src,u,!!r,o)).ea=t,n.push(e)),e};var Ju="closure_lm_"+(1e6*Math.random()|0),J_={};function CI(n,e,t,r,o){if(r&&r.once)return tv(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)CI(n,e[u],t,r,o);return null}return t=ks(t),n&&n[np]?n.N(e,t,ep(r)?!!r.capture:!!r,o):ev(n,e,t,!1,r,o)}function ev(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var l=ep(o)?!!o.capture:!!o,m=nv(n);if(m||(n[Ju]=m=new am(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function bC(){const e=Bo;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)wC||(o=l),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(dm(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function tv(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)tv(n,e[u],t,r,o);return null}return t=ks(t),n&&n[np]?n.O(e,t,ep(r)?!!r.capture:!!r,o):ev(n,e,t,!0,r,o)}function CC(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)CC(n,e[u],t,r,o);else r=ep(r)?!!r.capture:!!r,t=ks(t),n&&n[np]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=cm(u=n.g[e],t,r,o))&&(er(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=nv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=cm(e,t,r,o)),(t=-1<n?e[n]:null)&&lm(t))}function lm(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[np])um(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(dm(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=nv(e))?(um(t,n),0==t.h&&(t.src=null,e[Ju]=null)):er(n)}}}function dm(n){return n in J_?J_[n]:J_[n]="on"+n}function Bo(n,e){if(n.ba)n=!0;else{e=new sm(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&lm(n),n=t.call(r,e)}return n}function nv(n){return(n=n[Ju])instanceof am?n:null}var rv="__closure_events_fn_"+(1e9*Math.random()>>>0);function ks(n){return"function"==typeof n?n:(n[rv]||(n[rv]=function(e){return n.handleEvent(e)}),n[rv])}function vn(){co.call(this),this.i=new am(this),this.P=this,this.I=null}function Dn(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ti(e,n);else if(e instanceof ti)e.target=e.target||n;else{var o=e;X_(e=new ti(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];o=rp(l,r,!0,e)&&o}if(o=rp(l=e.g=n,r,!0,e)&&o,o=rp(l,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=rp(l=e.g=t[u],r,!1,e)&&o}function rp(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.ba&&l.capture==t){var m=l.listener,v=l.ha||l.src;l.ea&&um(n.i,l),o=!1!==m.call(v,r)&&o}}return o&&!r.defaultPrevented}yr(vn,co),vn.prototype[np]=!0,vn.prototype.removeEventListener=function(n,e,t,r){CC(this,n,e,t,r)},vn.prototype.M=function(){if(vn.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)er(t[r]);delete n.g[e],n.h--}}this.I=null},vn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},vn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var hm=Rt.JSON.stringify;function TC(){var n=av;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var sv,TI=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new AC,n=>n.reset());class AC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function iv(n){Rt.setTimeout(()=>{throw n},0)}function hh(n,e){sv||function SI(){var n=Rt.Promise.resolve(void 0);sv=function(){n.then(AI)}}(),ov||(sv(),ov=!0),av.add(n,e)}var ov=!1,av=new class SC{constructor(){this.h=this.g=null}add(e,t){const r=TI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function AI(){for(var n;n=TC();){try{n.h.call(n.g)}catch(t){iv(t)}var e=TI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}ov=!1}function Al(n,e){vn.call(this),this.h=n||1,this.g=e||Rt,this.j=Lr(this.lb,this),this.l=Date.now()}function uv(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function fm(n,e,t){if("function"==typeof n)t&&(n=Lr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Lr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Rt.setTimeout(n,e||0)}function cv(n){n.g=fm(()=>{n.g=null,n.i&&(n.i=!1,cv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}yr(Al,vn),(st=Al.prototype).ca=!1,st.R=null,st.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Dn(this,"tick"),this.ca&&(uv(this),this.start()))}},st.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},st.M=function(){Al.X.M.call(this),uv(this),delete this.g};class xI extends co{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:cv(this)}M(){super.M(),this.g&&(Rt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ec(n){co.call(this),this.h=n,this.g={}}yr(ec,co);var lv=[];function dv(n,e,t,r){Array.isArray(t)||(t&&(lv[0]=t.toString()),t=lv);for(var o=0;o<t.length;o++){var u=CI(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function hv(n){om(n.g,function(e,t){this.g.hasOwnProperty(t)&&lm(e)},n),n.g={}}function ip(){this.g=!0}function xl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function xC(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<o.length;l++)o[l]=""}}}return hm(t)}catch{return e}}(n,t)+(r?" "+r:"")})}ec.prototype.M=function(){ec.X.M.call(this),hv(this)},ec.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ip.prototype.Aa=function(){this.g=!1},ip.prototype.info=function(){};var Ml={},OI=null;function pm(){return OI=OI||new vn}function kI(n){ti.call(this,Ml.Pa,n)}function sp(n){const e=pm();Dn(e,new kI(e))}function PI(n,e){ti.call(this,Ml.STAT_EVENT,n),this.stat=e}function bi(n){const e=pm();Dn(e,new PI(e,n))}function FI(n,e){ti.call(this,Ml.Qa,n),this.size=e}function op(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Rt.setTimeout(function(){n()},e)}Ml.Pa="serverreachability",yr(kI,ti),Ml.STAT_EVENT="statevent",yr(PI,ti),Ml.Qa="timingevent",yr(FI,ti);var gm={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},LI={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function fv(){}function UI(){}fv.prototype.h=null;var mm,ap={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function pv(){ti.call(this,"d")}function gv(){ti.call(this,"c")}function up(){}function fh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new ec(this),this.O=BI,this.T=new Al(n=Z_?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new mv}function mv(){this.i=null,this.g="",this.h=!1}yr(pv,ti),yr(gv,ti),yr(up,fv),up.prototype.g=function(){return new XMLHttpRequest},up.prototype.i=function(){return{}},mm=new up;var BI=45e3,ym={},cp={};function _m(n,e,t){n.K=1,n.v=Pn(Va(e)),n.s=t,n.P=!0,yv(n,null)}function yv(n,e){n.F=Date.now(),lp(n),n.A=Va(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),XI(t.i,"t",r),n.C=0,t=n.l.H,n.h=new mv,n.g=vE(n.l,t?e:null,!n.s),0<n.N&&(n.L=new xI(Lr(n.La,n,n.g),n.N)),dv(n.S,n.g,"readystatechange",n.ib),e=n.H?DI(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),sp(),function MI(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),v=0;v<m.length;v++){var D=m[v].split("=");if(1<D.length){var A=D[0];D=D[1];var M=A.split("_");l=2<=M.length&&"type"==M[1]?l+(A+"=")+D+"&":l+(A+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function _v(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function vv(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=Rl(n,t),o==cp){4==e&&(n.o=4,bi(14),r=!1),xl(n.j,n.m,null,"[Incomplete Response]");break}if(o==ym){n.o=4,bi(15),xl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}xl(n.j,n.m,o,null),$I(n,o)}_v(n)&&o!=cp&&o!=ym&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,bi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Av(e),e.K=!0,bi(11))):(xl(n.j,n.m,t,"[Invalid Chunked Response]"),La(n),vm(n))}function Rl(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?cp:(t=Number(e.substring(t,r)),isNaN(t)?ym:(r+=1)+t>e.length?cp:(e=e.substr(r,t),n.C=r+t,e))}function lp(n){n.V=Date.now()+n.O,jI(n,n.O)}function jI(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=op(Lr(n.gb,n),e)}function Fa(n){n.B&&(Rt.clearTimeout(n.B),n.B=null)}function vm(n){0==n.l.G||n.I||Om(n.l,n)}function La(n){Fa(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,uv(n.T),hv(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function $I(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Ol(t.h,n)))if(!n.J&&Ol(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Nm(t),xm(t)}Rm(t),bi(18)}}else t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=op(Lr(t.cb,t),6e3));if(1>=eE(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else nc(t,11)}else if((n.J||t.g==n)&&Nm(t),!ch(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let D=o[e];if(t.T=D[0],D=D[1],2==t.G)if("c"==D[0]){t.I=D[1],t.ka=D[2];const A=D[3];null!=A&&(t.ma=A,t.j.info("VER="+t.ma));const M=D[4];null!=M&&(t.Ca=M,t.j.info("SVER="+t.Ca));const V=D[5];null!=V&&"number"==typeof V&&0<V&&(t.J=r=1.5*V,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const W=n.g;if(W){const ee=W.g?W.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ee){var u=r.h;u.g||-1==ee.indexOf("spdy")&&-1==ee.indexOf("quic")&&-1==ee.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(kl(u,u.h),u.h=null))}if(r.D){const xe=W.g?W.g.getResponseHeader("X-HTTP-Session-Id"):null;xe&&(r.za=xe,bn(r.F,r.D,xe))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=_E(r,r.H?r.ka:null,r.V),l.J){tE(r.h,l);var m=l,v=r.J;v&&m.setTimeout(v),m.B&&(Fa(m),lp(m)),r.g=l}else Sv(r);0<t.i.length&&Mm(t)}else"stop"!=D[0]&&"close"!=D[0]||nc(t,7);else 3==t.G&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?nc(t,7):Am(t):"noop"!=D[0]&&t.l&&t.l.wa(D),t.A=0)}sp()}catch{}}function MC(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Jf(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function GI(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Jf(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function HI(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Jf(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(st=fh.prototype).setTimeout=function(n){this.O=n},st.ib=function(n){n=n.target;const e=this.L;e&&3==Ba(n)?e.l():this.La(n)},st.La=function(n){try{if(n==this.g)e:{const A=Ba(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>A)&&(3!=A||Z_||this.g&&(this.h.h||this.g.fa()||bv(this.g)))){this.I||4!=A||7==e||sp(),Fa(this);var t=this.g.aa();this.Y=t;t:if(_v(this)){var r=bv(this.g);n="";var o=r.length,u=4==Ba(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){La(this),vm(this);var l="";break t}this.h.i=new Rt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function RI(n,e,t,r,o,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.U,A,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var m,v=this.g;if((m=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ch(m)){var D=m;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,bi(12),La(this),vm(this);break e}xl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,$I(this,t)}this.P?(vv(this,A,l),Z_&&this.i&&3==A&&(dv(this.S,this.T,"tick",this.hb),this.T.start())):(xl(this.j,this.m,l,null),$I(this,l)),4==A&&La(this),this.i&&!this.I&&(4==A?Om(this.l,this):(this.i=!1,lp(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,bi(12)):(this.o=0,bi(13)),La(this),vm(this)}}}catch{}},st.hb=function(){if(this.g){var n=Ba(this.g),e=this.g.fa();this.C<e.length&&(Fa(this),vv(this,n,e),this.i&&4!=n&&lp(this))}},st.cancel=function(){this.I=!0,La(this)},st.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function NI(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(sp(),bi(17)),La(this),this.o=2,vm(this)):jI(this,this.V-n)};var Et=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nl(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Nl){this.h=void 0!==e?e:n.h,Ua(this,n.j),this.s=n.s,this.g=n.g,wm(this,n.m),this.l=n.l,e=n.i;var t=new hp;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),dp(this,t),this.o=n.o}else n&&(t=String(n).match(Et))?(this.h=!!e,Ua(this,t[1]||"",!0),this.s=Im(t[2]||""),this.g=Im(t[3]||"",!0),wm(this,t[4]),this.l=Im(t[5]||"",!0),dp(this,t[6]||"",!0),this.o=Im(t[7]||"")):(this.h=!!e,this.i=new hp(null,this.h))}function Va(n){return new Nl(n)}function Ua(n,e,t){n.j=t?Im(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function wm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function dp(n,e,t){e instanceof hp?(n.i=e,function NC(n,e){e&&!n.j&&(tc(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(QI(this,r),XI(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=ph(e,ZI)),n.i=new hp(e,n.h))}function bn(n,e,t){n.i.set(e,t)}function Pn(n){return bn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Im(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ph(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,zI),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function zI(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Nl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ph(e,qI,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ph(e,qI,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(ph(t,"/"==t.charAt(0)?KI:WI,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ph(t,YI)),n.join("")};var qI=/[#\/\?@]/g,WI=/[#\?:]/g,KI=/[#\?]/g,ZI=/[#\?@]/g,YI=/#/g;function hp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function tc(n){n.g||(n.g=new Map,n.h=0,n.i&&function RC(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function QI(n,e){tc(n),e=mh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function gh(n,e){return tc(n),e=mh(n,e),n.g.has(e)}function XI(n,e,t){QI(n,e),0<t.length&&(n.i=null,n.g.set(mh(n,e),tp(t)),n.h+=t.length)}function mh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function wv(n){this.l=n||JI,n=Rt.PerformanceNavigationTiming?0<(n=Rt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Rt.g&&Rt.g.Ga&&Rt.g.Ga()&&Rt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(st=hp.prototype).add=function(n,e){tc(this),this.i=null,n=mh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},st.forEach=function(n,e){tc(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},st.oa=function(){tc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},st.W=function(n){tc(this);let e=[];if("string"==typeof n)gh(this,n)&&(e=e.concat(this.g.get(mh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},st.set=function(n,e){return tc(this),this.i=null,gh(this,n=mh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},st.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},st.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var o=u;""!==l[r]&&(o+="="+encodeURIComponent(String(l[r]))),n.push(o)}}return this.i=n.join("&")};var JI=10;function Iv(n){return!!n.h||!!n.g&&n.g.size>=n.j}function eE(n){return n.h?1:n.g?n.g.size:0}function Ol(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function kl(n,e){n.g?n.g.add(e):n.h=e}function tE(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function nE(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return tp(n.i)}function Ev(){}function rE(){this.g=new Ev}function iE(n,e,t){const r=t||"";try{MC(n,function(o,u){let l=o;ep(o)&&(l=hm(o)),e.push(r+u+"="+encodeURIComponent(l))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Dm(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function yh(n){this.l=n.ac||null,this.j=n.jb||!1}function bm(n,e){vn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Dv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wv.prototype.cancel=function(){if(this.i=nE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Ev.prototype.stringify=function(n){return Rt.JSON.stringify(n,void 0)},Ev.prototype.parse=function(n){return Rt.JSON.parse(n,void 0)},yr(yh,fv),yh.prototype.g=function(){return new bm(this.l,this.j)},yh.prototype.i=function(n){return function(){return n}}({}),yr(bm,vn);var Dv=0;function OC(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Cm(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Tm(n)}function Tm(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(st=bm.prototype).open=function(n,e){if(this.readyState!=Dv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Tm(this)},st.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Rt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},st.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Cm(this)),this.readyState=Dv},st.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Tm(this)),this.g&&(this.readyState=3,Tm(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Rt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;OC(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},st.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Cm(this):Tm(this),3==this.readyState&&OC(this)}},st.Va=function(n){this.g&&(this.response=this.responseText=n,Cm(this))},st.Ua=function(n){this.g&&(this.response=n,Cm(this))},st.ga=function(){this.g&&Cm(this)},st.setRequestHeader=function(n,e){this.v.append(n,e)},st.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},st.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(bm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var vx=Rt.JSON.parse;function Gn(n){vn.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=fp,this.K=this.L=!1}yr(Gn,vn);var fp="",kC=/^https?$/i,PC=["POST","PUT"];function _h(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,aE(n),Sm(n)}function aE(n){n.D||(n.D=!0,Dn(n,"complete"),Dn(n,"error"))}function uE(n){if(n.h&&typeof Yg<"u"&&(!n.C[1]||4!=Ba(n)||2!=n.aa()))if(n.v&&4==Ba(n))fm(n.Ha,0,n);else if(Dn(n,"readystatechange"),4==Ba(n)){n.h=!1;try{const m=n.aa();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(Et)[1]||null;if(!o&&Rt.self&&Rt.self.location){var u=Rt.self.location.protocol;o=u.substr(0,u.length-1)}r=!kC.test(o?o.toLowerCase():"")}t=r}if(t)Dn(n,"complete"),Dn(n,"success");else{n.m=6;try{var l=2<Ba(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",aE(n)}}finally{Sm(n)}}}function Sm(n,e){if(n.g){cE(n);const t=n.g,r=n.C[0]?Xf:null;n.g=null,n.C=null,e||Dn(n,"ready");try{t.onreadystatechange=r}catch{}}}function cE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Rt.clearTimeout(n.A),n.A=null)}function Ba(n){return n.g?n.g.readyState:0}function bv(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case fp:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function lE(n){let e="";return om(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Cv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=lE(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):bn(n,e,t))}function ja(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function dE(n){this.Ca=0,this.i=[],this.j=new ip,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ja("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ja("baseRetryDelayMs",5e3,n),this.bb=ja("retryDelaySeedMs",1e4,n),this.$a=ja("forwardChannelMaxRetries",2,n),this.ta=ja("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new wv(n&&n.concurrentRequestLimit),this.Fa=new rE,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Am(n){if(Tv(n),3==n.G){var e=n.U++,t=Va(n.F);bn(t,"SID",n.I),bn(t,"RID",e),bn(t,"TYPE","terminate"),Pl(n,t),(e=new fh(n,n.j,e,void 0)).K=2,e.v=Pn(Va(t)),t=!1,Rt.navigator&&Rt.navigator.sendBeacon&&(t=Rt.navigator.sendBeacon(e.v.toString(),"")),!t&&Rt.Image&&((new Image).src=e.v,t=!0),t||(e.g=vE(e.l,null),e.g.da(e.v)),e.F=Date.now(),lp(e)}yE(n)}function xm(n){n.g&&(Av(n),n.g.cancel(),n.g=null)}function Tv(n){xm(n),n.u&&(Rt.clearTimeout(n.u),n.u=null),Nm(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Rt.clearTimeout(n.m),n.m=null)}function Mm(n){Iv(n.h)||n.m||(n.m=!0,hh(n.Ja,n),n.C=0)}function fE(n,e){var t;t=e?e.m:n.U++;const r=Va(n.F);bn(r,"SID",n.I),bn(r,"RID",t),bn(r,"AID",n.T),Pl(n,r),n.o&&n.s&&Cv(r,n.o,n.s),t=new fh(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=pE(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),kl(n.h,t),_m(t,r,e)}function Pl(n,e){n.ia&&om(n.ia,function(t,r){bn(e,r,t)}),n.l&&MC({},function(t,r){bn(e,r,t)})}function pE(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Lr(n.l.Ra,n.l,n):null;e:{var o=n.i;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=o[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let v=0;v<t;v++){let D=o[v].h;const A=o[v].g;if(D-=u,0>D)u=Math.max(0,o[v].h-100),m=!1;else try{iE(A,l,"req"+D+"_")}catch{r&&r(A)}}if(m){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Sv(n){n.g||n.u||(n.Z=1,hh(n.Ia,n),n.A=0)}function Rm(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=op(Lr(n.Ia,n),mE(n,n.A)),n.A++,0))}function Av(n){null!=n.B&&(Rt.clearTimeout(n.B),n.B=null)}function gE(n){n.g=new fh(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Va(n.sa);bn(e,"RID","rpc"),bn(e,"SID",n.I),bn(e,"CI",n.L?"0":"1"),bn(e,"AID",n.T),bn(e,"TYPE","xmlhttp"),Pl(n,e),n.o&&n.s&&Cv(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Pn(Va(e)),t.s=null,t.P=!0,yv(t,n)}function Nm(n){null!=n.v&&(Rt.clearTimeout(n.v),n.v=null)}function Om(n,e){var t=null;if(n.g==e){Nm(n),Av(n),n.g=null;var r=2}else{if(!Ol(n.h,e))return;t=e.D,tE(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Dn(r=pm(),new FI(r,t)),Mm(n)}else Sv(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function hE(n,e){return!(eE(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=op(Lr(n.Ja,n,e),mE(n,n.C)),n.C++,0)))}(n,e)||2==r&&Rm(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:nc(n,5);break;case 4:nc(n,10);break;case 3:nc(n,6);break;default:nc(n,2)}}function mE(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function nc(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Lr(n.kb,n);t||(t=new Nl("//www.google.com/images/cleardot.gif"),Rt.location&&"http"==Rt.location.protocol||Ua(t,"https"),Pn(t)),function sE(n,e){const t=new ip;if(Rt.Image){const r=new Image;r.onload=Xg(Dm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Xg(Dm,t,r,"TestLoadImage: error",!1,e),r.onabort=Xg(Dm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Xg(Dm,t,r,"TestLoadImage: timeout",!1,e),Rt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else bi(2);n.G=0,n.l&&n.l.va(e),yE(n),Tv(n)}function yE(n){if(n.G=0,n.la=[],n.l){const e=nE(n.h);(0!=e.length||0!=n.i.length)&&(Jg(n.la,e),Jg(n.la,n.i),n.h.i.length=0,tp(n.i),n.i.length=0),n.l.ua()}}function _E(n,e,t){var r=t instanceof Nl?Va(t):new Nl(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),wm(r,r.m);else{var o=Rt.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new Nl(null,void 0);r&&Ua(u,r),e&&(u.g=e),o&&wm(u,o),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&bn(r,t,e),bn(r,"VER",n.ma),Pl(n,r),r}function vE(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Gn(t&&n.Da&&!n.ra?new yh({jb:!0}):n.ra)).Ka(n.H),e}function wE(){}function km(){if(Sl&&!(10<=Number(II)))throw Error("Environmental error: no available transport.")}function us(n,e){vn.call(this),this.g=new dE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!ch(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ch(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Fl(this)}function IE(n){pv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function EE(){gv.call(this),this.status=1}function Fl(n){this.g=n}(st=Gn.prototype).Ka=function(n){this.L=n},st.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():mm.g(),this.C=function VI(n){return n.h||(n.h=n.i())}(this.u?this.u:mm),this.g.onreadystatechange=Lr(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void _h(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=Rt.FormData&&n instanceof Rt.FormData,!(0<=gI(PC,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{cE(this),0<this.B&&((this.K=function oE(n){return Sl&&function wI(){return function mI(n){var e=vI;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=q_(String(dh)).split("."),t=q_("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var o=e[l]||"",u=t[l]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=em(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||em(0==o[2].length,0==u[2].length)||em(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Lr(this.qa,this)):this.A=fm(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){_h(this,u)}},st.qa=function(){typeof Yg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Dn(this,"timeout"),this.abort(8))},st.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Dn(this,"complete"),Dn(this,"abort"),Sm(this))},st.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Sm(this,!0)),Gn.X.M.call(this)},st.Ha=function(){this.s||(this.F||this.v||this.l?uE(this):this.fb())},st.fb=function(){uE(this)},st.aa=function(){try{return 2<Ba(this)?this.g.status:-1}catch{return-1}},st.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},st.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),vx(e)}},st.Ea=function(){return this.m},st.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(st=dE.prototype).ma=8,st.G=1,st.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new fh(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=DI(u),X_(u,this.S)):u=this.S),null!==this.o||this.N||(o.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=pE(this,o,e),bn(t=Va(this.F),"RID",n),bn(t,"CVER",22),this.D&&bn(t,"X-HTTP-Session-Id",this.D),Pl(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(lE(u)))+"&"+e:this.o&&Cv(t,this.o,u)),kl(this.h,o),this.Ya&&bn(t,"TYPE","init"),this.O?(bn(t,"$req",e),bn(t,"SID","null"),o.Z=!0,_m(o,t,null)):_m(o,t,e),this.G=2}}else 3==this.G&&(n?fE(this,n):0==this.i.length||Iv(this.h)||fE(this))},st.Ia=function(){if(this.u=null,gE(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=op(Lr(this.eb,this),n)}},st.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,bi(10),xm(this),gE(this))},st.cb=function(){null!=this.v&&(this.v=null,xm(this),Rm(this),bi(19))},st.kb=function(n){n?(this.j.info("Successfully pinged google.com"),bi(2)):(this.j.info("Failed to ping google.com"),bi(1))},(st=wE.prototype).xa=function(){},st.wa=function(){},st.va=function(){},st.ua=function(){},st.Ra=function(){},km.prototype.g=function(n,e){return new us(n,e)},yr(us,vn),us.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;bi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=_E(n,null,n.V),Mm(n)},us.prototype.close=function(){Am(this.g)},us.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=hm(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Mm(e)},us.prototype.M=function(){this.g.l=null,delete this.j,Am(this.g),delete this.g,us.X.M.call(this)},yr(IE,pv),yr(EE,gv),yr(Fl,wE),Fl.prototype.xa=function(){Dn(this.g,"a")},Fl.prototype.wa=function(n){Dn(this.g,new IE(n))},Fl.prototype.va=function(n){Dn(this.g,new EE)},Fl.prototype.ua=function(){Dn(this.g,"b")},km.prototype.createWebChannel=km.prototype.g,us.prototype.send=us.prototype.u,us.prototype.open=us.prototype.m,us.prototype.close=us.prototype.close,gm.NO_ERROR=0,gm.TIMEOUT=8,gm.HTTP_ERROR=6,LI.COMPLETE="complete",UI.EventType=ap,ap.OPEN="a",ap.CLOSE="b",ap.ERROR="c",ap.MESSAGE="d",vn.prototype.listen=vn.prototype.N,Gn.prototype.listenOnce=Gn.prototype.O,Gn.prototype.getLastError=Gn.prototype.Oa,Gn.prototype.getLastErrorCode=Gn.prototype.Ea,Gn.prototype.getStatus=Gn.prototype.aa,Gn.prototype.getResponseJson=Gn.prototype.Sa,Gn.prototype.getResponseText=Gn.prototype.fa,Gn.prototype.send=Gn.prototype.da,Gn.prototype.setWithCredentials=Gn.prototype.Ka;var DE=Uo.createWebChannelTransport=function(){return new km},FC=Uo.getStatEventTarget=function(){return pm()},xv=Uo.ErrorCode=gm,bE=Uo.EventType=LI,LC=Uo.Event=Ml,CE=Uo.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},VC=Uo.FetchXmlHttpFactory=yh,vh=Uo.WebChannel=UI,Mv=Uo.XhrIo=Gn;const Rv="@firebase/firestore";class _r{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_r.UNAUTHENTICATED=new _r(null),_r.GOOGLE_CREDENTIALS=new _r("google-credentials-uid"),_r.FIRST_PARTY=new _r("first-party-uid"),_r.MOCK_USER=new _r("mock-user");let wh="9.13.0";const rc=new Pa.Yd("@firebase/firestore");function pp(){return rc.logLevel}function Ne(n,...e){if(rc.logLevel<=Pa.in.DEBUG){const t=e.map(Nv);rc.debug(`Firestore (${wh}): ${n}`,...t)}}function An(n,...e){if(rc.logLevel<=Pa.in.ERROR){const t=e.map(Nv);rc.error(`Firestore (${wh}): ${n}`,...t)}}function ic(n,...e){if(rc.logLevel<=Pa.in.WARN){const t=e.map(Nv);rc.warn(`Firestore (${wh}): ${n}`,...t)}}function Nv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function nt(n="Unexpected state"){const e=`FIRESTORE (${wh}) INTERNAL ASSERTION FAILED: `+n;throw An(e),new Error(e)}function bt(n,e){n||nt()}function qe(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Ut.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class vr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Pm{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class TE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(_r.UNAUTHENTICATED))}shutdown(){}}class SE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class AE{constructor(e){this.t=e,this.currentUser=_r.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=D=>this.i!==o?(o=this.i,t(D)):Promise.resolve();let l=new vr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new vr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const D=l;e.enqueueRetryable((0,pe.Z)(function*(){yield D.promise,yield u(r.currentUser)}))},v=D=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(D=>v(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?v(D):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new vr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bt("string"==typeof r.accessToken),new Pm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return bt(null===e||"string"==typeof e),new _r(e)}}class xE{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=_r.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(bt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class BC{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new xE(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(_r.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ME{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jC{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.A;return this.A=u.token,Ne("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bt("string"==typeof t.token),this.A=t.token,new ME(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function RE(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class $C{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=RE(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Nt(n,e){return n<e?-1:n>e?1:0}function Ih(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function NE(n){return n+"\0"}class zn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return zn.fromMillis(Date.now())}static fromDate(e){return zn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new zn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Nt(this.nanoseconds,e.nanoseconds):Nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class xt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xt(e)}static min(){return new xt(new zn(0,0))}static max(){return new xt(new zn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class gp{constructor(e,t,r){void 0===t?t=0:t>e.length&&nt(),void 0===r?r=e.length-t:r>e.length-t&&nt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===gp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof gp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),l=t.get(o);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class rn extends gp{construct(e,t,r){return new rn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new rn(t)}static emptyPath(){return new rn([])}}const HC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tr extends gp{construct(e,t,r){return new tr(e,t,r)}static isValidIdentifier(e){return HC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new tr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Re(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Re(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new Re(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,o+=2}else"`"===m?(l=!l,o++):"."!==m||l?(r+=m,o++):(u(),o++)}if(u(),l)throw new Re(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tr(t)}static emptyPath(){return new tr([])}}class ze{constructor(e){this.path=e}static fromPath(e){return new ze(rn.fromString(e))}static fromName(e){return new ze(rn.fromString(e).popFirst(5))}static empty(){return new ze(rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===rn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return rn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new rn(e.slice()))}}class Fm{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function kv(n){return n.fields.find(e=>2===e.kind)}function Ll(n){return n.fields.filter(e=>2!==e.kind)}Fm.UNKNOWN_ID=-1;class Lm{constructor(e,t){this.fieldPath=e,this.kind=t}}class mp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new mp(0,Vi.min())}}function Eh(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=xt.fromTimestamp(1e9===r?new zn(t+1,0):new zn(t,r));return new Vi(o,ze.empty(),e)}function Pv(n){return new Vi(n.readTime,n.key,-1)}class Vi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Vi(xt.min(),ze.empty(),-1)}static max(){return new Vi(xt.max(),ze.empty(),-1)}}function Vm(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ze.comparator(n.documentKey,e.documentKey),0!==t?t:Nt(n.largestBatchId,e.largestBatchId))}const Fv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Lv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function sc(n){return Vv.apply(this,arguments)}function Vv(){return Vv=(0,pe.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==Fv)throw n;Ne("LocalStore","Unexpectedly lost primary lease")}),Vv.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let o=0,u=0,l=!1;e.forEach(m=>{++o,m.next(()=>{++u,l&&u===o&&t()},v=>r(v))}),l=!0,u===o&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(o=>o?oe.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,o)=>{const u=e.length,l=new Array(u);let m=0;for(let v=0;v<u;v++){const D=v;t(e[D]).next(A=>{l[D]=A,++m,m===u&&r(l)},A=>o(A))}})}static doWhile(e,t){return new oe((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class Um{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new vr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new yp(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=Ps(r.target.error);this.P.reject(new yp(e,o))}}static open(e,t,r,o){try{return new Um(t,e.transaction(o,r))}catch(u){throw new yp(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new _p(t)}}class ho{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===ho.D((0,Ut.z$)())&&An("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ne("SimpleDb","Removing database:",e),Vl(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Ut.hl)())return!1;if(ho.N())return!0;const e=(0,Ut.z$)(),t=ho.D(e),r=0<t&&t<10,o=ho.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,pe.Z)(function*(){return t.db||(Ne("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{o(new yp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;o("VersionError"===m.name?new Re(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Re(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new yp(e,m))},u.onupgradeneeded=l=>{Ne("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Ne("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,pe.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.F(e);const v=Um.open(u.db,e,l?"readonly":"readwrite",r),D=o(v).next(A=>(v.V(),A)).catch(A=>(v.abort(A),oe.reject(A))).toPromise();return D.catch(()=>{}),yield v.v,D}catch(v){const D=v,A="FirebaseError"!==D.name&&m<3;if(Ne("SimpleDb","Transaction failed with error:",D.message,"Retrying:",A),u.close(),!A)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class qC{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Vl(this.U.delete())}}class yp extends Re{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function oc(n){return"IndexedDbTransactionError"===n.name}class _p{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ne("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Vl(r)}add(e){return Ne("SimpleDb","ADD",this.store.name,e,e),Vl(this.store.add(e))}get(e){return Vl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ne("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ne("SimpleDb","DELETE",this.store.name,e),Vl(this.store.delete(e))}count(){return Ne("SimpleDb","COUNT",this.store.name),Vl(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(l,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new oe((u,l)=>{o.onerror=m=>{l(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((o,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{o(l.target.result)}})}Y(e,t){Ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,(u,l,m)=>m.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new oe((r,o)=>{t.onerror=u=>{const l=Ps(u.target.error);o(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}H(e,t){const r=[];return new oe((o,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void o();const v=new qC(m),D=t(m.primaryKey,m.value,v);if(D instanceof oe){const A=D.catch(M=>(v.done(),oe.reject(M)));r.push(A)}v.isDone?o():null===v.G?m.continue():m.continue(v.G)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Vl(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Ps(r.target.error);t(o)}})}let Bm=!1;function Ps(n){const e=ho.D((0,Ut.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Bm||(Bm=!0,setTimeout(()=>{throw r},0)),r}}return n}class WC{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ne("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,pe.Z)(function*(){t.task=null;try{Ne("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){oc(r)?Ne("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield sc(r)}yield t.nt(6e4)}))}}class Uv{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,pe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return oe.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ne("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,o).next(m=>{o-=m,r.add(l)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(o,u)).next(m=>(Ne("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const l=Pv(u);Vm(l,r)>0&&(r=l)}),new Vi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Vr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function OE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ul(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function kE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Vr.at=-1;class Fn{constructor(e,t){this.comparator=e,this.root=t||ni.EMPTY}insert(e,t){return new Fn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ni.BLACK,null,null))}remove(e){return new Fn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ni.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bl(this.root,e,this.comparator,!0)}}class Bl{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ni{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??ni.RED,this.left=o??ni.EMPTY,this.right=u??ni.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new ni(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ni.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return ni.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ni.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ni.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();const e=this.left.check();if(e!==this.right.check())throw nt();return e+(this.isRed()?0:1)}}ni.EMPTY=null,ni.RED=!0,ni.BLACK=!1,ni.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new ni(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class wn{constructor(e){this.comparator=e,this.data=new Fn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Bv(this.data.getIterator())}getIteratorFrom(e){return new Bv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof wn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new wn(this.comparator);return t.data=e,t}}class Bv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function jl(n){return n.hasNext()?n.getNext():void 0}class Ci{constructor(e){this.fields=e,e.sort(tr.comparator)}static empty(){return new Ci([])}unionWith(e){let t=new wn(tr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ci(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ih(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class br{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new br(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new br(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}br.EMPTY_BYTE_STRING=new br("");const KC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $l(n){if(bt(!!n),"string"==typeof n){let e=0;const t=KC.exec(n);if(bt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Un(n.seconds),nanos:Un(n.nanos)}}function Un(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function $a(n){return"string"==typeof n?br.fromBase64String(n):br.fromUint8Array(n)}function jm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function $m(n){const e=n.mapValue.fields.__previous_value__;return jm(e)?$m(e):e}function Hl(n){const e=$l(n.mapValue.fields.__local_write_time__.timestampValue);return new zn(e.seconds,e.nanos)}class ZC{constructor(e,t,r,o,u,l,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.useFetchStreams=v}}class ac{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ac("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ac&&e.projectId===this.projectId&&e.database===this.database}}function vp(n){return null==n}function wp(n){return 0===n&&1/n==-1/0}function jv(n){return"number"==typeof n&&Number.isInteger(n)&&!wp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const jo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ip={nullValue:"NULL_VALUE"};function Gl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?jm(n)?4:YC(n)?9007199254740991:10:nt()}function fo(n,e){if(n===e)return!0;const t=Gl(n);if(t!==Gl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Hl(n).isEqual(Hl(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=$l(r.timestampValue),l=$l(o.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,$a(n.bytesValue).isEqual($a(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Un(r.geoPointValue.latitude)===Un(o.geoPointValue.latitude)&&Un(r.geoPointValue.longitude)===Un(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Un(r.integerValue)===Un(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Un(r.doubleValue),l=Un(o.doubleValue);return u===l?wp(u)===wp(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return Ih(n.arrayValue.values||[],e.arrayValue.values||[],fo);case 10:return function(r,o){const u=r.mapValue.fields||{},l=o.mapValue.fields||{};if(OE(u)!==OE(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!fo(u[m],l[m])))return!1;return!0}(n,e);default:return nt()}var o}function Dh(n,e){return void 0!==(n.values||[]).find(t=>fo(t,e))}function uc(n,e){if(n===e)return 0;const t=Gl(n),r=Gl(e);if(t!==r)return Nt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Nt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const l=Un(o.integerValue||o.doubleValue),m=Un(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return $v(n.timestampValue,e.timestampValue);case 4:return $v(Hl(n),Hl(e));case 5:return Nt(n.stringValue,e.stringValue);case 6:return function(o,u){const l=$a(o),m=$a(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const l=o.split("/"),m=u.split("/");for(let v=0;v<l.length&&v<m.length;v++){const D=Nt(l[v],m[v]);if(0!==D)return D}return Nt(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const l=Nt(Un(o.latitude),Un(u.latitude));return 0!==l?l:Nt(Un(o.longitude),Un(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const l=o.values||[],m=u.values||[];for(let v=0;v<l.length&&v<m.length;++v){const D=uc(l[v],m[v]);if(D)return D}return Nt(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===jo.mapValue&&u===jo.mapValue)return 0;if(o===jo.mapValue)return 1;if(u===jo.mapValue)return-1;const l=o.fields||{},m=Object.keys(l),v=u.fields||{},D=Object.keys(v);m.sort(),D.sort();for(let A=0;A<m.length&&A<D.length;++A){const M=Nt(m[A],D[A]);if(0!==M)return M;const V=uc(l[m[A]],v[D[A]]);if(0!==V)return V}return Nt(m.length,D.length)}(n.mapValue,e.mapValue);default:throw nt()}}function $v(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Nt(n,e);const t=$l(n),r=$l(e),o=Nt(t.seconds,r.seconds);return 0!==o?o:Nt(t.nanos,r.nanos)}function zl(n){return Hv(n)}function Hv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=$l(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?$a(n.bytesValue).toBase64():"referenceValue"in n?ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const l of r.values||[])u?u=!1:o+=",",o+=Hv(l);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of o)l?l=!1:u+=",",u+=`${m}:${Hv(r.fields[m])}`;return u+"}"}(n.mapValue):nt();var e}function cc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Gv(n){return!!n&&"integerValue"in n}function Cr(n){return!!n&&"arrayValue"in n}function ql(n){return!!n&&"nullValue"in n}function FE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Hm(n){return!!n&&"mapValue"in n}function Gm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ul(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Gm(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gm(n.arrayValue.values[t]);return e}return Object.assign({},n)}function YC(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function LE(n){return"nullValue"in n?Ip:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?cc(ac.empty(),ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:nt()}function VE(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?cc(ac.empty(),ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?jo:nt()}function bh(n,e){const t=uc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function UE(n,e){const t=uc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Tr{constructor(e){this.value=e}static empty(){return new Tr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Hm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gm(t)}setAll(e){let t=tr.emptyPath(),r={},o=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const v=this.getFieldsMap(t);this.applyChanges(v,r,o),r={},o=[],t=m.popLast()}l?r[m.lastSegment()]=Gm(l):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Hm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Hm(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Ul(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Tr(Gm(this.value))}}function BE(n){const e=[];return Ul(n.fields,(t,r)=>{const o=new tr([t]);if(Hm(r)){const u=BE(r.mapValue).fields;if(0===u.length)e.push(o);else for(const l of u)e.push(o.child(l))}else e.push(o)}),new Ci(e)}class Cn{constructor(e,t,r,o,u,l){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=l}static newInvalidDocument(e){return new Cn(e,0,xt.min(),xt.min(),Tr.empty(),0)}static newFoundDocument(e,t,r){return new Cn(e,1,t,xt.min(),r,0)}static newNoDocument(e,t){return new Cn(e,2,t,xt.min(),Tr.empty(),0)}static newUnknownDocument(e,t){return new Cn(e,3,t,xt.min(),Tr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class QC{constructor(e,t=null,r=[],o=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=l,this.endAt=m,this.ht=null}}function jE(n,e=null,t=[],r=[],o=null,u=null,l=null){return new QC(n,e,t,r,o,u,l)}function Wl(n){const e=qe(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+zl(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),vp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>zl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>zl(r)).join(",")),e.ht=t}return e.ht}function Ch(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!tT(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!fo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Wv(n.startAt,e.startAt)&&Wv(n.endAt,e.endAt)}function Ep(n){return ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Kl(n,e){return n.filters.filter(t=>t instanceof Ur&&t.field.isEqual(e))}function zm(n,e,t){let r=Ip,o=!0;for(const u of Kl(n,e)){let l=Ip,m=!0;switch(u.op){case"<":case"<=":l=LE(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=Ip}bh({value:r,inclusive:o},{value:l,inclusive:m})<0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];bh({value:r,inclusive:o},{value:l,inclusive:t.inclusive})<0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}function XC(n,e,t){let r=jo,o=!0;for(const u of Kl(n,e)){let l=jo,m=!0;switch(u.op){case">=":case">":l=VE(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=jo}UE({value:r,inclusive:o},{value:l,inclusive:m})>0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];UE({value:r,inclusive:o},{value:l,inclusive:t.inclusive})>0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}class Ur extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new JC(e,t,r):"array-contains"===t?new GE(e,r):"in"===t?new qv(e,r):"not-in"===t?new Ix(e,r):"array-contains-any"===t?new eT(e,r):new Ur(e,t,r)}static lt(e,t,r){return"in"===t?new $E(e,r):new Th(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(uc(t,this.value)):null!==t&&Gl(this.value)===Gl(t)&&this.ft(uc(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class JC extends Ur{constructor(e,t,r){super(e,t,r),this.key=ze.fromName(r.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.ft(t)}}class $E extends Ur{constructor(e,t){super(e,"in",t),this.keys=HE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Th extends Ur{constructor(e,t){super(e,"not-in",t),this.keys=HE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function HE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ze.fromName(r.referenceValue))}class GE extends Ur{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cr(t)&&Dh(t.arrayValue,this.value)}}class qv extends Ur{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Dh(this.value.arrayValue,t)}}class Ix extends Ur{constructor(e,t){super(e,"not-in",t)}matches(e){if(Dh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Dh(this.value.arrayValue,t)}}class eT extends Ur{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cr(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Dh(this.value.arrayValue,r))}}class Zl{constructor(e,t){this.position=e,this.inclusive=t}}class Sh{constructor(e,t="asc"){this.field=e,this.dir=t}}function tT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function zE(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],l=n.position[o];if(r=u.field.isKeyField()?ze.comparator(ze.fromName(l.referenceValue),t.key):uc(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Wv(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!fo(n.position[t],e.position[t]))return!1;return!0}class $o{constructor(e,t=null,r=[],o=[],u=null,l="F",m=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=v,this._t=null,this.wt=null}}function qE(n,e,t,r,o,u,l,m){return new $o(n,e,t,r,o,u,l,m)}function Yl(n){return new $o(n)}function Kv(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Zv(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Yv(n){for(const e of n.filters)if(e.dt())return e.field;return null}function qm(n){return null!==n.collectionGroup}function Ah(n){const e=qe(n);if(null===e._t){e._t=[];const t=Yv(e),r=Zv(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Sh(t)),e._t.push(new Sh(tr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Sh(tr.keyField(),u))}}}return e._t}function fi(n){const e=qe(n);if(!e.wt)if("F"===e.limitType)e.wt=jE(e.path,e.collectionGroup,Ah(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Ah(e))t.push(new Sh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Zl(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Zl(e.startAt.position,e.startAt.inclusive):null;e.wt=jE(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.wt}function Dp(n,e,t){return new $o(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function xh(n,e){return Ch(fi(n),fi(e))&&n.limitType===e.limitType}function Qv(n){return`${Wl(fi(n))}|lt:${n.limitType}`}function Xv(n){return`Query(target=${function zv(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${zl(r.value)}`;var r}).join(", ")}]`),vp(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>zl(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>zl(t)).join(",")),`Target(${e})`}(fi(n))}; limitType=${n.limitType})`}function Jv(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):ze.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,l){const m=zE(o,u,l);return o.inclusive?m<=0:m<0}(t.startAt,Ah(t),r)||t.endAt&&!function(o,u,l){const m=zE(o,u,l);return o.inclusive?m>=0:m>0}(t.endAt,Ah(t),r)));var t,r}function nT(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ew(n){return(e,t)=>{let r=!1;for(const o of Ah(n)){const u=Ex(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function Ex(n,e,t){const r=n.field.isKeyField()?ze.comparator(e.key,t.key):function(o,u,l){const m=u.data.field(o),v=l.data.field(o);return null!==m&&null!==v?uc(m,v):nt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return nt()}}function rT(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wp(e)?"-0":e}}function iT(n){return{integerValue:""+n}}function sT(n,e){return jv(e)?iT(e):rT(n,e)}class tw{constructor(){this._=void 0}}function Dx(n,e,t){return n instanceof Ha?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Mh?nw(n,e):n instanceof Ho?rw(n,e):function(r,o){const u=oT(r,o),l=aT(u)+aT(r.yt);return Gv(u)&&Gv(r.yt)?iT(l):rT(r.It,l)}(n,e)}function bx(n,e,t){return n instanceof Mh?nw(n,e):n instanceof Ho?rw(n,e):t}function oT(n,e){return n instanceof Ql?Gv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ha extends tw{}class Mh extends tw{constructor(e){super(),this.elements=e}}function nw(n,e){const t=Wm(e);for(const r of n.elements)t.some(o=>fo(o,r))||t.push(r);return{arrayValue:{values:t}}}class Ho extends tw{constructor(e){super(),this.elements=e}}function rw(n,e){let t=Wm(e);for(const r of n.elements)t=t.filter(o=>!fo(o,r));return{arrayValue:{values:t}}}class Ql extends tw{constructor(e,t){super(),this.It=e,this.yt=t}}function aT(n){return Un(n.integerValue||n.doubleValue)}function Wm(n){return Cr(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Rh{constructor(e,t){this.field=e,this.transform=t}}class WE{constructor(e,t){this.version=e,this.transformResults=t}}class qn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new qn}static exists(e){return new qn(void 0,e)}static updateTime(e){return new qn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function iw(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Km{}function KE(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Nh(n.key,qn.none()):new Cp(n.key,n.data,qn.none());{const t=n.data,r=Tr.empty();let o=new wn(tr.comparator);for(let u of e.fields)if(!o.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),o=o.add(u)}return new Ga(n.key,r,new Ci(o.toArray()),qn.none())}}function Zm(n,e,t){n instanceof Cp?function(r,o,u){const l=r.value.clone(),m=YE(r.fieldTransforms,o,u.transformResults);l.setAll(m),o.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Ga?function(r,o,u){if(!iw(r.precondition,o))return void o.convertToUnknownDocument(u.version);const l=YE(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(ZE(r)),m.setAll(l),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function bp(n,e,t,r){return n instanceof Cp?function(o,u,l,m){if(!iw(o.precondition,u))return l;const v=o.value.clone(),D=lT(o.fieldTransforms,m,u);return v.setAll(D),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ga?function(o,u,l,m){if(!iw(o.precondition,u))return l;const v=lT(o.fieldTransforms,m,u),D=u.data;return D.setAll(ZE(o)),D.setAll(v),u.convertToFoundDocument(u.version,D).setHasLocalMutations(),null===l?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(A=>A.field))}(n,e,t,r):(l=t,iw(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function Cx(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=oT(r.transform,o||null);null!=u&&(null===t&&(t=Tr.empty()),t.set(r.field,u))}return t||null}function cT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ih(t,r,(o,u)=>function uT(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Mh&&r instanceof Mh||t instanceof Ho&&r instanceof Ho?Ih(t.elements,r.elements,fo):t instanceof Ql&&r instanceof Ql?fo(t.yt,r.yt):t instanceof Ha&&r instanceof Ha);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Cp extends Km{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ga extends Km{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function ZE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function YE(n,e,t){const r=new Map;bt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],l=u.transform,m=e.data.field(u.field);r.set(u.field,bx(l,m,t[o]))}return r}function lT(n,e,t){const r=new Map;for(const o of n){const u=o.transform,l=t.data.field(o.field);r.set(o.field,Dx(u,l,e))}return r}class Nh extends Km{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ym extends Km{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class QE{constructor(e){this.count=e}}var Sr,Bt;function XE(n){switch(n){default:return nt();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function Qm(n){if(void 0===n)return An("GRPC error has no .code"),ue.UNKNOWN;switch(n){case Sr.OK:return ue.OK;case Sr.CANCELLED:return ue.CANCELLED;case Sr.UNKNOWN:return ue.UNKNOWN;case Sr.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Sr.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Sr.INTERNAL:return ue.INTERNAL;case Sr.UNAVAILABLE:return ue.UNAVAILABLE;case Sr.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Sr.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Sr.NOT_FOUND:return ue.NOT_FOUND;case Sr.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Sr.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Sr.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Sr.ABORTED:return ue.ABORTED;case Sr.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Sr.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Sr.DATA_LOSS:return ue.DATA_LOSS;default:return nt()}}(Bt=Sr||(Sr={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";class lc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ul(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return kE(this.inner)}size(){return this.innerSize}}const Fs=new Fn(ze.comparator);function Ui(){return Fs}const Xm=new Fn(ze.comparator);function Tp(...n){let e=Xm;for(const t of n)e=e.insert(t.key,t);return e}function JE(n){let e=Xm;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ls(){return Oh()}function sw(){return Oh()}function Oh(){return new lc(n=>n.toString(),(n,e)=>n.isEqual(e))}const dT=new Fn(ze.comparator),eD=new wn(ze.comparator);function $t(...n){let e=eD;for(const t of n)e=e.add(t);return e}const hT=new wn(Nt);function Sp(){return hT}class Ap{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Xl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ap(xt.min(),o,Sp(),Ui(),$t())}}class Xl{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Xl(r,t,$t(),$t(),$t())}}class po{constructor(e,t,r,o){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=o}}class ow{constructor(e,t){this.targetId=e,this.At=t}}class Jm{constructor(e,t,r=br.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Go{constructor(){this.Rt=0,this.bt=tD(),this.Pt=br.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=$t(),t=$t(),r=$t();return this.bt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:nt()}}),new Xl(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=tD()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class fT{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Ui(),this.qt=pT(),this.Kt=new wn(Nt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:nt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,o)=>{this.Ht(o)&&t(o)})}Yt(e){const t=e.targetId,r=e.At.count,o=this.Xt(t);if(o){const u=o.target;if(Ep(u))if(0===r){const l=new ze(u.path);this.jt(t,l,Cn.newNoDocument(l,xt.min()))}else bt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,l)=>{const m=this.Xt(l);if(m){if(u.current&&Ep(m.target)){const v=new ze(m.target.path);null!==this.Ut.get(v)||this.ee(l,v)||this.jt(l,v,Cn.newNoDocument(v,e))}u.Dt&&(t.set(l,u.xt()),u.Nt())}});let r=$t();this.qt.forEach((u,l)=>{let m=!0;l.forEachWhile(v=>{const D=this.Xt(v);return!D||2===D.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Ut.forEach((u,l)=>l.setReadTime(e));const o=new Ap(e,t,this.Kt,this.Ut,r);return this.Ut=Ui(),this.qt=pT(),this.Kt=new wn(Nt),o}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const o=this.zt(e);this.ee(e,t)?o.kt(t,1):o.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new Go,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new wn(Nt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Ne("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Go),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function pT(){return new Fn(ze.comparator)}function tD(){return new Fn(ze.comparator)}const gT={asc:"ASCENDING",desc:"DESCENDING"},mT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class yT{constructor(e,t){this.databaseId=e,this.gt=t}}function kh(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _T(n,e){return n.gt?e.toBase64():e.toUint8Array()}function nD(n,e){return kh(n,e.toTimestamp())}function Br(n){return bt(!!n),xt.fromTimestamp(function(e){const t=$l(e);return new zn(t.seconds,t.nanos)}(n))}function ey(n,e){return(t=n,new rn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function vT(n){const e=rn.fromString(n);return bt(uD(e)),e}function Jl(n,e){return ey(n.databaseId,e.path)}function go(n,e){const t=vT(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ze(uw(t))}function ty(n,e){return ey(n.databaseId,e)}function aw(n){const e=vT(n);return 4===e.length?rn.emptyPath():uw(e)}function Ph(n){return new rn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function uw(n){return bt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function xp(n,e,t){return{name:Jl(n,e),fields:t.value.mapValue.fields}}function Mp(n,e,t){const r=go(n,e.name),o=Br(e.updateTime),u=new Tr({mapValue:{fields:e.fields}}),l=Cn.newFoundDocument(r,o,u);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function Fh(n,e){let t;if(e instanceof Cp)t={update:xp(n,e.key,e.value)};else if(e instanceof Nh)t={delete:Jl(n,e.key)};else if(e instanceof Ga)t={update:xp(n,e.key,e.data),updateMask:Ax(e.fieldMask)};else{if(!(e instanceof Ym))return nt();t={verify:Jl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const l=u.transform;if(l instanceof Ha)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Mh)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ho)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ql)return{fieldPath:u.field.canonicalString(),increment:l.yt};throw nt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:nD(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:nt()),t;var o}function ny(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?qn.updateTime(Br(o.updateTime)):void 0!==o.exists?qn.exists(o.exists):qn.none():qn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,l){let m=null;"setToServerValue"in l?(bt("REQUEST_TIME"===l.setToServerValue),m=new Ha):"appendMissingElements"in l?m=new Mh(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new Ho(l.removeAllFromArray.values||[]):"increment"in l?m=new Ql(u,l.increment):nt();const v=tr.fromServerFormat(l.fieldPath);return new Rh(v,m)}(n,o)):[];var o;if(e.update){const o=go(n,e.update.name),u=new Tr({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Ci((e.updateMask.fieldPaths||[]).map(D=>tr.fromServerFormat(D)));return new Ga(o,u,l,t,r)}return new Cp(o,u,t,r)}if(e.delete){const o=go(n,e.delete);return new Nh(o,t)}if(e.verify){const o=go(n,e.verify);return new Ym(o,t)}return nt()}function iD(n,e){return{documents:[ty(n,e.path)]}}function sD(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=ty(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=ty(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(v){if(0===v.length)return;const D=v.map(A=>function(M){if("=="===M.op){if(FE(M.value))return{unaryFilter:{field:Rp(M.field),op:"IS_NAN"}};if(ql(M.value))return{unaryFilter:{field:Rp(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(FE(M.value))return{unaryFilter:{field:Rp(M.field),op:"IS_NOT_NAN"}};if(ql(M.value))return{unaryFilter:{field:Rp(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rp(M.field),op:bT(M.op),value:M.value}}}(A));return 1===D.length?D[0]:{compositeFilter:{op:"AND",filters:D}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(v){if(0!==v.length)return v.map(D=>{return{field:Rp((A=D).field),direction:DT(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=(D=e.limit,n.gt||vp(D)?D:{value:D});var D,m,v;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function ET(n){let e=aw(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){bt(1===r);const A=t.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=aD(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(A=>{return new Sh(Np((M=A).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let m=null;t.limit&&(m=function(A){let M;return M="object"==typeof A?A.value:A,vp(M)?null:M}(t.limit));let v=null;var A;t.startAt&&(v=new Zl((A=t.startAt).values||[],!!A.before));let D=null;return t.endAt&&(D=function(A){return new Zl(A.values||[],!A.before)}(t.endAt)),qE(e,o,l,u,m,"F",v,D)}function aD(n){return n?void 0!==n.unaryFilter?[Sx(n)]:void 0!==n.fieldFilter?[Tx(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>aD(e)).reduce((e,t)=>e.concat(t)):nt():[]}function DT(n){return gT[n]}function bT(n){return mT[n]}function Rp(n){return{fieldPath:n.canonicalString()}}function Np(n){return tr.fromServerFormat(n.fieldPath)}function Tx(n){return Ur.create(Np(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nt()}}(n.fieldFilter.op),n.fieldFilter.value)}function Sx(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Np(n.unaryFilter.field);return Ur.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Np(n.unaryFilter.field);return Ur.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Np(n.unaryFilter.field);return Ur.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Np(n.unaryFilter.field);return Ur.create(o,"!=",{nullValue:"NULL_VALUE"});default:return nt()}}function Ax(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function uD(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function jr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=cD(e)),e=CT(n.get(t),e);return cD(e)}function CT(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function cD(n){return n+"\x01\x01"}function mo(n){const e=n.length;if(bt(e>=2),2===e)return bt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),rn.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&nt(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let v;0===o.length?v=m:(o+=m,v=o,o=""),r.push(v);break;case"\x10":o+=n.substring(u,l),o+="\0";break;case"\x11":o+=n.substring(u,l+1);break;default:nt()}u=l+2}return new rn(r)}const dc=["userId","batchId"];function Op(n,e){return[n,jr(e)]}function ry(n,e,t){return[n,jr(e),t]}const cw={},TT=["prefixPath","collectionGroup","readTime","documentId"],lw=["prefixPath","collectionGroup","documentId"],dw=["collectionGroup","readTime","prefixPath","documentId"],iy=["canonicalId","targetId"],xx=["targetId","path"],Mx=["path","targetId"],Rx=["collectionId","parent"],Nx=["indexId","uid"],lD=["uid","sequenceNumber"],ST=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],AT=["indexId","uid","orderedDocumentKey"],xT=["userId","collectionPath","documentId"],MT=["userId","collectionPath","largestBatchId"],dD=["userId","collectionGroup","largestBatchId"],hw=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],hD=[...hw,"documentOverlays"],fD=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],pD=fD,gD=[...pD,"indexConfiguration","indexState","indexEntries"];class kp extends Lv{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function ri(n,e){const t=qe(n);return ho.M(t.ie,e)}class sy{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Zm(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=bp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=bp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=sw();return this.mutations.forEach(o=>{const u=e.get(o.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(o.key)?null:m;const v=KE(l,m);null!==v&&r.set(o.key,v),l.isValidDocument()||l.convertToNoDocument(xt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),$t())}isEqual(e){return this.batchId===e.batchId&&Ih(this.mutations,e.mutations,(t,r)=>cT(t,r))&&Ih(this.baseMutations,e.baseMutations,(t,r)=>cT(t,r))}}class Pp{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){bt(e.mutations.length===r.length);let o=dT;const u=e.mutations;for(let l=0;l<u.length;l++)o=o.insert(u[l].key,r[l].version);return new Pp(e,t,r,o)}}class fw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class hc{constructor(e,t,r,o,u=xt.min(),l=xt.min(),m=br.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m}withSequenceNumber(e){return new hc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new hc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new hc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class RT{constructor(e){this.re=e}}function mD(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:oy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Jl(o=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:kh(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ed(e.version)};else{if(!e.isUnknownDocument())return nt();r.unknownDocument={path:t.path.toArray(),version:ed(e.version)}}var o,u;return r}function oy(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ed(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Lh(n){const e=new zn(n.seconds,n.nanoseconds);return xt.fromTimestamp(e)}function Vh(n,e){const t=(e.baseMutations||[]).map(u=>ny(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const l=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(l.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>ny(n.re,u)),o=zn.fromMillis(e.localWriteTimeMs);return new sy(e.batchId,o,t,r)}function ay(n){const e=Lh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Lh(n.lastLimboFreeSnapshotVersion):xt.min();let r;var o;return void 0!==n.query.documents?(bt(1===(o=n.query).documents.length),r=fi(Yl(aw(o.documents[0])))):r=fi(ET(n.query)),new hc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,br.fromBase64String(n.resumeToken))}function NT(n,e){const t=ed(e.snapshotVersion),r=ed(e.lastLimboFreeSnapshotVersion);let o;o=Ep(e.target)?iD(n.re,e.target):sD(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Wl(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function yD(n){const e=ET({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Dp(e,e.limit,"L"):e}function pw(n,e){return new fw(e.largestBatchId,ny(n.re,e.overlayMutation))}function OT(n,e){const t=e.path.lastSegment();return[n,jr(e.path.popLast()),t]}function kT(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:ed(r.readTime),documentKey:jr(r.documentKey.path),largestBatchId:r.largestBatchId}}class kx{getBundleMetadata(e,t){return PT(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Lh(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return PT(e).put({bundleId:(r=t).id,createTime:ed(Br(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return FT(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:yD(o.bundledQuery),readTime:Lh(o.readTime)};var o})}saveNamedQuery(e,t){return FT(e).put({name:(r=t).name,readTime:ed(Br(r.readTime)),bundledQuery:r.bundledQuery});var r}}function PT(n){return ri(n,"bundles")}function FT(n){return ri(n,"namedQueries")}class gw{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new gw(e,t.uid||"")}getOverlay(e,t){return i(e).get(OT(this.userId,t)).next(r=>r?pw(this.It,r):null)}getOverlays(e,t){const r=Ls();return oe.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,l)=>{const m=new fw(t,l);o.push(this.ue(e,m))}),oe.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(l=>o.add(jr(l.getCollectionPath())));const u=[];return o.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(i(e).Y("collectionPathOverlayIndex",m))}),oe.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Ls(),u=jr(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return i(e).W("collectionPathOverlayIndex",l).next(m=>{for(const v of m){const D=pw(this.It,v);o.set(D.getKey(),D)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Ls();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return i(e).Z({index:"collectionGroupOverlayIndex",range:m},(v,D,A)=>{const M=pw(this.It,D);u.size()<o||M.largestBatchId===l?(u.set(M.getKey(),M),l=M.largestBatchId):A.done()}).next(()=>u)}ue(e,t){return i(e).put(function(r,o,u){const[l,m,v]=OT(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Fh(r.re,u.mutation)}}(this.It,this.userId,t))}}function i(n){return ri(n,"documentOverlays")}class s{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Un(e.integerValue));else if("doubleValue"in e){const r=Un(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),wp(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me($a(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?YC(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):nt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const o of Object.keys(r))this._e(o,t),this.ae(r[o],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const o of r)this.ae(o,t)}ge(e,t){this.le(t,37),ze.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function a(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function c(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=a(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}s.Te=new s;class d{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const o=t.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const o=t.codePointAt(0);this.Pe(240|o>>>18),this.Pe(128|63&o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o)}}this.ve()}De(e){const t=this.Ce(e),r=c(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Ne(e){const t=this.Ce(e),r=c(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class f{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class _{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class I{constructor(){this.Be=new d,this.Le=new f(this.Be),this.Ue=new _(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class E{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new E(this.indexId,this.documentKey,this.arrayValue,r)}}function T(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=R(n.arrayValue,e.arrayValue),0!==t?t:(t=R(n.directionalValue,e.directionalValue),0!==t?t:ze.comparator(n.documentKey,e.documentKey)))}function R(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class k{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=kv(e);if(void 0!==t&&!this.ze(t))return!1;const r=Ll(e);let o=0,u=0;for(;o<r.length&&this.ze(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.je){const l=r[o];if(!this.He(this.je,l)||!this.Je(this.Ge[u++],l))return!1;++o}for(;o<r.length;++o){const l=r[o];if(u>=this.Ge.length||!this.Je(this.Ge[u++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class H{constructor(){this.Ye=new X}addToCollectionParentIndex(e,t){return this.Ye.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Vi.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Vi.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class X{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new wn(rn.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new wn(rn.comparator)).toArray()}}const ye=new Uint8Array(0);class Pe{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new X,this.Ze=new lc(r=>Wl(r),(r,o)=>Ch(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:jr(o)};return Ge(e).put(u)}return oe.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[NE(t),""],!1,!0);return Ge(e).W(o).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(mo(l.parent))}return r})}addFieldIndex(e,t){const r=pt(e),o={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete o.indexId;const u=r.add(o);if(t.indexState){const l=Te(e);return u.next(m=>{l.put(kT(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=pt(e),o=Te(e),u=Je(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Je(e);let o=!0;const u=new Map;return oe.forEach(this.tn(t),l=>this.en(e,l).next(m=>{o&&(o=!!m),u.set(l,m)})).next(()=>{if(o){let l=$t();const m=[];return oe.forEach(u,(v,D)=>{var A;Ne("IndexedDbIndexManager",`Using index ${A=v,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(dt=>`${dt.fieldPath}:${dt.kind}`).join(",")}`} to execute ${Wl(t)}`);const M=function(dt,ot){const Tt=kv(ot);if(void 0===Tt)return null;for(const kt of Kl(dt,Tt.fieldPath))switch(kt.op){case"array-contains-any":return kt.value.arrayValue.values||[];case"array-contains":return[kt.value]}return null}(D,v),V=function(dt,ot){const Tt=new Map;for(const kt of Ll(ot))for(const lr of Kl(dt,kt.fieldPath))switch(lr.op){case"==":case"in":Tt.set(kt.fieldPath.canonicalString(),lr.value);break;case"not-in":case"!=":return Tt.set(kt.fieldPath.canonicalString(),lr.value),Array.from(Tt.values())}return null}(D,v),W=function(dt,ot){const Tt=[];let kt=!0;for(const lr of Ll(ot)){const Wa=0===lr.kind?zm(dt,lr.fieldPath,dt.startAt):XC(dt,lr.fieldPath,dt.startAt);Tt.push(Wa.value),kt&&(kt=Wa.inclusive)}return new Zl(Tt,kt)}(D,v),ee=function(dt,ot){const Tt=[];let kt=!0;for(const lr of Ll(ot)){const Wa=0===lr.kind?XC(dt,lr.fieldPath,dt.endAt):zm(dt,lr.fieldPath,dt.endAt);Tt.push(Wa.value),kt&&(kt=Wa.inclusive)}return new Zl(Tt,kt)}(D,v),xe=this.nn(v,D,W),Ee=this.nn(v,D,ee),gt=this.sn(v,D,V),vt=this.rn(v.indexId,M,xe,W.inclusive,Ee,ee.inclusive,gt);return oe.forEach(vt,dt=>r.J(dt,t.limit).next(ot=>{ot.forEach(Tt=>{const kt=ze.fromSegments(Tt.documentKey);l.has(kt)||(l=l.add(kt),m.push(kt))})}))}).next(()=>m)}return oe.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,o,u,l,m){const v=(null!=t?t.length:1)*Math.max(r.length,u.length),D=v/(null!=t?t.length:1),A=[];for(let M=0;M<v;++M){const V=t?this.on(t[M/D]):ye,W=this.un(e,V,r[M%D],o),ee=this.cn(e,V,u[M%D],l),xe=m.map(Ee=>this.un(e,V,Ee,!0));A.push(...this.createRange(W,ee,xe))}return A}un(e,t,r,o){const u=new E(e,ze.empty(),t,r);return o?u:u.Ke()}cn(e,t,r,o){const u=new E(e,ze.empty(),t,r);return o?u.Ke():u}en(e,t){const r=new k(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let l=null;for(const m of u)r.We(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;return oe.forEach(this.tn(t),o=>this.en(e,o).next(u=>{u?0!==r&&u.fields.length<function(l){let m=new wn(tr.comparator),v=!1;for(const D of l.filters){const A=D;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?v=!0:m=m.add(A.field))}for(const D of l.orderBy)D.field.isKeyField()||(m=m.add(D.field));return m.size+(v?1:0)}(o)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new I;for(const o of Ll(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const l=r.qe(o.kind);s.Te.ce(u,l)}return r.$e()}on(e){const t=new I;return s.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new I;return s.Te.ce(cc(this.databaseId,t),r.qe(function(o){const u=Ll(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let o=[];o.push(new I);let u=0;for(const l of Ll(e)){const m=r[u++];for(const v of o)if(this.ln(t,l.fieldPath)&&Cr(m))o=this.fn(o,l,m);else{const D=v.qe(l.kind);s.Te.ce(m,D)}}return this.dn(o)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const o=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of o){const v=new I;v.seed(m.$e()),s.Te.ce(l,v.qe(t.kind)),u.push(v)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof Ur&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=pt(e),o=Te(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const l=[];return oe.forEach(u,m=>o.get([m.indexId,this.uid]).next(v=>{l.push(function(D,A){const M=A?new mp(A.sequenceNumber,new Vi(Lh(A.readTime),new ze(mo(A.documentKey)),A.largestBatchId)):mp.empty(),V=D.fields.map(([W,ee])=>new Lm(tr.fromServerFormat(W),ee));return new Fm(D.indexId,D.collectionGroup,V,M)}(m,v))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Nt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=pt(e),u=Te(e);return this._n(e).next(l=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>oe.forEach(m,v=>u.put(kT(v.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(o,u)=>{const l=r.get(o.collectionGroup);return(l?oe.resolve(l):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),oe.forEach(m,v=>this.wn(e,o,v).next(D=>{const A=this.mn(u,v);return D.isEqual(A)?oe.resolve():this.gn(e,u,v,D,A)}))))})}yn(e,t,r,o){return Je(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,o){return Je(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const o=Je(e);let u=new wn(T);return o.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,m)=>{u=u.add(new E(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}mn(e,t){let r=new wn(T);const o=this.an(t,e);if(null==o)return r;const u=kv(t);if(null!=u){const l=e.data.field(u.fieldPath);if(Cr(l))for(const m of l.arrayValue.values||[])r=r.add(new E(t.indexId,e.key,this.on(m),o))}else r=r.add(new E(t.indexId,e.key,ye,o));return r}gn(e,t,r,o,u){Ne("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,v,D,A,M){const V=m.getIterator(),W=v.getIterator();let ee=jl(V),xe=jl(W);for(;ee||xe;){let Ee=!1,gt=!1;if(ee&&xe){const vt=D(ee,xe);vt<0?gt=!0:vt>0&&(Ee=!0)}else null!=ee?gt=!0:Ee=!0;Ee?(A(xe),xe=jl(W)):gt?(M(ee),ee=jl(V)):(ee=jl(V),xe=jl(W))}}(o,u,T,m=>{l.push(this.yn(e,t,r,m))},m=>{l.push(this.pn(e,t,r,m))}),oe.waitFor(l)}_n(e){let t=1;return Te(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>T(l,m)).filter((l,m,v)=>!m||0!==T(l,v[m-1]));const o=[];o.push(e);for(const l of r){const m=T(l,e),v=T(l,t);if(0===m)o[0]=e.Ke();else if(m>0&&v<0)o.push(l),o.push(l.Ke());else if(v>0)break}o.push(t);const u=[];for(let l=0;l<o.length;l+=2)u.push(IDBKeyRange.bound([o[l].indexId,this.uid,o[l].arrayValue,o[l].directionalValue,ye,[]],[o[l+1].indexId,this.uid,o[l+1].arrayValue,o[l+1].directionalValue,ye,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Ct)}getMinOffset(e,t){return oe.mapArray(this.tn(t),r=>this.en(e,r).next(o=>o||nt())).next(Ct)}}function Ge(n){return ri(n,"collectionParents")}function Je(n){return ri(n,"indexEntries")}function pt(n){return ri(n,"indexConfiguration")}function Te(n){return ri(n,"indexState")}function Ct(n){bt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;Vm(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Vi(e.readTime,e.documentKey,t)}const un={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Kt{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Kt(e,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fc(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const v=r.Z({range:l},(A,M,V)=>(m++,V.delete()));u.push(v.next(()=>{bt(1===m)}));const D=[];for(const A of t.mutations){const M=ry(e,A.key.path,t.batchId);u.push(o.delete(M)),D.push(A.key)}return oe.waitFor(u).next(()=>D)}function Uh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw nt();e=n.noDocument}return JSON.stringify(e).length}Kt.DEFAULT_COLLECTION_PERCENTILE=10,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kt.DEFAULT=new Kt(41943040,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kt.DISABLED=new Kt(-1,0,0);class Bh{constructor(e,t,r,o){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=o,this.In={}}static oe(e,t,r,o){bt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Bh(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zo(e).Z({index:"userMutationsIndex",range:r},(o,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=pc(e),l=zo(e);return l.add({}).next(m=>{bt("number"==typeof m);const v=new sy(m,t,r,o),D=function(V,W,ee){const xe=ee.baseMutations.map(gt=>Fh(V.re,gt)),Ee=ee.mutations.map(gt=>Fh(V.re,gt));return{userId:W,batchId:ee.batchId,localWriteTimeMs:ee.localWriteTime.toMillis(),baseMutations:xe,mutations:Ee}}(this.It,this.userId,v),A=[];let M=new wn((V,W)=>Nt(V.canonicalString(),W.canonicalString()));for(const V of o){const W=ry(this.userId,V.key.path,m);M=M.add(V.key.path.popLast()),A.push(l.put(D)),A.push(u.put(W,cw))}return M.forEach(V=>{A.push(this.indexManager.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.In[m]=v.keys()}),oe.waitFor(A).next(()=>v)})}lookupMutationBatch(e,t){return zo(e).get(t).next(r=>r?(bt(r.userId===this.userId),Vh(this.It,r)):null)}Tn(e,t){return this.In[t]?oe.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.In[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return zo(e).Z({index:"userMutationsIndex",range:o},(l,m,v)=>{m.userId===this.userId&&(bt(m.batchId>=r),u=Vh(this.It,m)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return zo(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(o,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zo(e).W("userMutationsIndex",t).next(r=>r.map(o=>Vh(this.It,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Op(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return pc(e).Z({range:o},(l,m,v)=>{const[D,A,M]=l,V=mo(A);if(D===this.userId&&t.path.isEqual(V))return zo(e).get(M).next(W=>{if(!W)throw nt();bt(W.userId===this.userId),u.push(Vh(this.It,W))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wn(Nt);const o=[];return t.forEach(u=>{const l=Op(this.userId,u.path),m=IDBKeyRange.lowerBound(l),v=pc(e).Z({range:m},(D,A,M)=>{const[V,W,ee]=D,xe=mo(W);V===this.userId&&u.path.isEqual(xe)?r=r.add(ee):M.done()});o.push(v)}),oe.waitFor(o).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Op(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new wn(Nt);return pc(e).Z({range:l},(v,D,A)=>{const[M,V,W]=v,ee=mo(V);M===this.userId&&r.isPrefixOf(ee)?ee.length===o&&(m=m.add(W)):A.done()}).next(()=>this.En(e,m))}En(e,t){const r=[],o=[];return t.forEach(u=>{o.push(zo(e).get(u).next(l=>{if(null===l)throw nt();bt(l.userId===this.userId),r.push(Vh(this.It,l))}))}),oe.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return fc(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),oe.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return pc(e).Z({range:r},(u,l,m)=>{if(u[0]===this.userId){const v=mo(u[1]);o.push(v)}else m.done()}).next(()=>{bt(0===o.length)})})}containsKey(e,t){return uy(e,this.userId,t)}Rn(e){return cy(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function uy(n,e,t){const r=Op(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return pc(n).Z({range:u,X:!0},(m,v,D)=>{const[A,M,V]=m;A===e&&M===o&&(l=!0),D.done()}).next(()=>l)}function zo(n){return ri(n,"mutations")}function pc(n){return ri(n,"documentMutations")}function cy(n){return ri(n,"mutationQueues")}class za{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new za(0)}static vn(){return new za(-1)}}class mw{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new za(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>xt.fromTimestamp(new zn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Sn(e,o)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>gc(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(bt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return gc(e).Z((l,m)=>{const v=ay(m);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(o++,u.push(this.removeTargetData(e,v)))}).next(()=>oe.waitFor(u)).next(()=>o)}forEachTarget(e,t){return gc(e).Z((r,o)=>{const u=ay(o);t(u)})}Vn(e){return Px(e).get("targetGlobalKey").next(t=>(bt(null!==t),t))}Sn(e,t){return Px(e).put("targetGlobalKey",t)}Dn(e,t){return gc(e).put(NT(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Wl(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return gc(e).Z({range:o,index:"queryTargetsIndex"},(l,m,v)=>{const D=ay(m);Ch(t,D.target)&&(u=D,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=jh(e);return t.forEach(l=>{const m=jr(l.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,l))}),oe.waitFor(o)}removeMatchingKeys(e,t,r){const o=jh(e);return oe.forEach(t,u=>{const l=jr(u.path);return oe.waitFor([o.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=jh(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=jh(e);let u=$t();return o.Z({range:r,X:!0},(l,m,v)=>{const D=mo(l[1]),A=new ze(D);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=jr(t.path),o=IDBKeyRange.bound([r],[NE(r)],!1,!0);let u=0;return jh(e).Z({index:"documentTargetsIndex",X:!0,range:o},([l,m],v,D)=>{0!==l&&(u++,D.done())}).next(()=>u>0)}se(e,t){return gc(e).get(t).next(r=>r?ay(r):null)}}function gc(n){return ri(n,"targets")}function Px(n){return ri(n,"targetGlobal")}function jh(n){return ri(n,"targetDocuments")}function Fx([n,e],[t,r]){const o=Nt(n,t);return 0===o?Nt(e,r):o}class qN{constructor(e){this.xn=e,this.buffer=new wn(Fx),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Fx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class WN{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Ne("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,pe.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){oc(r)?Ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield sc(r)}yield t.Fn(3e5)}))}}class KN{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(Vr.at);const r=new qN(t);return this.$n.forEachTarget(e,o=>r.On(o.sequenceNumber)).next(()=>this.$n.Ln(e,o=>r.On(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(un)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),un):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,o,u,l,m,v,D;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),o=this.params.maximumSequenceNumbersToCollect):o=M,l=Date.now(),this.nthSequenceNumber(e,o))).next(M=>(r=M,m=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(D=Date.now(),pp()<=Pa.in.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-A}ms\n\tDetermined least recently used ${o} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(v-m)+`ms\n\tRemoved ${M} documents in `+(D-v)+`ms\nTotal Duration: ${D-A}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:M})))}}class ZN{constructor(e,t){this.db=e,this.garbageCollector=new KN(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,o)=>t(o))}addReference(e,t,r){return _D(e,r)}removeReference(e,t,r){return _D(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return _D(e,t)}Gn(e,t){return function(r,o){let u=!1;return cy(r).tt(l=>uy(r,l,o).next(m=>(m&&(u=!0),oe.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Kn(e,(l,m)=>{if(m<=t){const v=this.Gn(e,l).next(D=>{if(!D)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,xt.min()),jh(e).delete([0,jr(l.path)])))});o.push(v)}}).next(()=>oe.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return _D(e,t)}Kn(e,t){const r=jh(e);let o,u=Vr.at;return r.Z({index:"documentTargetsIndex"},([l,m],{path:v,sequenceNumber:D})=>{0===l?(u!==Vr.at&&t(new ze(mo(o)),u),u=D,o=v):u=Vr.at}).next(()=>{u!==Vr.at&&t(new ze(mo(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _D(n,e){return jh(n).put((r=n.currentSequenceNumber,{targetId:0,path:jr(e.path),sequenceNumber:r}));var r}class Lx{constructor(){this.changes=new lc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class YN{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Fp(e).put(r)}removeEntry(e,t,r){return Fp(e).delete(function(o,u){const l=o.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],oy(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Cn.newInvalidDocument(t);return Fp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(yw(t))},(o,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:Cn.newInvalidDocument(t)};return Fp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(yw(t))},(o,u)=>{r={document:this.jn(t,u),size:Uh(u)}}).next(()=>r)}getEntries(e,t){let r=Ui();return this.zn(e,t,(o,u)=>{const l=this.jn(o,u);r=r.insert(o,l)}).next(()=>r)}Hn(e,t){let r=Ui(),o=new Fn(ze.comparator);return this.zn(e,t,(u,l)=>{const m=this.jn(u,l);r=r.insert(u,m),o=o.insert(u,Uh(l))}).next(()=>({documents:r,Jn:o}))}zn(e,t,r){if(t.isEmpty())return oe.resolve();let o=new wn(jx);t.forEach(v=>o=o.add(v));const u=IDBKeyRange.bound(yw(o.first()),yw(o.last())),l=o.getIterator();let m=l.getNext();return Fp(e).Z({index:"documentKeyIndex",range:u},(v,D,A)=>{const M=ze.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;m&&jx(m,M)<0;)r(m,null),m=l.getNext();m&&m.isEqual(M)&&(r(m,D),m=l.hasNext()?l.getNext():null),m?A.j(yw(m)):A.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),oy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fp(e).W(IDBKeyRange.bound(o,u,!0)).next(l=>{let m=Ui();for(const v of l){const D=this.jn(ze.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);m=m.insert(D.key,D)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=Ui();const l=Bx(t,r),m=Bx(t,Vi.max());return Fp(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(v,D,A)=>{const M=this.jn(ze.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);u=u.insert(M.key,M),u.size===o&&A.done()}).next(()=>u)}newChangeBuffer(e){return new QN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Ux(e).get("remoteDocumentGlobalKey").next(t=>(bt(!!t),t))}Qn(e,t){return Ux(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function Ox(n,e){let t;if(e.document)t=Mp(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ze.fromSegments(e.noDocument.path),o=Lh(e.noDocument.readTime);t=Cn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return nt();{const r=ze.fromSegments(e.unknownDocument.path),o=Lh(e.unknownDocument.version);t=Cn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new zn(r[0],r[1]);return xt.fromTimestamp(o)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(xt.min()))return r}return Cn.newInvalidDocument(e)}}function Vx(n){return new YN(n)}class QN extends Lx{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new lc(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new wn((u,l)=>Nt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,m.readTime)),l.isValidDocument()){const v=mD(this.Yn.It,l);o=o.add(u.path.popLast()),r+=Uh(v)-m.size,t.push(this.Yn.addEntry(e,u,v))}else if(r-=m.size,this.trackRemovals){const v=mD(this.Yn.It,l.convertToNoDocument(xt.min()));t.push(this.Yn.addEntry(e,u,v))}}),o.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:o})=>(o.forEach((u,l)=>{this.Xn.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function Ux(n){return ri(n,"remoteDocumentGlobal")}function Fp(n){return ri(n,"remoteDocumentsV14")}function yw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Bx(n,e){const t=e.documentKey.path.toArray();return[n,oy(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function jx(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Nt(t[u],r[u]),o)return o;return o=Nt(t.length,r.length),o||(o=Nt(t[t.length-2],r[r.length-2]),o||Nt(t[t.length-1],r[r.length-1]))}class XN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class $x{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.getBaseDocument(e,t,r))).next(o=>(null!==r&&bp(r.mutation,o,Ci.empty(),zn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,$t()).next(()=>r))}getLocalViewOfDocuments(e,t,r=$t()){const o=Ls();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let l=Tp();return u.forEach((m,v)=>{l=l.insert(m,v.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Ls();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,$t()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,o){let u=Ui();const l=Oh(),m=Oh();return t.forEach((v,D)=>{const A=r.get(D.key);o.has(D.key)&&(void 0===A||A.mutation instanceof Ga)?u=u.insert(D.key,D):void 0!==A&&(l.set(D.key,A.mutation.getFieldMask()),bp(A.mutation,D,A.mutation.getFieldMask(),zn.now()))}),this.recalculateAndSaveOverlays(e,u).next(v=>(v.forEach((D,A)=>l.set(D,A)),t.forEach((D,A)=>{var M;return m.set(D,new XN(A,null!==(M=l.get(D))&&void 0!==M?M:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Oh();let o=new Fn((l,m)=>l-m),u=$t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(v=>{const D=t.get(v);if(null===D)return;let A=r.get(v)||Ci.empty();A=m.applyToLocalView(D,A),r.set(v,A);const M=(o.get(m.batchId)||$t()).add(v);o=o.insert(m.batchId,M)})}).next(()=>{const l=[],m=o.getReverseIterator();for(;m.hasNext();){const v=m.getNext(),D=v.key,A=v.value,M=sw();A.forEach(V=>{if(!u.has(V)){const W=KE(t.get(V),r.get(V));null!==W&&M.set(V,W),u=u.add(V)}}),l.push(this.documentOverlayCache.saveOverlays(e,D,M))}return oe.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return ze.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):qm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const l=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):oe.resolve(Ls());let m=-1,v=u;return l.next(D=>oe.forEach(D,(A,M)=>(m<M.largestBatchId&&(m=M.largestBatchId),u.get(A)?oe.resolve():this.getBaseDocument(e,A,M).next(V=>{v=v.insert(A,V)}))).next(()=>this.populateOverlays(e,D,u)).next(()=>this.computeViews(e,v,D,$t())).next(A=>({batchId:m,changes:JE(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ze(t)).next(r=>{let o=Tp();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=Tp();return this.indexManager.getCollectionParents(e,o).next(l=>oe.forEach(l,m=>{const v=(D=t,A=m.child(o),new $o(A,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,A;return this.getDocumentsMatchingCollectionQuery(e,v,r).next(D=>{D.forEach((A,M)=>{u=u.insert(A,M)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,v)=>{const D=v.getKey();null===o.get(D)&&(o=o.insert(D,Cn.newInvalidDocument(D)))});let l=Tp();return o.forEach((m,v)=>{const D=u.get(m);void 0!==D&&bp(D.mutation,v,Ci.empty(),zn.now()),Jv(t,v)&&(l=l.insert(m,v))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):oe.resolve(Cn.newInvalidDocument(t))}}class JN{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return oe.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Br(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:yD(r.bundledQuery),readTime:Br(r.readTime)}),oe.resolve();var r}}class eO{constructor(){this.overlays=new Fn(ze.comparator),this.es=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ls();return oe.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ue(e,t,u)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.es.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const o=Ls(),u=t.length+1,l=new ze(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const v=m.getNext().value,D=v.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===u&&v.largestBatchId>r&&o.set(v.getKey(),v)}return oe.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Fn((D,A)=>D-A);const l=this.overlays.getIterator();for(;l.hasNext();){const D=l.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let A=u.get(D.largestBatchId);null===A&&(A=Ls(),u=u.insert(D.largestBatchId,A)),A.set(D.getKey(),D)}}const m=Ls(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((D,A)=>m.set(D,A)),!(m.size()>=o)););return oe.resolve(m)}ue(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const l=this.es.get(o.largestBatchId).delete(r.key);this.es.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new fw(t,r));let u=this.es.get(t);void 0===u&&(u=$t(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class LT{constructor(){this.ns=new wn(pi.ss),this.rs=new wn(pi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new pi(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new pi(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new ze(new rn([])),r=new pi(t,e),o=new pi(t,e+1),u=[];return this.rs.forEachInRange([r,o],l=>{this.cs(l),u.push(l.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new ze(new rn([])),r=new pi(t,e),o=new pi(t,e+1);let u=$t();return this.rs.forEachInRange([r,o],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new pi(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class pi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return ze.comparator(e.key,t.key)||Nt(e._s,t._s)}static os(e,t){return Nt(e._s,t._s)||ze.comparator(e.key,t.key)}}class tO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new wn(pi.ss)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ws;this.ws++;const l=new sy(u,t,r,o);this.mutationQueue.push(l);for(const m of o)this.gs=this.gs.add(new pi(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return oe.resolve(l)}lookupMutationBatch(e,t){return oe.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ps(t+1),u=o<0?0:o;return oe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new pi(t,0),o=new pi(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,o],l=>{const m=this.ys(l._s);u.push(m)}),oe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wn(Nt);return t.forEach(o=>{const u=new pi(o,0),l=new pi(o,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,l],m=>{r=r.add(m._s)})}),oe.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;ze.isDocumentKey(u)||(u=u.child(""));const l=new pi(new ze(u),0);let m=new wn(Nt);return this.gs.forEachWhile(v=>{const D=v.key.path;return!!r.isPrefixOf(D)&&(D.length===o&&(m=m.add(v._s)),!0)},l),oe.resolve(this.Is(m))}Is(e){const t=[];return e.forEach(r=>{const o=this.ys(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){bt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return oe.forEach(t.mutations,o=>{const u=new pi(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new pi(t,0),o=this.gs.firstAfterOrEqual(r);return oe.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return oe.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class nO{constructor(e){this.Es=e,this.docs=new Fn(ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():Cn.newInvalidDocument(t))}getEntries(e,t){let r=Ui();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Cn.newInvalidDocument(o))}),oe.resolve(r)}getAllFromCollection(e,t,r){let o=Ui();const u=new ze(t.child("")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){const{key:m,value:{document:v}}=l.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||Vm(Pv(v),r)<=0||(o=o.insert(v.key,v.mutableCopy()))}return oe.resolve(o)}getAllFromCollectionGroup(e,t,r,o){nt()}As(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new rO(this)}getSize(e){return oe.resolve(this.size)}}class rO extends Lx{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Yn.addEntry(e,o)):this.Yn.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class iO{constructor(e){this.persistence=e,this.Rs=new lc(t=>Wl(t),Ch),this.lastRemoteSnapshotVersion=xt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new LT,this.targetCount=0,this.vs=za.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,o)=>t(o)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),oe.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new za(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Dn(t),oe.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Rs.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Rs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),oe.waitFor(u).next(()=>o)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(l=>{u.push(o.markPotentiallyOrphaned(e,l))}),oe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.Ps.containsKey(t))}}class Hx{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Vr(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new iO(this),this.indexManager=new H,this.remoteDocumentCache=new nO(r=>this.referenceDelegate.xs(r)),this.It=new RT(t),this.Ns=new JN(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new eO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new tO(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ne("MemoryPersistence","Starting transaction:",e);const o=new sO(this.Ss.next());return this.referenceDelegate.ks(),r(o).next(u=>this.referenceDelegate.Os(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ms(e,t){return oe.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class sO extends Lv{constructor(e){super(),this.currentSequenceNumber=e}}class vD{constructor(e){this.persistence=e,this.Fs=new LT,this.$s=null}static Bs(e){return new vD(e)}get Ls(){if(this.$s)return this.$s;throw nt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(o=>this.Ls.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Ls,r=>{const o=ze.fromPath(r);return this.Us(e,o).next(u=>{u||t.removeEntry(o,xt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return oe.or([()=>oe.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class oO{constructor(e){this.It=e}$(e,t,r,o){const u=new Um("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dc,{unique:!0}),m.createObjectStore("documentMutations"),Gx(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=oe.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),Gx(e)),l=l.next(()=>function(m){const v=m.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:xt.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",D)}(u))),r<4&&o>=4&&(0!==r&&(l=l.next(()=>function(m,v){return v.store("mutations").W().next(D=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dc,{unique:!0});const A=v.store("mutations"),M=D.map(V=>A.put(V));return oe.waitFor(M)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(l=l.next(()=>this.qs(u))),r<6&&o>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&o>=7&&(l=l.next(()=>this.Gs(u))),r<8&&o>=8&&(l=l.next(()=>this.Qs(e,u))),r<9&&o>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(l=l.next(()=>this.js(u))),r<11&&o>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(l=l.next(()=>{!function(m){const v=m.createObjectStore("documentOverlays",{keyPath:xT});v.createIndex("collectionPathOverlayIndex",MT,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",dD,{unique:!1})}(e)})),r<13&&o>=13&&(l=l.next(()=>function(m){const v=m.createObjectStore("remoteDocumentsV14",{keyPath:TT});v.createIndex("documentKeyIndex",lw),v.createIndex("collectionGroupIndex",dw)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(l=l.next(()=>this.zs(e,u))),r<15&&o>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:Nx}).createIndex("sequenceNumberIndex",lD,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:ST}).createIndex("documentKeyIndex",AT,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,o)=>{t+=Uh(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>oe.forEach(o,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(m=>oe.forEach(m,v=>{bt(v.userId===u.userId);const D=Vh(this.It,v);return fc(e,u.userId,D).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Z((l,m)=>{const v=new rn(l),D=[0,jr(v)];u.push(t.get(D).next(A=>A?oe.resolve():t.put({targetId:0,path:jr(v),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>oe.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Rx});const r=t.store("collectionParents"),o=new X,u=l=>{if(o.add(l)){const m=l.lastSegment(),v=l.popLast();return r.put({collectionId:m,parent:jr(v)})}};return t.store("remoteDocuments").Z({X:!0},(l,m)=>{const v=new rn(l);return u(v.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,m,v],D)=>{const A=mo(m);return u(A.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,o)=>{const u=ay(o),l=NT(this.It,u);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),o=[];return r.Z((u,l)=>{const m=t.store("remoteDocumentsV14"),v=(D=l,D.document?new ze(rn.fromString(D.document.name).popFirst(5)):D.noDocument?ze.fromSegments(D.noDocument.path):D.unknownDocument?ze.fromSegments(D.unknownDocument.path):nt()).path.toArray();var D;const A={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};o.push(m.put(A))}).next(()=>oe.waitFor(o))}zs(e,t){const r=t.store("mutations"),o=Vx(this.It),u=new Hx(vD.Bs,this.It.re);return r.W().next(l=>{const m=new Map;return l.forEach(v=>{var D;let A=null!==(D=m.get(v.userId))&&void 0!==D?D:$t();Vh(this.It,v).keys().forEach(M=>A=A.add(M)),m.set(v.userId,A)}),oe.forEach(m,(v,D)=>{const A=new _r(D),M=gw.oe(this.It,A),V=u.getIndexManager(A),W=Bh.oe(A,this.It,V,u.referenceDelegate);return new $x(o,W,M,V).recalculateAndSaveOverlaysForDocumentKeys(new kp(t,Vr.at),v).next()})})}}function Gx(n){n.createObjectStore("targetDocuments",{keyPath:xx}).createIndex("documentTargetsIndex",Mx,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",iy,{unique:!0}),n.createObjectStore("targetGlobal")}const VT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class UT{constructor(e,t,r,o,u,l,m,v,D,A,M=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=l,this.document=m,this.Js=D,this.Ys=A,this.Xs=M,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=V=>Promise.resolve(),!UT.C())throw new Re(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ZN(this,o),this.ii=t+"main",this.It=new RT(v),this.ri=new ho(this.ii,this.Xs,new oO(this.It)),this.Cs=new mw(this.referenceDelegate,this.It),this.remoteDocumentCache=Vx(this.It),this.Ns=new kx,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===A&&An("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ue.FAILED_PRECONDITION,VT);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Vr(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,pe.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,pe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,pe.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>wD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(oc(e))return Ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return _w(e).get("owner").next(t=>oe.resolve(this.mi(t)))}gi(e){return wD(e).delete(this.clientId)}yi(){var e=this;return(0,pe.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=ri(r,"clientMetadata");return o.W().next(u=>{const l=e.Ii(u,18e5),m=u.filter(v=>-1===l.indexOf(v));return oe.forEach(m,v=>o.delete(v.clientId)).next(()=>m)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?oe.resolve(!0):_w(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Re(ue.FAILED_PRECONDITION,VT);return!1}}return!(!this.networkEnabled||!this.inForeground)||wD(e).W().next(r=>void 0===this.Ii(r,5e3).find(o=>{if(this.clientId!==o.clientId){const l=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||l&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ne("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,pe.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new kp(t,Vr.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>wD(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Bh.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Pe(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return gw.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ne("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(l=this.Xs)?gD:14===l?pD:13===l?fD:12===l?hD:11===l?hw:void nt();var l;let m;return this.ri.runTransaction(e,o,u,v=>(m=new kp(v,this.Ss?this.Ss.next():Vr.at),"readwrite-primary"===t?this.fi(m).next(D=>!!D||this.di(m)).next(D=>{if(!D)throw An(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Re(ue.FAILED_PRECONDITION,Fv);return r(m)}).next(D=>this.wi(m).next(()=>D)):this.Vi(m).next(()=>r(m)))).then(v=>(m.raiseOnCommittedEvent(),v))}Vi(e){return _w(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ue.FAILED_PRECONDITION,VT)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return _w(e).put("owner",t)}static C(){return ho.C()}_i(e){const t=_w(e);return t.get("owner").next(r=>this.mi(r)?(Ne("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(An(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Ut.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ne("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return An("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){An("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function _w(n){return ri(n,"owner")}function wD(n){return ri(n,"clientMetadata")}function BT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class jT{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=o}static Ci(e,t){let r=$t(),o=$t();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new jT(e,t.fromCache,r,o)}}class zx{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.ki(e,t).next(u=>u||this.Oi(e,t,o,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(Kv(t))return oe.resolve(null);let r=fi(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=Dp(t,null,"F"),r=fi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=$t(...u);return this.Ni.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(v=>{const D=this.Fi(t,m);return this.$i(t,D,l,v.readTime)?this.ki(e,Dp(t,null,"F")):this.Bi(e,D,t,v)}))})))}Oi(e,t,r,o){return Kv(t)||o.isEqual(xt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const l=this.Fi(t,u);return this.$i(t,l,r,o)?this.Mi(e,t):(pp()<=Pa.in.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Xv(t)),this.Bi(e,l,t,Eh(o,-1)))})}Fi(e,t){let r=new wn(ew(e));return t.forEach((o,u)=>{Jv(e,u)&&(r=r.add(u))}),r}$i(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Mi(e,t){return pp()<=Pa.in.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",Xv(t)),this.Ni.getDocumentsMatchingQuery(e,t,Vi.min())}Bi(e,t,r,o){return this.Ni.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class aO{constructor(e,t,r,o){this.persistence=e,this.Li=t,this.It=o,this.Ui=new Fn(Nt),this.qi=new lc(u=>Wl(u),Ch),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $x(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function qx(n,e,t,r){return new aO(n,e,t,r)}function Wx(n,e){return $T.apply(this,arguments)}function $T(){return $T=(0,pe.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let v=$t();for(const D of o){l.push(D.batchId);for(const A of D.mutations)v=v.add(A.key)}for(const D of u){m.push(D.batchId);for(const A of D.mutations)v=v.add(A.key)}return t.localDocuments.getDocuments(r,v).next(D=>({ji:D,removedBatchIds:l,addedBatchIds:m}))})})}),$T.apply(this,arguments)}function uO(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,m,v,D){const A=v.batch,M=A.keys();let V=oe.resolve();return M.forEach(W=>{V=V.next(()=>D.getEntry(m,W)).next(ee=>{const xe=v.docVersions.get(W);bt(null!==xe),ee.version.compareTo(xe)<0&&(A.applyToRemoteDocument(ee,v),ee.isValidDocument()&&(ee.setReadTime(v.commitVersion),D.addEntry(ee)))})}),V.next(()=>l.mutationQueue.removeMutationBatch(m,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=$t();for(let v=0;v<l.mutationResults.length;++v)l.mutationResults[v].transformResults.length>0&&(m=m.add(l.batch.mutations[v].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function Kx(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function cO(n,e){const t=qe(n),r=e.snapshotVersion;let o=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});o=t.Ui;const m=[];e.targetChanges.forEach((A,M)=>{const V=o.get(M);if(!V)return;m.push(t.Cs.removeMatchingKeys(u,A.removedDocuments,M).next(()=>t.Cs.addMatchingKeys(u,A.addedDocuments,M)));let W=V.withSequenceNumber(u.currentSequenceNumber);var ee,xe,Ee;e.targetMismatches.has(M)?W=W.withResumeToken(br.EMPTY_BYTE_STRING,xt.min()).withLastLimboFreeSnapshotVersion(xt.min()):A.resumeToken.approximateByteSize()>0&&(W=W.withResumeToken(A.resumeToken,r)),o=o.insert(M,W),xe=W,Ee=A,(0===(ee=V).resumeToken.approximateByteSize()||xe.snapshotVersion.toMicroseconds()-ee.snapshotVersion.toMicroseconds()>=3e8||Ee.addedDocuments.size+Ee.modifiedDocuments.size+Ee.removedDocuments.size>0)&&m.push(t.Cs.updateTargetData(u,W))});let v=Ui(),D=$t();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),m.push(Zx(u,l,e.documentUpdates).next(A=>{v=A.Wi,D=A.zi})),!r.isEqual(xt.min())){const A=t.Cs.getLastRemoteSnapshotVersion(u).next(M=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(A)}return oe.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,v,D)).next(()=>v)}).then(u=>(t.Ui=o,u))}function Zx(n,e,t){let r=$t(),o=$t();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=Ui();return t.forEach((m,v)=>{const D=u.get(m);v.isFoundDocument()!==D.isFoundDocument()&&(o=o.add(m)),v.isNoDocument()&&v.version.isEqual(xt.min())?(e.removeEntry(m,v.readTime),l=l.insert(m,v)):!D.isValidDocument()||v.version.compareTo(D.version)>0||0===v.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(v),l=l.insert(m,v)):Ne("LocalStore","Ignoring outdated watch update for ",m,". Current version:",D.version," Watch version:",v.version)}),{Wi:l,zi:o}})}function lO(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ly(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Cs.getTargetData(r,e).next(u=>u?(o=u,oe.resolve(o)):t.Cs.allocateTargetId(r).next(l=>(o=new hc(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function dy(n,e,t){return HT.apply(this,arguments)}function HT(){return HT=(0,pe.Z)(function*(n,e,t){const r=qe(n),o=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,o)))}catch(l){if(!oc(l))throw l;Ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(o.target)}),HT.apply(this,arguments)}function ID(n,e,t){const r=qe(n);let o=xt.min(),u=$t();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,v,D){const A=qe(m),M=A.qi.get(D);return void 0!==M?oe.resolve(A.Ui.get(M)):A.Cs.getTargetData(v,D)}(r,l,fi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,m.targetId).next(v=>{u=v})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?o:xt.min(),t?u:$t())).next(m=>(Xx(r,nT(e),m),{documents:m,Hi:u})))}function Yx(n,e){const t=qe(n),r=qe(t.Cs),o=t.Ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(l=>l?l.target:null))}function Qx(n,e){const t=qe(n),r=t.Ki.get(e)||xt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Gi.getAllFromCollectionGroup(o,e,Eh(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(Xx(t,e,o),o))}function Xx(n,e,t){let r=n.Ki.get(e)||xt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function GT(){return GT=(0,pe.Z)(function*(n,e,t,r){const o=qe(n);let u=$t(),l=Ui();for(const D of t){const A=e.Ji(D.metadata.name);D.document&&(u=u.add(A));const M=e.Yi(D);M.setReadTime(e.Xi(D.metadata.readTime)),l=l.insert(A,M)}const m=o.Gi.newChangeBuffer({trackRemovals:!0}),v=yield ly(o,(D=r,fi(Yl(rn.fromString(`__bundle__/docs/${D}`)))));var D;return o.persistence.runTransaction("Apply bundle documents","readwrite",D=>Zx(D,m,l).next(A=>(m.apply(D),A)).next(A=>o.Cs.removeMatchingKeysForTargetId(D,v.targetId).next(()=>o.Cs.addMatchingKeys(D,u,v.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(D,A.Wi,A.zi)).next(()=>A.Wi)))}),GT.apply(this,arguments)}function hO(n,e){return zT.apply(this,arguments)}function zT(){return zT=(0,pe.Z)(function*(n,e,t=$t()){const r=yield ly(n,fi(yD(e.bundledQuery))),o=qe(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const l=Br(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return o.Ns.saveNamedQuery(u,e);const m=r.withResumeToken(br.EMPTY_BYTE_STRING,l);return o.Ui=o.Ui.insert(m.targetId,m),o.Cs.updateTargetData(u,m).next(()=>o.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ns.saveNamedQuery(u,e))})}),zT.apply(this,arguments)}function Jx(n,e){return`firestore_clients_${n}_${e}`}function eM(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function qT(n,e){return`firestore_targets_${n}_${e}`}class ED{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Zi(e,t,r){const o=JSON.parse(r);let u,l="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(u=new Re(o.error.code,o.error.message))),l?new ED(e,t,o.state,u):(An("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Re(r.error.code,r.error.message))),u?new vw(e,r.state,o):(An("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class DD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Sp();for(let l=0;o&&l<r.activeTargetIds.length;++l)o=jv(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return o?new DD(e,u):(An("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class WT{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new WT(t.clientId,t.onlineState):(An("SharedClientState",`Failed to parse online state: ${e}`),null)}}class KT{constructor(){this.activeTargetIds=Sp()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZT{constructor(e,t,r,o,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Fn(Nt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=Jx(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new KT),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,pe.Z)(function*(){const t=yield e.syncEngine.vi();for(const o of t){if(o===e.sr)continue;const u=e.getItem(Jx(e.persistenceKey,o));if(u){const l=DD.Zi(o,u);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const o=e.yr(r);o&&e.pr(o)}for(const o of e.cr)e.rr(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(qT(this.persistenceKey,e));if(r){const o=vw.Zi(e,r);o&&(t=o.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(qT(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Er(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ne("SharedClientState","READ",e,t),t}setItem(e,t){Ne("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ne("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void An("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,pe.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Vr(o,null)}{const o=t.Sr(r.key,r.newValue);if(o)return t.Vr(o.clientId,o)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(r.key===t.wr){if(null!==r.newValue){const o=t.yr(r.newValue);if(o)return t.pr(o)}}else if(r.key===t.hr){const o=function(u){let l=Vr.at;if(null!=u)try{const m=JSON.parse(u);bt("number"==typeof m),l=m}catch(m){An("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);o!==Vr.at&&t.sequenceNumberHandler(o)}else if(r.key===t.mr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const o=new ED(this.currentUser,e,t,r),u=eM(this.persistenceKey,this.currentUser,e);this.setItem(u,o.tr())}Er(e){const t=eM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const o=qT(this.persistenceKey,e),u=new vw(e,t,r);this.setItem(o,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return DD.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),o=Number(r[1]);return ED.Zi(new _r(void 0!==r[2]?r[2]:null),o,t)}Nr(e,t){const r=this._r.exec(e),o=Number(r[1]);return vw.Zi(o,t)}yr(e){return WT.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,pe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),o=this.Ir(this.ur),u=this.Ir(r),l=[],m=[];return u.forEach(v=>{o.has(v)||l.push(v)}),o.forEach(v=>{u.has(v)||m.push(v)}),this.syncEngine.Br(l,m).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Sp();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class tM{constructor(){this.Lr=new KT,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new KT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class fO{qr(e){}shutdown(){}}class nM{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const pO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gO{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class mO extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,o,u){const l=this.ho(e,t);Ne("RestConnection","Sending: ",l,r);const m={};return this.lo(m,o,u),this.fo(e,l,m,r).then(v=>(Ne("RestConnection","Received: ",v),v),v=>{throw ic("RestConnection",`${e} failed with error: `,v,"url: ",l,"request:",r),v})}_o(e,t,r,o,u,l){return this.ao(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+wh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.oo}/v1/${t}:${pO[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,l)=>{const m=new Mv;m.setWithCredentials(!0),m.listenOnce(bE.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case xv.NO_ERROR:const D=m.getResponseJson();Ne("Connection","XHR received:",JSON.stringify(D)),u(D);break;case xv.TIMEOUT:Ne("Connection",'RPC "'+e+'" timed out'),l(new Re(ue.DEADLINE_EXCEEDED,"Request time out"));break;case xv.HTTP_ERROR:const A=m.getStatus();if(Ne("Connection",'RPC "'+e+'" failed with status:',A,"response text:",m.getResponseText()),A>0){const M=m.getResponseJson().error;if(M&&M.status&&M.message){const V=function(W){const ee=W.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(ee)>=0?ee:ue.UNKNOWN}(M.status);l(new Re(V,M.message))}else l(new Re(ue.UNKNOWN,"Server responded with status "+m.getStatus()))}else l(new Re(ue.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{Ne("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(o);m.send(t,"POST",v,r,15)})}wo(e,t,r){const o=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=DE(),l=FC(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new VC({})),this.lo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const v=o.join("");Ne("Connection","Creating WebChannel: "+v,m);const D=u.createWebChannel(v,m);let A=!1,M=!1;const V=new gO({Hr:ee=>{M?Ne("Connection","Not sending because WebChannel is closed:",ee):(A||(Ne("Connection","Opening WebChannel transport."),D.open(),A=!0),Ne("Connection","WebChannel sending:",ee),D.send(ee))},Jr:()=>D.close()}),W=(ee,xe,Ee)=>{ee.listen(xe,gt=>{try{Ee(gt)}catch(vt){setTimeout(()=>{throw vt},0)}})};return W(D,vh.EventType.OPEN,()=>{M||Ne("Connection","WebChannel transport opened.")}),W(D,vh.EventType.CLOSE,()=>{M||(M=!0,Ne("Connection","WebChannel transport closed"),V.io())}),W(D,vh.EventType.ERROR,ee=>{M||(M=!0,ic("Connection","WebChannel transport errored:",ee),V.io(new Re(ue.UNAVAILABLE,"The operation could not be completed")))}),W(D,vh.EventType.MESSAGE,ee=>{var xe;if(!M){const Ee=ee.data[0];bt(!!Ee);const gt=Ee,vt=gt.error||(null===(xe=gt[0])||void 0===xe?void 0:xe.error);if(vt){Ne("Connection","WebChannel received error:",vt);const dt=vt.status;let ot=function(kt){const lr=Sr[kt];if(void 0!==lr)return Qm(lr)}(dt),Tt=vt.message;void 0===ot&&(ot=ue.INTERNAL,Tt="Unknown error status: "+dt+" with message "+vt.message),M=!0,V.io(new Re(ot,Tt)),D.close()}else Ne("Connection","WebChannel received:",Ee),V.ro(Ee)}}),W(l,LC.STAT_EVENT,ee=>{ee.stat===CE.PROXY?Ne("Connection","Detected buffering proxy"):ee.stat===CE.NOPROXY&&Ne("Connection","Detected no buffering proxy")}),setTimeout(()=>{V.so()},0),V}}function rM(){return typeof window<"u"?window:null}function bD(){return typeof document<"u"?document:null}function ww(n){return new yT(n,!0)}class YT{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Ne("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class iM{constructor(e,t,r,o,u,l,m,v){this.Hs=e,this.vo=r,this.Vo=o,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=v,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new YT(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,pe.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,pe.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,pe.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(An(t.toString()),An("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.So===t&&this.Go(r,o)},r=>{e(()=>{const o=new Re(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(o)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(o=>{r(()=>this.Qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,pe.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yO extends iM{constructor(e,t,r,o,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,l),this.It=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function wT(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:nt(),o=e.targetChange.targetIds||[],u=function(v,D){return v.gt?(bt(void 0===D||"string"==typeof D),br.fromBase64String(D||"")):(bt(void 0===D||D instanceof Uint8Array),br.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(v){const D=void 0===v.code?ue.UNKNOWN:Qm(v.code);return new Re(D,v.message||"")}(l);t=new Jm(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=go(n,r.document.name),u=Br(r.document.updateTime),l=new Tr({mapValue:{fields:r.document.fields}}),m=Cn.newFoundDocument(o,u,l);t=new po(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=go(n,r.document),u=r.readTime?Br(r.readTime):xt.min(),l=Cn.newNoDocument(o,u);t=new po([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,o=go(n,r.document);t=new po([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return nt();{const r=e.filter,u=new QE(r.count||0);t=new ow(r.targetId,u)}}var v;return t}(this.It,e),r=function(o){if(!("targetChange"in o))return xt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?xt.min():u.readTime?Br(u.readTime):xt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Ph(this.It),t.addTarget=function(o,u){let l;const m=u.target;return l=Ep(m)?{documents:iD(o,m)}:{query:sD(o,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?l.resumeToken=_T(o,u.resumeToken):u.snapshotVersion.compareTo(xt.min())>0&&(l.readTime=kh(o,u.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function oD(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return nt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Ph(this.It),t.removeTarget=e,this.Bo(t)}}class _O extends iM{constructor(e,t,r,o,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,l),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function IT(n,e){return n&&n.length>0?(bt(void 0!==e),n.map(t=>function(r,o){let u=Br(r.updateTime?r.updateTime:o);return u.isEqual(xt.min())&&(u=Br(o)),new WE(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Br(e.commitTime);return this.listener.Zo(r,t)}return bt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Ph(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Fh(this.It,r))};this.Bo(t)}}class vO extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=o,this.nu=!1}su(){if(this.nu)throw new Re(ue.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.ao(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(ue.UNKNOWN,o.toString())})}_o(e,t,r,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection._o(e,t,r,u,l,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Re(ue.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class IO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(An(t),this.ou=!1):Ne("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class EO{constructor(e,t,r,o,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(m=>{r.enqueueAndForget((0,pe.Z)(function*(){var v;td(l)&&(Ne("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,pe.Z)(function*(D){const A=qe(D);A._u.add(4),yield hy(A),A.gu.set("Unknown"),A._u.delete(4),yield Iw(A)}),function(D){return v.apply(this,arguments)})(l))}))}),this.gu=new IO(r,o)}}function Iw(n){return XT.apply(this,arguments)}function XT(){return XT=(0,pe.Z)(function*(n){if(td(n))for(const e of n.wu)yield e(!0)}),XT.apply(this,arguments)}function hy(n){return JT.apply(this,arguments)}function JT(){return JT=(0,pe.Z)(function*(n){for(const e of n.wu)yield e(!1)}),JT.apply(this,arguments)}function CD(n,e){const t=qe(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),nS(t)?tS(t):py(t).ko()&&eS(t,e))}function Ew(n,e){const t=qe(n),r=py(t);t.du.delete(e),r.ko()&&sM(t,e),0===t.du.size&&(r.ko()?r.Fo():td(t)&&t.gu.set("Unknown"))}function eS(n,e){n.yu.Mt(e.targetId),py(n).zo(e)}function sM(n,e){n.yu.Mt(e),py(n).Ho(e)}function tS(n){n.yu=new fT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),py(n).start(),n.gu.uu()}function nS(n){return td(n)&&!py(n).No()&&n.du.size>0}function td(n){return 0===qe(n)._u.size}function oM(n){n.yu=void 0}function DO(n){return rS.apply(this,arguments)}function rS(){return rS=(0,pe.Z)(function*(n){n.du.forEach((e,t)=>{eS(n,e)})}),rS.apply(this,arguments)}function bO(n,e){return iS.apply(this,arguments)}function iS(){return iS=(0,pe.Z)(function*(n,e){oM(n),nS(n)?(n.gu.hu(e),tS(n)):n.gu.set("Unknown")}),iS.apply(this,arguments)}function CO(n,e,t){return sS.apply(this,arguments)}function sS(){return sS=(0,pe.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof Jm&&2===e.state&&e.cause)try{yield(r=(0,pe.Z)(function*(o,u){const l=u.cause;for(const m of u.targetIds)o.du.has(m)&&(yield o.remoteSyncer.rejectListen(m,l),o.du.delete(m),o.yu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield TD(n,r)}else if(e instanceof po?n.yu.Gt(e):e instanceof ow?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(xt.min()))try{const r=yield Kx(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const l=o.yu.te(u);return l.targetChanges.forEach((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const D=o.du.get(v);D&&o.du.set(v,D.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach(m=>{const v=o.du.get(m);if(!v)return;o.du.set(m,v.withResumeToken(br.EMPTY_BYTE_STRING,v.snapshotVersion)),sM(o,m);const D=new hc(v.target,m,1,v.sequenceNumber);eS(o,D)}),o.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ne("RemoteStore","Failed to raise snapshot:",r),yield TD(n,r)}var r}),sS.apply(this,arguments)}function TD(n,e,t){return oS.apply(this,arguments)}function oS(){return oS=(0,pe.Z)(function*(n,e,t){if(!oc(e))throw e;n._u.add(1),yield hy(n),n.gu.set("Offline"),t||(t=()=>Kx(n.localStore)),n.asyncQueue.enqueueRetryable((0,pe.Z)(function*(){Ne("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Iw(n)}))}),oS.apply(this,arguments)}function aM(n,e){return e().catch(t=>TD(n,t,e))}function fy(n){return aS.apply(this,arguments)}function aS(){return aS=(0,pe.Z)(function*(n){const e=qe(n),t=$h(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;TO(e);)try{const o=yield lO(e.localStore,r);if(null===o){0===e.fu.length&&t.Fo();break}r=o.batchId,SO(e,o)}catch(o){yield TD(e,o)}uM(e)&&cM(e)}),aS.apply(this,arguments)}function TO(n){return td(n)&&n.fu.length<10}function SO(n,e){n.fu.push(e);const t=$h(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function uM(n){return td(n)&&!$h(n).No()&&n.fu.length>0}function cM(n){$h(n).start()}function AO(n){return uS.apply(this,arguments)}function uS(){return uS=(0,pe.Z)(function*(n){$h(n).eu()}),uS.apply(this,arguments)}function xO(n){return cS.apply(this,arguments)}function cS(){return cS=(0,pe.Z)(function*(n){const e=$h(n);for(const t of n.fu)e.Xo(t.mutations)}),cS.apply(this,arguments)}function MO(n,e,t){return lS.apply(this,arguments)}function lS(){return lS=(0,pe.Z)(function*(n,e,t){const r=n.fu.shift(),o=Pp.from(r,e,t);yield aM(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield fy(n)}),lS.apply(this,arguments)}function RO(n,e){return dS.apply(this,arguments)}function dS(){return dS=(0,pe.Z)(function*(n,e){var t;e&&$h(n).Yo&&(yield(t=(0,pe.Z)(function*(r,o){if(XE(u=o.code)&&u!==ue.ABORTED){const l=r.fu.shift();$h(r).Mo(),yield aM(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),yield fy(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),uM(n)&&cM(n)}),dS.apply(this,arguments)}function lM(n,e){return hS.apply(this,arguments)}function hS(){return hS=(0,pe.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Ne("RemoteStore","RemoteStore received new credentials");const r=td(t);t._u.add(3),yield hy(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Iw(t)}),hS.apply(this,arguments)}function fS(n,e){return pS.apply(this,arguments)}function pS(){return pS=(0,pe.Z)(function*(n,e){const t=qe(n);e?(t._u.delete(2),yield Iw(t)):e||(t._u.add(2),yield hy(t),t.gu.set("Unknown"))}),pS.apply(this,arguments)}function py(n){return n.pu||(n.pu=function(e,t,r){const o=qe(e);return o.su(),new yO(t,o.connection,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:DO.bind(null,n),Zr:bO.bind(null,n),Wo:CO.bind(null,n)}),n.wu.push(function(){var e=(0,pe.Z)(function*(t){t?(n.pu.Mo(),nS(n)?tS(n):n.gu.set("Unknown")):(yield n.pu.stop(),oM(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function $h(n){return n.Iu||(n.Iu=function(e,t,r){const o=qe(e);return o.su(),new _O(t,o.connection,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:AO.bind(null,n),Zr:RO.bind(null,n),tu:xO.bind(null,n),Zo:MO.bind(null,n)}),n.wu.push(function(){var e=(0,pe.Z)(function*(t){t?(n.Iu.Mo(),yield fy(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ne("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class gS{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,o,u){const l=Date.now()+r,m=new gS(e,t,l,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gy(n,e){if(An("AsyncQueue",`${e}: ${n}`),oc(n))return new Re(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class my{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ze.comparator(t.key,r.key):(t,r)=>ze.comparator(t.key,r.key),this.keyedMap=Tp(),this.sortedSet=new Fn(this.comparator)}static emptySet(e){return new my(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof my)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new my;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class dM{constructor(){this.Tu=new Fn(ze.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):nt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class yy{constructor(e,t,r,o,u,l,m,v,D){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=v,this.hasCachedResults=D}static fromInitialDocuments(e,t,r,o,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new yy(e,t,my.emptySet(t),l,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class NO{constructor(){this.Au=void 0,this.listeners=[]}}class OO{constructor(){this.queries=new lc(e=>Qv(e),xh),this.onlineState="Unknown",this.Ru=new Set}}function mS(n,e){return yS.apply(this,arguments)}function yS(){return yS=(0,pe.Z)(function*(n,e){const t=qe(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new NO),o)try{u.Au=yield t.onListen(r)}catch(l){const m=gy(l,`Initialization of query '${Xv(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&wS(t)}),yS.apply(this,arguments)}function _S(n,e){return vS.apply(this,arguments)}function vS(){return vS=(0,pe.Z)(function*(n,e){const t=qe(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),vS.apply(this,arguments)}function kO(n,e){const t=qe(n);let r=!1;for(const o of e){const l=t.queries.get(o.query);if(l){for(const m of l.listeners)m.Pu(o)&&(r=!0);l.Au=o}}r&&wS(t)}function PO(n,e,t){const r=qe(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function wS(n){n.Ru.forEach(e=>{e.next()})}class IS{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new yy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=yy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class FO{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class hM{constructor(e){this.It=e}Ji(e){return go(this.It,e)}Yi(e){return e.metadata.exists?Mp(this.It,e.document,!1):Cn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Br(e)}}class LO{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=fM(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=rn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new hM(this.It);for(const o of e)if(o.metadata.queries){const u=r.Ji(o.metadata.name);for(const l of o.metadata.queries){const m=(t.get(l)||$t()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,pe.Z)(function*(){const t=yield function dO(n,e,t,r){return GT.apply(this,arguments)}(e.localStore,new hM(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const o of e.queries)yield hO(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function fM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class pM{constructor(e){this.key=e}}class gM{constructor(e){this.key=e}}class mM{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=$t(),this.mutatedKeys=$t(),this.Gu=ew(e),this.Qu=new my(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new dM,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,l=o,m=!1;const v="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,D="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,M)=>{const V=o.get(A),W=Jv(this.query,M)?M:null,ee=!!V&&this.mutatedKeys.has(V.key),xe=!!W&&(W.hasLocalMutations||this.mutatedKeys.has(W.key)&&W.hasCommittedMutations);let Ee=!1;V&&W?V.data.isEqual(W.data)?ee!==xe&&(r.track({type:3,doc:W}),Ee=!0):this.Hu(V,W)||(r.track({type:2,doc:W}),Ee=!0,(v&&this.Gu(W,v)>0||D&&this.Gu(W,D)<0)&&(m=!0)):!V&&W?(r.track({type:0,doc:W}),Ee=!0):V&&!W&&(r.track({type:1,doc:V}),Ee=!0,(v||D)&&(m=!0)),Ee&&(W?(l=l.add(W),u=xe?u.add(A):u.delete(A)):(l=l.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const A="F"===this.query.limitType?l.last():l.first();l=l.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Qu:l,zu:r,$i:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((D,A)=>function(M,V){const W=ee=>{switch(ee){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}};return W(M)-W(V)}(D.type,A.type)||this.Gu(D.doc,A.doc)),this.Ju(r);const l=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,v=m!==this.qu;return this.qu=m,0!==u.length||v?{snapshot:new yy(this.query,e.Qu,o,u,e.mutatedKeys,0===m,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new dM,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=$t(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new gM(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new pM(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=$t();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return yy.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class VO{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class UO{constructor(e){this.key=e,this.nc=!1}}class BO{constructor(e,t,r,o,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new lc(m=>Qv(m),xh),this.rc=new Map,this.oc=new Set,this.uc=new Fn(ze.comparator),this.cc=new Map,this.ac=new LT,this.hc={},this.lc=new Map,this.fc=za.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function jO(n,e){return ES.apply(this,arguments)}function ES(){return ES=(0,pe.Z)(function*(n,e){const t=zS(n);let r,o;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ec();else{const l=yield ly(t.localStore,fi(e));t.isPrimaryClient&&CD(t.remoteStore,l);const m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,o=yield DS(t,e,r,"current"===m,l.resumeToken)}return o}),ES.apply(this,arguments)}function DS(n,e,t,r,o){return bS.apply(this,arguments)}function bS(){return bS=(0,pe.Z)(function*(n,e,t,r,o){n._c=(M,V,W)=>{return(ee=(0,pe.Z)(function*(xe,Ee,gt,vt){let dt=Ee.view.Wu(gt);dt.$i&&(dt=yield ID(xe.localStore,Ee.query,!1).then(({documents:kt})=>Ee.view.Wu(kt,dt)));const ot=vt&&vt.targetChanges.get(Ee.targetId),Tt=Ee.view.applyChanges(dt,xe.isPrimaryClient,ot);return kS(xe,Ee.targetId,Tt.Xu),Tt.snapshot}),function(xe,Ee,gt,vt){return ee.apply(this,arguments)})(n,M,V,W);var ee};const u=yield ID(n.localStore,e,!0),l=new mM(e,u.Hi),m=l.Wu(u.documents),v=Xl.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),D=l.applyChanges(m,n.isPrimaryClient,v);kS(n,t,D.Xu);const A=new VO(e,t,l);return n.ic.set(e,A),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),D.snapshot}),bS.apply(this,arguments)}function $O(n,e){return CS.apply(this,arguments)}function CS(){return CS=(0,pe.Z)(function*(n,e){const t=qe(n),r=t.ic.get(e),o=t.rc.get(r.targetId);if(o.length>1)return t.rc.set(r.targetId,o.filter(u=>!xh(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield dy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Ew(t.remoteStore,r.targetId),_y(t,r.targetId)}).catch(sc))):(_y(t,r.targetId),yield dy(t.localStore,r.targetId,!0))}),CS.apply(this,arguments)}function TS(){return TS=(0,pe.Z)(function*(n,e,t){const r=qS(n);try{const o=yield function(u,l){const m=qe(u),v=zn.now(),D=l.reduce((V,W)=>V.add(W.key),$t());let A,M;return m.persistence.runTransaction("Locally write mutations","readwrite",V=>{let W=Ui(),ee=$t();return m.Gi.getEntries(V,D).next(xe=>{W=xe,W.forEach((Ee,gt)=>{gt.isValidDocument()||(ee=ee.add(Ee))})}).next(()=>m.localDocuments.getOverlayedDocuments(V,W)).next(xe=>{A=xe;const Ee=[];for(const gt of l){const vt=Cx(gt,A.get(gt.key).overlayedDocument);null!=vt&&Ee.push(new Ga(gt.key,vt,BE(vt.value.mapValue),qn.exists(!0)))}return m.mutationQueue.addMutationBatch(V,v,Ee,l)}).next(xe=>{M=xe;const Ee=xe.applyToLocalDocumentSet(A,ee);return m.documentOverlayCache.saveOverlays(V,xe.batchId,Ee)})}).then(()=>({batchId:M.batchId,changes:JE(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,l,m){let v=u.hc[u.currentUser.toKey()];v||(v=new Fn(Nt)),v=v.insert(l,m),u.hc[u.currentUser.toKey()]=v}(r,o.batchId,t),yield nd(r,o.changes),yield fy(r.remoteStore)}catch(o){const u=gy(o,"Failed to persist write");t.reject(u)}}),TS.apply(this,arguments)}function yM(n,e){return SS.apply(this,arguments)}function SS(){return SS=(0,pe.Z)(function*(n,e){const t=qe(n);try{const r=yield cO(t.localStore,e);e.targetChanges.forEach((o,u)=>{const l=t.cc.get(u);l&&(bt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?l.nc=!0:o.modifiedDocuments.size>0?bt(l.nc):o.removedDocuments.size>0&&(bt(l.nc),l.nc=!1))}),yield nd(t,r,e)}catch(r){yield sc(r)}}),SS.apply(this,arguments)}function _M(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ic.forEach((u,l)=>{const m=l.view.bu(e);m.snapshot&&o.push(m.snapshot)}),function(u,l){const m=qe(u);m.onlineState=l;let v=!1;m.queries.forEach((D,A)=>{for(const M of A.listeners)M.bu(l)&&(v=!0)}),v&&wS(m)}(r.eventManager,e),o.length&&r.sc.Wo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function GO(n,e,t){return AS.apply(this,arguments)}function AS(){return AS=(0,pe.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.cc.get(e),u=o&&o.key;if(u){let l=new Fn(ze.comparator);l=l.insert(u,Cn.newNoDocument(u,xt.min()));const m=$t().add(u),v=new Ap(xt.min(),new Map,new wn(Nt),l,m);yield yM(r,v),r.uc=r.uc.remove(u),r.cc.delete(e),PS(r)}else yield dy(r.localStore,e,!1).then(()=>_y(r,e,t)).catch(sc)}),AS.apply(this,arguments)}function zO(n,e){return xS.apply(this,arguments)}function xS(){return xS=(0,pe.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const o=yield uO(t.localStore,e);OS(t,r,null),NS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield nd(t,o)}catch(o){yield sc(o)}}),xS.apply(this,arguments)}function qO(n,e,t){return MS.apply(this,arguments)}function MS(){return MS=(0,pe.Z)(function*(n,e,t){const r=qe(n);try{const o=yield function(u,l){const m=qe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let D;return m.mutationQueue.lookupMutationBatch(v,l).next(A=>(bt(null!==A),D=A.keys(),m.mutationQueue.removeMutationBatch(v,A))).next(()=>m.mutationQueue.performConsistencyCheck(v)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(v,D,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,D)).next(()=>m.localDocuments.getDocuments(v,D))})}(r.localStore,e);OS(r,e,t),NS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield nd(r,o)}catch(o){yield sc(o)}}),MS.apply(this,arguments)}function RS(){return RS=(0,pe.Z)(function*(n,e){const t=qe(n);td(t.remoteStore)||Ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=qe(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.lc.get(r)||[];o.push(e),t.lc.set(r,o)}catch(r){const o=gy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),RS.apply(this,arguments)}function NS(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function OS(n,e,t){const r=qe(n);let o=r.hc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.hc[r.currentUser.toKey()]=o}}function _y(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||vM(n,r)})}function vM(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(Ew(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),PS(n))}function kS(n,e,t){for(const r of t)r instanceof pM?(n.ac.addReference(r.key,e),KO(n,r)):r instanceof gM?(Ne("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||vM(n,r.key)):nt()}function KO(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Ne("SyncEngine","New document in limbo: "+t),n.oc.add(r),PS(n))}function PS(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new ze(rn.fromString(e)),r=n.fc.next();n.cc.set(r,new UO(t)),n.uc=n.uc.insert(t,r),CD(n.remoteStore,new hc(fi(Yl(t.path)),r,2,Vr.at))}}function nd(n,e,t){return FS.apply(this,arguments)}function FS(){return FS=(0,pe.Z)(function*(n,e,t){const r=qe(n),o=[],u=[],l=[];var m;r.ic.isEmpty()||(r.ic.forEach((m,v)=>{l.push(r._c(v,e,t).then(D=>{if((D||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,D?.fromCache?"not-current":"current"),D){o.push(D);const A=jT.Ci(v.targetId,D);u.push(A)}}))}),yield Promise.all(l),r.sc.Wo(o),yield(m=(0,pe.Z)(function*(v,D){const A=qe(v);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>oe.forEach(D,V=>oe.forEach(V.Si,W=>A.persistence.referenceDelegate.addReference(M,V.targetId,W)).next(()=>oe.forEach(V.Di,W=>A.persistence.referenceDelegate.removeReference(M,V.targetId,W)))))}catch(M){if(!oc(M))throw M;Ne("LocalStore","Failed to update sequence numbers: "+M)}for(const M of D){const V=M.targetId;if(!M.fromCache){const W=A.Ui.get(V),xe=W.withLastLimboFreeSnapshotVersion(W.snapshotVersion);A.Ui=A.Ui.insert(V,xe)}}}),function(v,D){return m.apply(this,arguments)})(r.localStore,u))}),FS.apply(this,arguments)}function ZO(n,e){return LS.apply(this,arguments)}function LS(){return LS=(0,pe.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Ne("SyncEngine","User change. New user:",e.toKey());const r=yield Wx(t.localStore,e);t.currentUser=e,(o=t).lc.forEach(l=>{l.forEach(m=>{m.reject(new Re(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield nd(t,r.ji)}var o}),LS.apply(this,arguments)}function YO(n,e){const t=qe(n),r=t.cc.get(e);if(r&&r.nc)return $t().add(r.key);{let o=$t();const u=t.rc.get(e);if(!u)return o;for(const l of u){const m=t.ic.get(l);o=o.unionWith(m.view.ju)}return o}}function QO(n,e){return VS.apply(this,arguments)}function VS(){return VS=(0,pe.Z)(function*(n,e){const t=qe(n),r=yield ID(t.localStore,e.query,!0),o=e.view.tc(r);return t.isPrimaryClient&&kS(t,e.targetId,o.Xu),o}),VS.apply(this,arguments)}function XO(n,e){return US.apply(this,arguments)}function US(){return US=(0,pe.Z)(function*(n,e){const t=qe(n);return Qx(t.localStore,e).then(r=>nd(t,r))}),US.apply(this,arguments)}function JO(n,e,t,r){return BS.apply(this,arguments)}function BS(){return BS=(0,pe.Z)(function*(n,e,t,r){const o=qe(n),u=yield function(l,m){const v=qe(l),D=qe(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",A=>D.Tn(A,m).next(M=>M?v.localDocuments.getDocuments(A,M):oe.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield fy(o.remoteStore):"acknowledged"===t||"rejected"===t?(OS(o,e,r||null),NS(o,e),m=e,qe(qe(o.localStore).mutationQueue).An(m)):nt(),yield nd(o,u)):Ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),BS.apply(this,arguments)}function jS(){return jS=(0,pe.Z)(function*(n,e){const t=qe(n);if(zS(t),qS(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield wM(t,r.toArray());t.dc=!0,yield fS(t.remoteStore,!0);for(const u of o)CD(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let o=Promise.resolve();t.rc.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):o=o.then(()=>(_y(t,l),dy(t.localStore,l,!0))),Ew(t.remoteStore,l)}),yield o,yield wM(t,r),function(u){const l=qe(u);l.cc.forEach((m,v)=>{Ew(l.remoteStore,v)}),l.ac.fs(),l.cc=new Map,l.uc=new Fn(ze.comparator)}(t),t.dc=!1,yield fS(t.remoteStore,!1)}}),jS.apply(this,arguments)}function wM(n,e,t){return $S.apply(this,arguments)}function $S(){return $S=(0,pe.Z)(function*(n,e,t){const r=qe(n),o=[],u=[];for(const l of e){let m;const v=r.rc.get(l);if(v&&0!==v.length){m=yield ly(r.localStore,fi(v[0]));for(const D of v){const A=r.ic.get(D),M=yield QO(r,A);M.snapshot&&u.push(M.snapshot)}}else{const D=yield Yx(r.localStore,l);m=yield ly(r.localStore,D),yield DS(r,IM(D),l,!1,m.resumeToken)}o.push(m)}return r.sc.Wo(u),o}),$S.apply(this,arguments)}function IM(n){return qE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function tk(n){const e=qe(n);return qe(qe(e.localStore).persistence).vi()}function nk(n,e,t,r){return HS.apply(this,arguments)}function HS(){return HS=(0,pe.Z)(function*(n,e,t,r){const o=qe(n);if(o.dc)return void Ne("SyncEngine","Ignoring unexpected query state notification.");const u=o.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield Qx(o.localStore,nT(u[0])),m=Ap.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,br.EMPTY_BYTE_STRING);yield nd(o,l,m);break}case"rejected":yield dy(o.localStore,e,!0),_y(o,e,r);break;default:nt()}}),HS.apply(this,arguments)}function rk(n,e,t){return GS.apply(this,arguments)}function GS(){return GS=(0,pe.Z)(function*(n,e,t){const r=zS(n);if(r.dc){for(const o of e){if(r.rc.has(o)){Ne("SyncEngine","Adding an already active target "+o);continue}const u=yield Yx(r.localStore,o),l=yield ly(r.localStore,u);yield DS(r,IM(u),l.targetId,!1,l.resumeToken),CD(r.remoteStore,l)}for(const o of t)r.rc.has(o)&&(yield dy(r.localStore,o,!1).then(()=>{Ew(r.remoteStore,o),_y(r,o)}).catch(sc))}}),GS.apply(this,arguments)}function zS(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GO.bind(null,e),e.sc.Wo=kO.bind(null,e.eventManager),e.sc.wc=PO.bind(null,e.eventManager),e}function qS(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qO.bind(null,e),e}class EM{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,pe.Z)(function*(){t.It=ww(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return qx(this.persistence,new zx,e.initialUser,this.It)}yc(e){return new Hx(vD.Bs,this.It)}gc(e){return new tM}terminate(){var e=this;return(0,pe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class DM extends EM{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield qS(r.Ac.syncEngine),yield fy(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return qx(this.persistence,new zx,e.initialUser,this.It)}Tc(e,t){return new WN(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new Uv(t,this.persistence);return new WC(e.asyncQueue,r)}yc(e){const t=BT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Kt.withCacheSize(this.cacheSizeBytes):Kt.DEFAULT;return new UT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,rM(),bD(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new tM}}class sk extends DM{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e);const o=r.Ac.syncEngine;r.sharedClientState instanceof ZT&&(r.sharedClientState.syncEngine={Fr:JO.bind(null,o),$r:nk.bind(null,o),Br:rk.bind(null,o),vi:tk.bind(null,o),Mr:XO.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,pe.Z)(function*(l){yield function ek(n,e){return jS.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}gc(e){const t=rM();if(!ZT.C(t))throw new Re(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=BT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ZT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class WS{initialize(e,t){var r=this;return(0,pe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>_M(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=ZO.bind(null,r.syncEngine),yield fS(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new OO}createDatastore(e){const t=ww(e.databaseInfo.databaseId),r=new mO(e.databaseInfo);return new vO(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>_M(this.syncEngine,m,0),l=nM.C()?new nM:new fO,new EO(t,r,o,u,l);var t,r,o,u,l}createSyncEngine(e,t){return function(r,o,u,l,m,v,D){const A=new BO(r,o,u,l,m,v);return D&&(A.dc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,pe.Z)(function*(t){const r=qe(t);Ne("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield hy(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function KS(n,e,t){if(!t)throw new Re(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function bM(n,e,t,r){if(!0===e&&!0===r)throw new Re(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function CM(n){if(!ze.isDocumentKey(n))throw new Re(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function TM(n){if(ze.isDocumentKey(n))throw new Re(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function SD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":nt()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=SD(n);throw new Re(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function SM(n,e){if(e<=0)throw new Re(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const AM=new Map;class xM{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,bM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dw{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xM({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Re(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xM(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new TE;switch(t.type){case"gapi":return new BC(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Re(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=AM.get(e);t&&(Ne("ComponentProvider","Removing Datastore"),AM.delete(e),t.terminate())}(this),Promise.resolve()}}class Wn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wn(this.firestore,e,this._key)}}class Bi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bi(this.firestore,e,this._query)}}class mc extends Bi{constructor(e,t,r){super(e,t,Yl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wn(this.firestore,null,new ze(e))}withConverter(e){return new mc(this.firestore,e,this._path)}}function RM(n,e,...t){if(n=(0,Ut.m9)(n),KS("collection","path",e),n instanceof Dw){const r=rn.fromString(e,...t);return TM(r),new mc(n,null,r)}{if(!(n instanceof Wn||n instanceof mc))throw new Re(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rn.fromString(e,...t));return TM(r),new mc(n.firestore,null,r)}}function AD(n,e,...t){if(n=(0,Ut.m9)(n),1===arguments.length&&(e=$C.R()),KS("doc","path",e),n instanceof Dw){const r=rn.fromString(e,...t);return CM(r),new Wn(n,null,new ze(r))}{if(!(n instanceof Wn||n instanceof mc))throw new Re(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rn.fromString(e,...t));return CM(r),new Wn(n.firestore,n instanceof mc?n.converter:null,new ze(r))}}function NM(n,e){return n=(0,Ut.m9)(n),e=(0,Ut.m9)(e),(n instanceof Wn||n instanceof mc)&&(e instanceof Wn||e instanceof mc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ZS(n,e){return n=(0,Ut.m9)(n),e=(0,Ut.m9)(e),n instanceof Bi&&e instanceof Bi&&n.firestore===e.firestore&&xh(n._query,e._query)&&n.converter===e.converter}function OM(n,e=10240){let t=0;return{read:()=>(0,pe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,pe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class xD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):An("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class ak{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new vr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,pe.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,pe.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),o=Number(r);isNaN(o)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(o);return new FO(JSON.parse(u),t.length+o)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,pe.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,pe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class lk{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,pe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,pe.Z)(function*(u,l){const m=qe(u),v=Ph(m.It)+"/documents",D={documents:l.map(W=>Jl(m.It,W))},A=yield m._o("BatchGetDocuments",v,D,l.length),M=new Map;A.forEach(W=>{const ee=function rD(n,e){return"found"in e?function(t,r){bt(!!r.found);const o=go(t,r.found.name),u=Br(r.found.updateTime),l=new Tr({mapValue:{fields:r.found.fields}});return Cn.newFoundDocument(o,u,l)}(n,e):"missing"in e?function(t,r){bt(!!r.missing),bt(!!r.readTime);const o=go(t,r.missing),u=Br(r.readTime);return Cn.newNoDocument(o,u)}(n,e):nt()}(m.It,W);M.set(ee.key.toString(),ee)});const V=[];return l.forEach(W=>{const ee=M.get(W.toString());bt(!!ee),V.push(ee)}),V}),function(u,l){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Nh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,pe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=ze.fromPath(o);e.mutations.push(new Ym(u,e.precondition(u)))}),yield(r=(0,pe.Z)(function*(o,u){const l=qe(o),m=Ph(l.It)+"/documents",v={writes:u.map(D=>Fh(l.It,D))};yield l.ao("Commit",m,v)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw nt();t=xt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(xt.min())?qn.exists(!1):qn.updateTime(t):qn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(xt.min()))throw new Re(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qn.updateTime(t)}return qn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class dk{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.kc=r.maxAttempts,this.xo=new YT(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,pe.Z)(function*(){const t=new lk(e.datastore),r=e.Mc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Fc(u)}))}).catch(o=>{e.Fc(o)})}))}Mc(e){try{const t=this.updateFunction(e);return!vp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!XE(t)}return!1}}class hk{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=_r.UNAUTHENTICATED,this.clientId=$C.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,pe.Z)(function*(m){Ne("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ne("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,pe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=gy(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function kM(n,e){return YS.apply(this,arguments)}function YS(){return YS=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ne("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,pe.Z)(function*(u){r.isEqual(u)||(yield Wx(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),YS.apply(this,arguments)}function PM(n,e){return QS.apply(this,arguments)}function QS(){return QS=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield XS(n);Ne("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>lM(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>lM(e.remoteStore,u)),n.onlineComponents=e}),QS.apply(this,arguments)}function XS(n){return JS.apply(this,arguments)}function JS(){return JS=(0,pe.Z)(function*(n){return n.offlineComponents||(Ne("FirestoreClient","Using default OfflineComponentProvider"),yield kM(n,new EM)),n.offlineComponents}),JS.apply(this,arguments)}function MD(n){return eA.apply(this,arguments)}function eA(){return eA=(0,pe.Z)(function*(n){return n.onlineComponents||(Ne("FirestoreClient","Using default OnlineComponentProvider"),yield PM(n,new WS)),n.onlineComponents}),eA.apply(this,arguments)}function FM(n){return XS(n).then(e=>e.persistence)}function RD(n){return XS(n).then(e=>e.localStore)}function tA(n){return MD(n).then(e=>e.remoteStore)}function nA(n){return MD(n).then(e=>e.syncEngine)}function vy(n){return rA.apply(this,arguments)}function rA(){return rA=(0,pe.Z)(function*(n){const e=yield MD(n),t=e.eventManager;return t.onListen=jO.bind(null,e.syncEngine),t.onUnlisten=$O.bind(null,e.syncEngine),t}),rA.apply(this,arguments)}function VM(n,e,t={}){const r=new vr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(o,u,l,m,v){const D=new xD({next:M=>{u.enqueueAndForget(()=>_S(o,A));const V=M.docs.has(l);!V&&M.fromCache?v.reject(new Re(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&M.fromCache&&m&&"server"===m.source?v.reject(new Re(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(M)},error:M=>v.reject(M)}),A=new IS(Yl(l.path),D,{includeMetadataChanges:!0,Nu:!0});return mS(o,A)}(yield vy(n),n.asyncQueue,e,t,r)})),r.promise}function UM(n,e,t={}){const r=new vr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(o,u,l,m,v){const D=new xD({next:M=>{u.enqueueAndForget(()=>_S(o,A)),M.fromCache&&"server"===m.source?v.reject(new Re(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(M)},error:M=>v.reject(M)}),A=new IS(l,D,{includeMetadataChanges:!0,Nu:!0});return mS(o,A)}(yield vy(n),n.asyncQueue,e,t,r)})),r.promise}class wk{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new YT(this,"async_queue_retry"),this.Wc=()=>{const t=bD();t&&Ne("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=bD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=bD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new vr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,pe.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!oc(t))throw t;Ne("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,An("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const o=gS.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.qc.push(o),o}zc(){this.Kc&&nt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,pe.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function iA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class Ik{constructor(){this._progressObserver={},this._taskCompletionResolver=new vr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Kn extends Dw{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new wk,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||BM(this),this._firestoreClient.terminate()}}function Ar(n){return n._firestoreClient||BM(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function BM(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ZC(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new hk(n._authCredentials,n._appCheckCredentials,n._queue,r)}function jM(n,e,t){const r=new vr;return n.asyncQueue.enqueue((0,pe.Z)(function*(){try{yield kM(n,t),yield PM(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(l=u).name?l.code===ue.FAILED_PRECONDITION||l.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw u;ic("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var l})).then(()=>r.promise)}function $M(n){if(n._initialized||n._terminated)throw new Re(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class yc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yc(br.fromBase64String(e))}catch(t){throw new Re(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new yc(br.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class rd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Lp{constructor(e){this._methodName=e}}class ND{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Nt(this._lat,e._lat)||Nt(this._long,e._long)}}const Rk=/^__.*__$/;class Nk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ga(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cp(e,this.data,t,this.fieldTransforms)}}class HM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ga(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function GM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}class OD{constructor(e,t,r,o,u,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=o,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new OD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.ua(e),o}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.na(),o}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return FD(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(GM(this.sa)&&Rk.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class Ok{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||ww(e)}da(e,t,r,o=!1){return new OD({sa:e,methodName:t,fa:r,path:tr.emptyPath(),oa:!1,la:o},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Vp(n){const e=n._freezeSettings(),t=ww(n._databaseId);return new Ok(n._databaseId,!!e.ignoreUndefinedProperties,t)}function kD(n,e,t,r,o,u={}){const l=n.da(u.merge||u.mergeFields?2:0,e,t,o);uA("Data must be an object, but it was:",l,r);const m=WM(r,l);let v,D;if(u.merge)v=new Ci(l.fieldMask),D=l.fieldTransforms;else if(u.mergeFields){const A=[];for(const M of u.mergeFields){const V=cA(e,M,t);if(!l.contains(V))throw new Re(ue.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);ZM(A,V)||A.push(V)}v=new Ci(A),D=l.fieldTransforms.filter(M=>v.covers(M.field))}else v=null,D=l.fieldTransforms;return new Nk(new Tr(m),v,D)}class bw extends Lp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bw}}function zM(n,e,t){return new OD({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class sA extends Lp{_toFieldTransform(e){return new Rh(e.path,new Ha)}isEqual(e){return e instanceof sA}}class kk extends Lp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=zM(this,e,!0),r=this._a.map(u=>Up(u,t)),o=new Mh(r);return new Rh(e.path,o)}isEqual(e){return this===e}}class Pk extends Lp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=zM(this,e,!0),r=this._a.map(u=>Up(u,t)),o=new Ho(r);return new Rh(e.path,o)}isEqual(e){return this===e}}class Fk extends Lp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Ql(e.It,sT(e.It,this.wa));return new Rh(e.path,t)}isEqual(e){return this===e}}function oA(n,e,t,r){const o=n.da(1,e,t);uA("Data must be an object, but it was:",o,r);const u=[],l=Tr.empty();Ul(r,(v,D)=>{const A=PD(e,v,t);D=(0,Ut.m9)(D);const M=o.ca(A);if(D instanceof bw)u.push(A);else{const V=Up(D,M);null!=V&&(u.push(A),l.set(A,V))}});const m=new Ci(u);return new HM(l,m,o.fieldTransforms)}function aA(n,e,t,r,o,u){const l=n.da(1,e,t),m=[cA(e,r,t)],v=[o];if(u.length%2!=0)throw new Re(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<u.length;V+=2)m.push(cA(e,u[V])),v.push(u[V+1]);const D=[],A=Tr.empty();for(let V=m.length-1;V>=0;--V)if(!ZM(D,m[V])){const W=m[V];let ee=v[V];ee=(0,Ut.m9)(ee);const xe=l.ca(W);if(ee instanceof bw)D.push(W);else{const Ee=Up(ee,xe);null!=Ee&&(D.push(W),A.set(W,Ee))}}const M=new Ci(D);return new HM(A,M,l.fieldTransforms)}function qM(n,e,t,r=!1){return Up(t,n.da(r?4:3,e))}function Up(n,e){if(KM(n=(0,Ut.m9)(n)))return uA("Unsupported field value:",e,n),WM(n,e);if(n instanceof Lp)return function(t,r){if(!GM(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const l of t){let m=Up(l,r.aa(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Ut.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return sT(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=zn.fromDate(t);return{timestampValue:kh(r.It,o)}}if(t instanceof zn){const o=new zn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:kh(r.It,o)}}if(t instanceof ND)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof yc)return{bytesValue:_T(r.It,t._byteString)};if(t instanceof Wn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ey(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${SD(t)}`)}(n,e)}function WM(n,e){const t={};return kE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ul(n,(r,o)=>{const u=Up(o,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function KM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof zn||n instanceof ND||n instanceof yc||n instanceof Wn||n instanceof Lp)}function uA(n,e,t){if(!KM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=SD(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function cA(n,e,t){if((e=(0,Ut.m9)(e))instanceof rd)return e._internalPath;if("string"==typeof e)return PD(n,e);throw FD("Field path arguments must be of type string or ",n,!1,void 0,t)}const Lk=new RegExp("[~\\*/\\[\\]]");function PD(n,e,t){if(e.search(Lk)>=0)throw FD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new rd(...e.split("."))._internalPath}catch{throw FD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function FD(n,e,t,r,o){const u=r&&!r.isEmpty(),l=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let v="";return(u||l)&&(v+=" (found",u&&(v+=` in field ${r}`),l&&(v+=` in document ${o}`),v+=")"),new Re(ue.INVALID_ARGUMENT,m+n+v)}function ZM(n,e){return n.some(t=>t.isEqual(e))}class Cw{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Vk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(LD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Vk extends Cw{data(){return super.data()}}function LD(n,e){return"string"==typeof e?PD(n,e):e instanceof rd?e._internalPath:e._delegate._internalPath}function YM(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tw{}function Hh(n,...e){for(const t of e)n=t._apply(n);return n}class Uk extends Tw{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Vp(e.firestore),r=function(o,u,l,m,v,D,A){let M;if(v.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new Re(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){nR(A,D);const W=[];for(const ee of A)W.push(tR(m,o,ee));M={arrayValue:{values:W}}}else M=tR(m,o,A)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||nR(A,D),M=qM(l,"where",A,"in"===D||"not-in"===D);const V=Ur.create(v,D,M);return function(W,ee){if(ee.dt()){const Ee=Yv(W);if(null!==Ee&&!Ee.isEqual(ee.field))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ee.toString()}' and '${ee.field.toString()}'`);const gt=Zv(W);null!==gt&&rR(0,ee.field,gt)}const xe=function(Ee,gt){for(const vt of Ee.filters)if(gt.indexOf(vt.op)>=0)return vt.op;return null}(W,function(Ee){switch(Ee){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ee.op));if(null!==xe)throw new Re(ue.INVALID_ARGUMENT,xe===ee.op?`Invalid query. You cannot use more than one '${ee.op.toString()}' filter.`:`Invalid query. You cannot use '${ee.op.toString()}' filters with '${xe.toString()}' filters.`)}(o,V),V}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Bi(e.firestore,e.converter,function(o,u){const l=o.filters.concat([u]);return new $o(o.path,o.collectionGroup,o.explicitOrderBy.slice(),l,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class jk extends Tw{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Re(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Sh(o,u);return function(m,v){if(null===Zv(m)){const D=Yv(m);null!==D&&rR(0,D,v.field)}}(r,l),l}(e._query,this.ma,this.pa);return new Bi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new $o(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class QM extends Tw{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Bi(e.firestore,e.converter,Dp(e._query,this.Ia,this.Ta))}}class XM extends Tw{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=eR(e,this.type,this.Ea,this.Aa);return new Bi(e.firestore,e.converter,(o=t,new $o((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class JM extends Tw{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=eR(e,this.type,this.Ea,this.Aa);return new Bi(e.firestore,e.converter,(o=t,new $o((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function eR(n,e,t,r){if(t[0]=(0,Ut.m9)(t[0]),t[0]instanceof Cw)return function(o,u,l,m,v){if(!m)throw new Re(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const D=[];for(const A of Ah(o))if(A.field.isKeyField())D.push(cc(u,m.key));else{const M=m.data.field(A.field);if(jm(M))throw new Re(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const V=A.field.canonicalString();throw new Re(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}D.push(M)}return new Zl(D,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Vp(n.firestore);return function(u,l,m,v,D,A){const M=u.explicitOrderBy;if(D.length>M.length)throw new Re(ue.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let W=0;W<D.length;W++){const ee=D[W];if(M[W].field.isKeyField()){if("string"!=typeof ee)throw new Re(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof ee}`);if(!qm(u)&&-1!==ee.indexOf("/"))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${ee}' contains a slash.`);const xe=u.path.child(rn.fromString(ee));if(!ze.isDocumentKey(xe))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${xe}' is not because it contains an odd number of segments.`);const Ee=new ze(xe);V.push(cc(l,Ee))}else{const xe=qM(m,v,ee);V.push(xe)}}return new Zl(V,A)}(n._query,n.firestore._databaseId,o,e,t,r)}}function tR(n,e,t){if("string"==typeof(t=(0,Ut.m9)(t))){if(""===t)throw new Re(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qm(e)&&-1!==t.indexOf("/"))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(rn.fromString(t));if(!ze.isDocumentKey(r))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return cc(n,new ze(r))}if(t instanceof Wn)return cc(n,t._key);throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${SD(t)}.`)}function nR(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(ue.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function rR(n,e,t){if(!t.isEqual(e))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class lA{convertValue(e,t="none"){switch(Gl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Un(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($a(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nt()}}convertObject(e,t){const r={};return Ul(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new ND(Un(e.latitude),Un(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=$m(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Hl(e));default:return null}}convertTimestamp(e){const t=$l(e);return new zn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=rn.fromString(e);bt(uD(r));const o=new ac(r.get(1),r.get(3)),u=new ze(r.popFirst(5));return o.isEqual(t)||An(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function VD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Zk extends lA{constructor(e){super(),this.firestore=e}convertBytes(e){return new yc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}class Bp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class id extends Cw{constructor(e,t,r,o,u,l){super(e,t,r,o,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Sw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(LD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Sw extends id{data(e={}){return super.data(e)}}class Gh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Bp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Sw(this._firestore,this._userDataWriter,r.key,r,new Bp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new Sw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Bp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||3!==l.type).map(l=>{const m=new Sw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Bp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,D=-1;return 0!==l.type&&(v=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),D=u.indexOf(l.doc.key)),{type:Yk(l.type),doc:m,oldIndex:v,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Yk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}function iR(n,e){return n instanceof id&&e instanceof id?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Gh&&e instanceof Gh&&n._firestore===e._firestore&&ZS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class zh extends lA{constructor(e){super(),this.firestore=e}convertBytes(e){return new yc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}function sR(n,e,t){n=sn(n,Wn);const r=sn(n.firestore,Kn),o=VD(n.converter,e,t);return wy(r,[kD(Vp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,qn.none())])}function oR(n,e,t,...r){n=sn(n,Wn);const o=sn(n.firestore,Kn),u=Vp(o);let l;return l="string"==typeof(e=(0,Ut.m9)(e))||e instanceof rd?aA(u,"updateDoc",n._key,e,t,r):oA(u,"updateDoc",n._key,e),wy(o,[l.toMutation(n._key,qn.exists(!0))])}function aR(n,...e){var t,r,o;n=(0,Ut.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||iA(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(iA(e[l])){const M=e[l];e[l]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[l+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[l+2]=null===(o=M.complete)||void 0===o?void 0:o.bind(M)}let v,D,A;if(n instanceof Wn)D=sn(n.firestore,Kn),A=Yl(n._key.path),v={next:M=>{e[l]&&e[l](dA(D,n,M))},error:e[l+1],complete:e[l+2]};else{const M=sn(n,Bi);D=sn(M.firestore,Kn),A=M._query;const V=new zh(D);v={next:W=>{e[l]&&e[l](new Gh(D,V,M,W))},error:e[l+1],complete:e[l+2]},YM(n._query)}return function(M,V,W,ee){const xe=new xD(ee),Ee=new IS(V,xe,W);return M.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return mS(yield vy(M),Ee)})),()=>{xe.bc(),M.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return _S(yield vy(M),Ee)}))}}(Ar(D),A,m,v)}function wy(n,e){return function(t,r){const o=new vr;return t.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function HO(n,e,t){return TS.apply(this,arguments)}(yield nA(t),r,o)})),o.promise}(Ar(n),e)}function dA(n,e,t){const r=t.docs.get(e._key),o=new zh(n);return new id(n,o,e._key,r,new Bp(t.hasPendingWrites,t.fromCache),e.converter)}const oP={maxAttempts:5};class uR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Vp(e)}set(e,t,r){this._verifyNotCommitted();const o=qh(e,this._firestore),u=VD(o.converter,t,r),l=kD(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(l.toMutation(o._key,qn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=qh(e,this._firestore);let l;return l="string"==typeof(t=(0,Ut.m9)(t))||t instanceof rd?aA(this._dataReader,"WriteBatch.update",u._key,t,r,o):oA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,qn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=qh(e,this._firestore);return this._mutations=this._mutations.concat(new Nh(t._key,qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qh(n,e){if((n=(0,Ut.m9)(n)).firestore!==e)throw new Re(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class aP extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Vp(e)}get(e){const t=qh(e,this._firestore),r=new Zk(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return nt();const u=o[0];if(u.isFoundDocument())return new Cw(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Cw(this._firestore,r,t._key,null,t.converter);throw nt()})}set(e,t,r){const o=qh(e,this._firestore),u=VD(o.converter,t,r),l=kD(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,l),this}update(e,t,r,...o){const u=qh(e,this._firestore);let l;return l="string"==typeof(t=(0,Ut.m9)(t))||t instanceof rd?aA(this._dataReader,"Transaction.update",u._key,t,r,o):oA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=qh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=qh(e,this._firestore),r=new zh(this._firestore);return super.get(e).then(o=>new id(this._firestore,r,t._key,o._document,new Bp(!1,!1),t.converter))}}function hA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function lR(){if(typeof Uint8Array>"u")throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function dR(){if(!function PE(){return typeof atob<"u"}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){wh=hi.SDK_VERSION,(0,hi._registerComponent)(new uo.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),l=new Kn(new AE(t.getProvider("auth-internal")),new jC(t.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Re(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ac(m.options.projectId,v)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),(0,hi.registerVersion)(Rv,"3.7.2",n),(0,hi.registerVersion)(Rv,"3.7.2","esm2017")}();class Aw{constructor(e){this._delegate=e}static fromBase64String(e){return dR(),new Aw(yc.fromBase64String(e))}static fromUint8Array(e){return lR(),new Aw(yc.fromUint8Array(e))}toBase64(){return dR(),this._delegate.toBase64()}toUint8Array(){return lR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function fA(n){return function mP(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class yP{enableIndexedDbPersistence(e,t){return function Dk(n,e){$M(n=sn(n,Kn));const t=Ar(n),r=n._freezeSettings(),o=new WS;return jM(t,o,new DM(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function bk(n){$M(n=sn(n,Kn));const e=Ar(n),t=n._freezeSettings(),r=new WS;return jM(e,r,new sk(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Ck(n){if(n._initialized&&!n._terminated)throw new Re(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new vr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{yield(t=(0,pe.Z)(function*(r){if(!ho.C())return Promise.resolve();const o=r+"main";yield ho.delete(o)}),function(r){return t.apply(this,arguments)})(BT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class hR{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ac||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ic("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function MM(n,e,t,r={}){var o;const u=(n=sn(n,Dw))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&ic("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,m;if("string"==typeof r.mockUserToken)l=r.mockUserToken,m=_r.MOCK_USER;else{l=(0,Ut.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Re(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new _r(v)}n._authCredentials=new SE(new Pm(l,m))}}(this._delegate,e,t,r)}enableNetwork(){return function Sk(n){return function fk(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield FM(n),t=yield tA(n);return e.setNetworkEnabled(!0),function(r){const o=qe(r);return o._u.delete(0),Iw(o)}(t)}))}(Ar(n=sn(n,Kn)))}(this._delegate)}disableNetwork(){return function Ak(n){return function pk(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield FM(n),t=yield tA(n);return e.setNetworkEnabled(!1),(r=(0,pe.Z)(function*(o){const u=qe(o);u._u.add(0),yield hy(u),u.gu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Ar(n=sn(n,Kn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,bM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Tk(n){return function(e){const t=new vr;return e.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function WO(n,e){return RS.apply(this,arguments)}(yield nA(e),t)})),t.promise}(Ar(n=sn(n,Kn)))}(this._delegate)}onSnapshotsInSync(e){return function sP(n,e){return function yk(n,e){const t=new xD(e);return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield vy(n),o=t,qe(r).Ru.add(o),void o.next();var r,o})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield vy(n),o=t,void qe(r).Ru.delete(o);var r,o}))}}(Ar(n=sn(n,Kn)),iA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Iy(this,RM(this._delegate,e))}catch(t){throw cs(t,"collection()","Firestore.collection()")}}doc(e){try{return new qo(this,AD(this._delegate,e))}catch(t){throw cs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ls(this,function ok(n,e){if(n=sn(n,Dw),KS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Bi(n,null,(t=e,new $o(rn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw cs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function uP(n,e,t){n=sn(n,Kn);const r=Object.assign(Object.assign({},oP),t);return function(o){if(o.maxAttempts<1)throw new Re(ue.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,l){const m=new vr;return o.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){const v=yield function LM(n){return MD(n).then(e=>e.datastore)}(o);new dk(o.asyncQueue,v,l,u,m).run()})),m.promise}(Ar(n),o=>e(new aP(n,o)),r)}(this._delegate,t=>e(new fR(this,t)))}batch(){return Ar(this._delegate),new pR(new uR(this._delegate,e=>wy(this._delegate,e)))}loadBundle(e){return function xk(n,e){const t=Ar(n=sn(n,Kn)),r=new Ik;return function _k(n,e,t,r){const o=function(u,l){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,v=function(v,D){if(v instanceof Uint8Array)return OM(v,D);if(v instanceof ArrayBuffer)return OM(new Uint8Array(v),D);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new ak(v,l);var v}(t,ww(e));n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){!function ik(n,e,t){const r=qe(n);var o;(o=(0,pe.Z)(function*(u,l,m){try{const v=yield l.getMetadata();if(yield function(V,W){const ee=qe(V),xe=Br(W.createTime);return ee.persistence.runTransaction("hasNewerBundle","readonly",Ee=>ee.Ns.getBundleMetadata(Ee,W.id)).then(Ee=>!!Ee&&Ee.createTime.compareTo(xe)>=0)}(u.localStore,v))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:(V=v).totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}),Promise.resolve(new Set);m._updateProgress(fM(v));const D=new LO(v,u.localStore,l.It);let A=yield l.mc();for(;A;){const V=yield D.Fu(A);V&&m._updateProgress(V),A=yield l.mc()}const M=yield D.complete();return yield nd(u,M.Lu,void 0),yield function(V,W){const ee=qe(V);return ee.persistence.runTransaction("Save bundle","readwrite",xe=>ee.Ns.saveBundleMetadata(xe,W))}(u.localStore,v),m._completeWith(M.progress),Promise.resolve(M.Bu)}catch(v){return ic("SyncEngine",`Loading bundle failed with ${v}`),m._failWith(v),Promise.resolve(new Set)}var V}),function(u,l,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield nA(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Mk(n,e){return function vk(n,e){return n.asyncQueue.enqueue((0,pe.Z)(function*(){return function(t,r){const o=qe(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ns.getNamedQuery(u,r))}(yield RD(n),e)}))}(Ar(n=sn(n,Kn)),e).then(t=>t?new Bi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ls(this,t):null)}}class UD extends lA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Aw(new yc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return qo.forKey(t,this.firestore,null)}}class fR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new UD(e)}get(e){const t=$p(e);return this._delegate.get(t).then(r=>new xw(this._firestore,new id(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=$p(e);return r?(hA("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=$p(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=$p(e);return this._delegate.delete(t),this}}class pR{constructor(e){this._delegate=e}set(e,t,r){const o=$p(e);return r?(hA("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=$p(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=$p(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class jp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Sw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Mw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=jp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new jp(e,new UD(e),t),o.set(t,u)),u}}jp.INSTANCES=new WeakMap;class qo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new UD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new qo(t,new Wn(t._delegate,r,new ze(e)))}static forKey(e,t,r){return new qo(t,new Wn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Iy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Iy(this.firestore,RM(this._delegate,e))}catch(t){throw cs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ut.m9)(e))instanceof Wn&&NM(this._delegate,e)}set(e,t){t=hA("DocumentReference.set",t);try{return t?sR(this._delegate,e,t):sR(this._delegate,e)}catch(r){throw cs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?oR(this._delegate,e):oR(this._delegate,e,t,...r)}catch(o){throw cs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function rP(n){return wy(sn(n.firestore,Kn),[new Nh(n._key,qn.none())])}(this._delegate)}onSnapshot(...e){const t=gR(e),r=mR(e,o=>new xw(this.firestore,new id(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return aR(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Xk(n){n=sn(n,Wn);const e=sn(n.firestore,Kn),t=Ar(e),r=new zh(e);return function gk(n,e){const t=new vr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(o,u,l){try{const m=yield function(v,D){const A=qe(v);return A.persistence.runTransaction("read document","readonly",M=>A.localDocuments.getDocument(M,D))}(o,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new Re(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const v=gy(m,`Failed to get document '${u} from cache`);l.reject(v)}}),function(o,u,l){return r.apply(this,arguments)})(yield RD(n),e,t);var r})),t.promise}(t,n._key).then(o=>new id(e,r,n._key,o,new Bp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Jk(n){n=sn(n,Wn);const e=sn(n.firestore,Kn);return VM(Ar(e),n._key,{source:"server"}).then(t=>dA(e,n,t))}(this._delegate):function Qk(n){n=sn(n,Wn);const e=sn(n.firestore,Kn);return VM(Ar(e),n._key).then(t=>dA(e,n,t))}(this._delegate),t.then(r=>new xw(this.firestore,new id(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new qo(this.firestore,this._delegate.withConverter(e?jp.getInstance(this.firestore,e):null))}}function cs(n,e,t){return n.message=n.message.replace(e,t),n}function gR(n){for(const e of n)if("object"==typeof e&&!fA(e))return e;return{}}function mR(n,e){var t,r;let o;return o=fA(n[0])?n[0]:fA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class xw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new qo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return iR(this._delegate,e._delegate)}}class Mw extends xw{data(e){const t=this._delegate.data(e);return function Ov(n,e){n||nt()}(void 0!==t),t}}class ls{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new UD(e)}where(e,t,r){try{return new ls(this.firestore,Hh(this._delegate,function Bk(n,e,t){const r=e,o=LD("where",n);return new Uk(o,r,t)}(e,t,r)))}catch(o){throw cs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ls(this.firestore,Hh(this._delegate,function $k(n,e="asc"){const t=e,r=LD("orderBy",n);return new jk(r,t)}(e,t)))}catch(r){throw cs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ls(this.firestore,Hh(this._delegate,function Hk(n){return SM("limit",n),new QM("limit",n,"F")}(e)))}catch(t){throw cs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ls(this.firestore,Hh(this._delegate,function Gk(n){return SM("limitToLast",n),new QM("limitToLast",n,"L")}(e)))}catch(t){throw cs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ls(this.firestore,Hh(this._delegate,function zk(...n){return new XM("startAt",n,!0)}(...e)))}catch(t){throw cs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ls(this.firestore,Hh(this._delegate,function qk(...n){return new XM("startAfter",n,!1)}(...e)))}catch(t){throw cs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ls(this.firestore,Hh(this._delegate,function Wk(...n){return new JM("endBefore",n,!1)}(...e)))}catch(t){throw cs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ls(this.firestore,Hh(this._delegate,function Kk(...n){return new JM("endAt",n,!0)}(...e)))}catch(t){throw cs(t,"endAt()","Query.endAt()")}}isEqual(e){return ZS(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function tP(n){n=sn(n,Bi);const e=sn(n.firestore,Kn),t=Ar(e),r=new zh(e);return function mk(n,e){const t=new vr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(o,u,l){try{const m=yield ID(o,u,!0),v=new mM(u,m.Hi),D=v.Wu(m.documents),A=v.applyChanges(D,!1);l.resolve(A.snapshot)}catch(m){const v=gy(m,`Failed to execute query '${u} against cache`);l.reject(v)}}),function(o,u,l){return r.apply(this,arguments)})(yield RD(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Gh(e,r,n,o))}(this._delegate):"server"===e?.source?function nP(n){n=sn(n,Bi);const e=sn(n.firestore,Kn),t=Ar(e),r=new zh(e);return UM(t,n._query,{source:"server"}).then(o=>new Gh(e,r,n,o))}(this._delegate):function eP(n){n=sn(n,Bi);const e=sn(n.firestore,Kn),t=Ar(e),r=new zh(e);return YM(n._query),UM(t,n._query).then(o=>new Gh(e,r,n,o))}(this._delegate),t.then(r=>new pA(this.firestore,new Gh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=gR(e),r=mR(e,o=>new pA(this.firestore,new Gh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return aR(this._delegate,t,r)}withConverter(e){return new ls(this.firestore,this._delegate.withConverter(e?jp.getInstance(this.firestore,e):null))}}class vP{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Mw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class pA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ls(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Mw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new vP(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Mw(this._firestore,r))})}isEqual(e){return iR(this._delegate,e._delegate)}}class Iy extends ls{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new qo(this.firestore,e):null}doc(e){try{return new qo(this.firestore,void 0===e?AD(this._delegate):AD(this._delegate,e))}catch(t){throw cs(t,"doc()","CollectionReference.doc()")}}add(e){return function iP(n,e){const t=sn(n.firestore,Kn),r=AD(n),o=VD(n.converter,e);return wy(t,[kD(Vp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,qn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new qo(this.firestore,t))}isEqual(e){return NM(this._delegate,e._delegate)}withConverter(e){return new Iy(this.firestore,this._delegate.withConverter(e?jp.getInstance(this.firestore,e):null))}}function $p(n){return sn(n,Wn)}class gA{constructor(...e){this._delegate=new rd(...e)}static documentId(){return new gA(tr.keyField().canonicalString())}isEqual(e){return(e=(0,Ut.m9)(e))instanceof rd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Hp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function lP(){return new sA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Hp(e)}static delete(){const e=function cP(){return new bw("deleteField")}();return e._methodName="FieldValue.delete",new Hp(e)}static arrayUnion(...e){const t=function dP(...n){return new kk("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Hp(t)}static arrayRemove(...e){const t=function hP(...n){return new Pk("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Hp(t)}static increment(e){const t=function fP(n){return new Fk("increment",n)}(e);return t._methodName="FieldValue.increment",new Hp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const wP={Firestore:hR,GeoPoint:ND,Timestamp:zn,Blob:Aw,Transaction:fR,WriteBatch:pR,DocumentReference:qo,DocumentSnapshot:xw,Query:ls,QueryDocumentSnapshot:Mw,QuerySnapshot:pA,CollectionReference:Iy,FieldPath:gA,FieldValue:Hp,setLogLevel:function _P(n){!function UC(n){rc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function EP(n){(function IP(n,e){n.INTERNAL.registerComponent(new uo.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},wP)))})(n,(e,t)=>new hR(e,t,new yP)),n.registerVersion("@firebase/firestore-compat","0.2.2")}(Tl.Z);var DP=P(6451),BD=P(5363),bP=P(6063);class CP extends Ns.x{constructor(e=1/0,t=1/0,r=bP.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!o&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const l=t.now();let m=0;for(let v=1;v<r.length&&r[v]<=l;v+=2)m=v;m&&r.splice(0,m+1)}}}var TP=P(3099);function yR(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,TP.B)({connector:()=>new CP(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function _R(n,e){return(0,xf.m)(e)?nn(()=>n,e):nn(()=>n)}var mA=P(9468);P(5867);const wR=new Map,RP={activated:!1,tokenObservers:[]},NP={initialized:!1,enabled:!1};function gi(n){return wR.get(n)||RP}function Wo(n,e){wR.set(n,e)}function $D(){return NP}class LP{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,pe.Z)(function*(){t.stop();try{t.pending=new Ut.BH,yield function VP(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ut.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ds=new Ut.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ER(n){if(!gi(n).activated)throw ds.create("use-before-activation",{appName:n.name})}function wA(n,e){return IA.apply(this,arguments)}function IA(){return IA=(0,pe.Z)(function*({url:n,body:e},t){var r,o;const u={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const W=yield l.getHeartbeatsHeader();W&&(u["X-Firebase-Client"]=W)}const m={method:"POST",body:JSON.stringify(e),headers:u};let v,D;try{v=yield fetch(n,m)}catch(W){throw ds.create("fetch-network-error",{originalErrorMessage:null===(r=W)||void 0===r?void 0:r.message})}if(200!==v.status)throw ds.create("fetch-status-error",{httpStatus:v.status});try{D=yield v.json()}catch(W){throw ds.create("fetch-parse-error",{originalErrorMessage:null===(o=W)||void 0===o?void 0:o.message})}const A=D.ttl.match(/^([\d.]+)(s)$/);if(!A||!A[2]||isNaN(Number(A[1])))throw ds.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${D.ttl}`});const M=1e3*Number(A[1]),V=Date.now();return{token:D.token,expireTimeMillis:V+M,issuedAtTimeMillis:V}}),IA.apply(this,arguments)}function $P(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Rw="firebase-app-check-store";let zD=null;function bR(){return zD||(zD=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=o=>{n(o.target.result)},r.onerror=o=>{var u;e(ds.create("storage-open",{originalErrorMessage:null===(u=o.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(Rw,{keyPath:"compositeKey"})}}catch(r){e(ds.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),zD)}function EA(){return EA=(0,pe.Z)(function*(n,e){const r=(yield bR()).transaction(Rw,"readwrite"),u=r.objectStore(Rw).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=v=>{l()},r.onerror=v=>{var D;m(ds.create("storage-set",{originalErrorMessage:null===(D=v.target.error)||void 0===D?void 0:D.message}))}})}),EA.apply(this,arguments)}const Nw=new Pa.Yd("@firebase/app-check");function CA(n,e){return(0,Ut.hl)()?function qP(n,e){return function CR(n,e){return EA.apply(this,arguments)}(function SR(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Nw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function AR(){return $D().enabled}function xR(){return SA.apply(this,arguments)}function SA(){return SA=(0,pe.Z)(function*(){const n=$D();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),SA.apply(this,arguments)}const XP={error:"UNKNOWN_ERROR"};function JP(n){return Ut.US.encodeString(JSON.stringify(n),!1)}function qD(n){return AA.apply(this,arguments)}function AA(){return AA=(0,pe.Z)(function*(n,e=!1){const t=n.app;ER(t);const r=gi(t);let u,o=r.token;if(o&&!Ey(o)&&(Wo(t,Object.assign(Object.assign({},r),{token:void 0})),o=void 0),!o){const v=yield r.cachedTokenPromise;v&&(Ey(v)?o=v:yield CA(t,void 0))}if(!e&&o&&Ey(o))return{token:o.token};let m,l=!1;if(AR()){r.exchangeTokenPromise||(r.exchangeTokenPromise=wA($P(t,yield xR()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const v=yield r.exchangeTokenPromise;return yield CA(t,v),Wo(t,Object.assign(Object.assign({},r),{token:v})),{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),o=yield r.exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?Nw.warn(v.message):Nw.error(v),u=v}return o?u?m=Ey(o)?{token:o.token,internalError:u}:NR(u):(m={token:o.token},Wo(t,Object.assign(Object.assign({},r),{token:o})),yield CA(t,o)):m=NR(u),l&&RR(t,m),m}),AA.apply(this,arguments)}function MA(n,e){const t=gi(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Wo(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function MR(n){const{app:e}=n,t=gi(e);let r=t.tokenRefresher;r||(r=function e1(n){const{app:e}=n;return new LP((0,pe.Z)(function*(){let r;if(r=gi(e).token?yield qD(n,!0):yield qD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=gi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Wo(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function RR(n,e){const t=gi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Ey(n){return n.expireTimeMillis-Date.now()>0}function NR(n){return{token:JP(XP),error:n}}class t1{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=gi(this.app);for(const t of e)MA(this.app,t.next);return Promise.resolve()}}const BR="app-check-internal";!function g1(){(0,hi._registerComponent)(new uo.wA("app-check",n=>function n1(n,e){return new t1(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(BR).initialize()})),(0,hi._registerComponent)(new uo.wA(BR,n=>function r1(n){return{getToken:e=>qD(n,e),addTokenListener:e=>function xA(n,e,t,r){const{app:o}=n,u=gi(o),l={next:t,error:r,type:e};if(Wo(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,l]})),u.token&&Ey(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),MR(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>MR(n))}(n,"INTERNAL",e),removeTokenListener:e=>MA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,hi.registerVersion)("@firebase/app-check","0.5.16")}();class KD{constructor(){return(0,Sn.vb)("app-check")}}typeof window<"u"&&window;var PA=P(127);const $R=new g.OlP("angularfire2.auth.use-emulator"),HR=new g.OlP("angularfire2.auth.settings"),GR=new g.OlP("angularfire2.auth.tenant-id"),zR=new g.OlP("angularfire2.auth.langugage-code"),qR=new g.OlP("angularfire2.auth.use-device-language"),WR=new g.OlP("angularfire.auth.persistence"),KR=(n,e,t,r,o,u,l,m)=>(0,mr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=o,u&&v.useDeviceLanguage(),l)for(const[D,A]of Object.entries(l))v.settings[D]=A;return m&&v.setPersistence(m),v},[t,r,o,u,l,m]);let FA=(()=>{class n{constructor(t,r,o,u,l,m,v,D,A,M,V,W){const ee=new Ns.x,xe=tt(void 0).pipe((0,BD.Q)(l.outsideAngular),nn(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,1277)))),(0,It.U)(()=>(0,mr.on)(t,u,r)),(0,It.U)(Ee=>KR(Ee,u,m,D,A,M,v,V)),yR({bufferSize:1,refCount:!1}));if(fr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=tt(null);else{xe.pipe(Aa()).subscribe();const gt=xe.pipe(nn(ot=>ot.getRedirectResult().then(Tt=>Tt,()=>null)),Sn.iC,yR({bufferSize:1,refCount:!1})),vt=xe.pipe(nn(ot=>new Dr.y(Tt=>({unsubscribe:u.runOutsideAngular(()=>ot.onAuthStateChanged(kt=>Tt.next(kt),kt=>Tt.error(kt),()=>Tt.complete()))})))),dt=xe.pipe(nn(ot=>new Dr.y(Tt=>({unsubscribe:u.runOutsideAngular(()=>ot.onIdTokenChanged(kt=>Tt.next(kt),kt=>Tt.error(kt),()=>Tt.complete()))}))));this.authState=gt.pipe(_R(vt),(0,mA.R)(l.outsideAngular),(0,BD.Q)(l.insideAngular)),this.user=gt.pipe(_R(dt),(0,mA.R)(l.outsideAngular),(0,BD.Q)(l.insideAngular)),this.idToken=this.user.pipe(nn(ot=>ot?(0,Qt.D)(ot.getIdToken()):tt(null))),this.idTokenResult=this.user.pipe(nn(ot=>ot?(0,Qt.D)(ot.getIdTokenResult()):tt(null))),this.credential=(0,DP.T)(gt,ee,this.authState.pipe(is(ot=>!ot))).pipe((0,It.U)(ot=>ot?.user?ot:null),(0,mA.R)(l.outsideAngular),(0,BD.Q)(l.insideAngular))}return(0,mr.pX)(this,xe,u,{spy:{apply:(Ee,gt,vt)=>{(Ee.startsWith("signIn")||Ee.startsWith("createUser"))&&vt.then(dt=>ee.next(dt))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(mr.Dh),g.LFG(mr.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Sn.HU),g.LFG($R,8),g.LFG(HR,8),g.LFG(GR,8),g.LFG(zR,8),g.LFG(qR,8),g.LFG(WR,8),g.LFG(KD,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),I1=(()=>{class n{constructor(){PA.Z.registerVersion("angularfire",Sn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[FA]}),n})();function ZR(n,e){return function E1(n,e=as.z){return new Dr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function LA(n,e){return ZR(n,e).pipe((0,It.U)(t=>({payload:t,type:"query"})))}function ZD(n,e){return LA(n,e).pipe(Rf(void 0),Xu(),(0,It.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const v=o.find(A=>A.doc.ref.isEqual(l.ref)),D=t?.payload.docs.find(A=>A.ref.isEqual(l.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(l.metadata)||!v&&D&&JSON.stringify(D.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function YR(n,e,t){return ZD(n,t).pipe(Wd((r,o)=>function b1(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function C1(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return VA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return VA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return VA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function ah(n,e=cl.y){return n=n??uh,(0,Fr.e)((t,r)=>{let o,u=!0;t.subscribe((0,pr.x)(r,l=>{const m=e(l);(u||!n(o,m))&&(u=!1,o=m,r.next(l))}))})}(),(0,It.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function VA(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function QR(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class XR{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=ZD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,It.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Rf(void 0),Xu(),is(([r,o])=>o.length>0||!r),(0,It.U)(([r,o])=>o),Sn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Wd((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=QR(e);return YR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}valueChanges(e={}){return LA(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Sn.iC)}get(e){return(0,Qt.D)(this.query.get(e)).pipe(Sn.iC)}add(e){return this.ref.add(e)}doc(e){return new JR(this.ref.doc(e),this.afs)}}class JR{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=nN(r,t);return new XR(o,u,this.afs)}snapshotChanges(){return function D1(n,e){return ZR(n,e).pipe(Rf(void 0),Xu(),(0,It.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,It.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Qt.D)(this.ref.get(e)).pipe(Sn.iC)}}class T1{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ZD(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),is(t=>t.length>0),Sn.iC):ZD(this.query,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Wd((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=QR(e);return YR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}valueChanges(e={}){return LA(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Sn.iC)}get(e){return(0,Qt.D)(this.query.get(e)).pipe(Sn.iC)}}const eN=new g.OlP("angularfire2.enableFirestorePersistence"),tN=new g.OlP("angularfire2.firestore.persistenceSettings"),S1=new g.OlP("angularfire2.firestore.settings"),A1=new g.OlP("angularfire2.firestore.use-emulator");function nN(n,e=(t=>t)){return{query:e(n),ref:n}}let rN=(()=>{class n{constructor(t,r,o,u,l,m,v,D,A,M,V,W,ee,xe,Ee,gt,vt){this.schedulers=v;const dt=(0,mr.on)(t,m,r),ot=A;M&&KR(dt,m,V,ee,xe,Ee,W,gt),[this.firestore,this.persistenceEnabled$]=(0,mr.cc)(`${dt.name}.firestore`,"AngularFirestore",dt.name,()=>{const Tt=m.runOutsideAngular(()=>dt.firestore());if(u&&Tt.settings(u),ot&&Tt.useEmulator(...ot),o&&!fr(l)){const kt=()=>{try{return(0,Qt.D)(Tt.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(lr){return typeof console<"u"&&console.warn(lr),tt(!1)}};return[Tt,m.runOutsideAngular(kt)]}return[Tt,tt(!1)]},[u,ot,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=nN(o,r),m=this.schedulers.ngZone.run(()=>u);return new XR(m,l,this)}collectionGroup(t,r){const o=r||(l=>l),u=this.firestore.collectionGroup(t);return new T1(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new JR(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(mr.Dh),g.LFG(mr.xv,8),g.LFG(eN,8),g.LFG(S1,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Sn.HU),g.LFG(tN,8),g.LFG(A1,8),g.LFG(FA,8),g.LFG($R,8),g.LFG(HR,8),g.LFG(GR,8),g.LFG(zR,8),g.LFG(qR,8),g.LFG(WR,8),g.LFG(KD,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),x1=(()=>{class n{constructor(){PA.Z.registerVersion("angularfire",Sn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:eN,useValue:!0},{provide:tN,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[rN]}),n})();const iN="firebasestorage.googleapis.com",sN="storageBucket";class wr extends Ut.ZR{constructor(e,t,r=0){super(UA(e),`Firebase Storage: ${t} (${UA(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return UA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function UA(n){return"storage/"+n}function BA(){return new wr("unknown","An unknown error occurred, please check the error payload for server response.")}function oN(){return new wr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function aN(){return new wr("canceled","User canceled the upload/download.")}function uN(){return new wr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Dy(n){return new wr("invalid-argument",n)}function cN(){return new wr("app-deleted","The Firebase app was deleted.")}function lN(n){return new wr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ow(n,e){return new wr("invalid-format","String does not match format '"+n+"': "+e)}function kw(n){throw new wr("internal-error","Internal error: "+n)}class ji{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ji.makeFromUrl(e,t)}catch{return new ji(e,"")}if(""===r.path)return r;throw function B1(n){return new wr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+o+"(/(.*))?$","i");function D(ot){ot.path_=decodeURIComponent(ot.path)}const M=t.replace(/[.]/g,"\\."),dt=[{regex:m,indices:{bucket:1,path:3},postModify:function u(ot){"/"===ot.path.charAt(ot.path.length-1)&&(ot.path_=ot.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${M}/v[A-Za-z0-9_]+/b/${o}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:D},{regex:new RegExp(`^https?://${t===iN?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${o}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:D}];for(let ot=0;ot<dt.length;ot++){const Tt=dt[ot],kt=Tt.regex.exec(e);if(kt){let Wa=kt[Tt.indices.path];Wa||(Wa=""),r=new ji(kt[Tt.indices.bucket],Wa),Tt.postModify(r);break}}if(null==r)throw function U1(n){return new wr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class G1{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function YD(n){return"string"==typeof n||n instanceof String}function dN(n){return jA()&&n instanceof Blob}function jA(){return typeof Blob<"u"&&!(0,Ut.UG)()}function $A(n,e,t,r){if(r<e)throw Dy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Dy(`Invalid value for '${n}'. Expected ${t} or less.`)}function sd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function hN(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Wh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Wh||(Wh={})),Wh))();function fN(n,e){const t=n>=500&&n<600,o=-1!==[408,429].indexOf(n),u=-1!==e.indexOf(n);return t||o||u}class Y1{constructor(e,t,r,o,u,l,m,v,D,A,M,V=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=l,this.callback_=m,this.errorCallback_=v,this.timeout_=D,this.progressCallback_=A,this.connectionFactory_=M,this.retry=V,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((W,ee)=>{this.resolve_=W,this.reject_=ee,this.start_()})}start_(){const t=(r,o)=>{const u=this.resolve_,l=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const v=this.callback_(m,m.getResponse());!function W1(n){return void 0!==n}(v)?u():u(v)}catch(v){l(v)}else if(null!==m){const v=BA();v.serverResponse=m.getErrorText(),l(this.errorCallback_?this.errorCallback_(m,v):v)}else l(o.canceled?this.appDelete_?cN():aN():oN())};this.canceled_?t(0,new QD(!1,null,!0)):this.backoffId_=function z1(n,e,t){let r=1,o=null,u=null,l=!1,m=0;function v(){return 2===m}let D=!1;function A(...Ee){D||(D=!0,e.apply(null,Ee))}function M(Ee){o=setTimeout(()=>{o=null,n(W,v())},Ee)}function V(){u&&clearTimeout(u)}function W(Ee,...gt){if(D)return void V();if(Ee)return V(),void A.call(null,Ee,...gt);if(v()||l)return V(),void A.call(null,Ee,...gt);let dt;r<64&&(r*=2),1===m?(m=2,dt=0):dt=1e3*(r+Math.random()),M(dt)}let ee=!1;function xe(Ee){ee||(ee=!0,V(),!D&&(null!==o?(Ee||(m=2),clearTimeout(o),M(0)):Ee||(m=1)))}return M(0),u=setTimeout(()=>{l=!0,xe(!0)},t),xe}((r,o)=>{if(o)return void r(!1,new QD(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const l=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(l),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(l),this.pendingConnection_=null;const m=u.getErrorCode()===Wh.NO_ERROR,v=u.getStatus();if((!m||fN(v,this.additionalRetryCodes_))&&this.retry){const A=u.getErrorCode()===Wh.ABORT;return void r(!1,new QD(!1,null,A))}const D=-1!==this.successCodes_.indexOf(v);r(!0,new QD(D,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function q1(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class QD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function rF(...n){const e=function nF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(jA())return new Blob(n);throw new wr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const yo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class HA{constructor(e,t){this.data=e,this.contentType=t||null}}function GA(n,e){switch(n){case yo.RAW:return new HA(pN(e));case yo.BASE64:case yo.BASE64URL:return new HA(gN(n,e));case yo.DATA_URL:return new HA(function aF(n){const e=new mN(n);return e.base64?gN(yo.BASE64,e.rest):function oF(n){let e;try{e=decodeURIComponent(n)}catch{throw Ow(yo.DATA_URL,"Malformed data URL.")}return pN(e)}(e.rest)}(e),function uF(n){return new mN(n).contentType}(e))}throw BA()}function pN(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function gN(n,e){switch(n){case yo.BASE64:{const o=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(o||u)throw Ow(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case yo.BASE64URL:{const o=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(o||u)throw Ow(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function sF(n){return atob(n)}(e)}catch{throw Ow(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}class mN{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Ow(yo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function cF(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class _c{constructor(e,t){let r=0,o="";dN(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(dN(this.data_)){const o=function iF(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===o?null:new _c(o)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new _c(r,!0)}}static getBlob(...e){if(jA()){const t=e.map(r=>r instanceof _c?r.data_:r);return new _c(rF.apply(null,t))}{const t=e.map(l=>YD(l)?GA(yo.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const o=new Uint8Array(r);let u=0;return t.forEach(l=>{for(let m=0;m<l.length;m++)o[u++]=l[m]}),new _c(o,!0)}}uploadData(){return this.data_}}function zA(n){let e;try{e=JSON.parse(n)}catch{return null}return function Z1(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function yN(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function hF(n,e){return e}class hs{constructor(e,t,r,o){this.server=e,this.local=t||e,this.writable=!!r,this.xform=o||hF}}let XD=null;function Pw(){if(XD)return XD;const n=[];n.push(new hs("bucket")),n.push(new hs("generation")),n.push(new hs("metageneration")),n.push(new hs("name","fullPath",!0));const t=new hs("name");t.xform=function e(u,l){return function fF(n){return!YD(n)||n.length<2?n:yN(n)}(l)},n.push(t);const o=new hs("size");return o.xform=function r(u,l){return void 0!==l?Number(l):l},n.push(o),n.push(new hs("timeCreated")),n.push(new hs("updated")),n.push(new hs("md5Hash",null,!0)),n.push(new hs("cacheControl",null,!0)),n.push(new hs("contentDisposition",null,!0)),n.push(new hs("contentEncoding",null,!0)),n.push(new hs("contentLanguage",null,!0)),n.push(new hs("contentType",null,!0)),n.push(new hs("metadata","customMetadata",!0)),XD=n,XD}function _N(n,e,t){const r=zA(e);return null===r?null:function gF(n,e,t){const r={type:"file"},o=t.length;for(let u=0;u<o;u++){const l=t[u];r[l.local]=l.xform(r,e[l.server])}return function pF(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new ji(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function qA(n,e){const t={},r=e.length;for(let o=0;o<r;o++){const u=e[o];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const vN="prefixes";class vc{constructor(e,t,r,o){this.url=e,this.method=t,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function wc(n){if(!n)throw BA()}function JD(n,e){return function t(r,o){const u=_N(n,o,e);return wc(null!==u),u}}function by(n){return function e(t,r){let o;return o=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function L1(){return new wr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function F1(){return new wr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function P1(n){return new wr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function V1(n){return new wr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,o.status=t.getStatus(),o.serverResponse=r.serverResponse,o}}function Fw(n){const e=by(n);return function t(r,o){let u=e(r,o);return 404===r.getStatus()&&(u=function k1(n){return new wr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=o.serverResponse,u}}function IN(n,e,t){const o=sd(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,m=new vc(o,"GET",JD(n,t),l);return m.errorHandler=Fw(e),m}function IF(n,e,t,r,o){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),o&&(u.maxResults=o);const m=sd(e.bucketOnlyServerUrl(),n.host,n._protocol),D=n.maxOperationRetryTime,A=new vc(m,"GET",function vF(n,e){return function t(r,o){const u=function _F(n,e,t){const r=zA(t);return null===r?null:function yF(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[vN])for(const o of t[vN]){const u=o.replace(/\/$/,""),l=n._makeStorageReference(new ji(e,u));r.prefixes.push(l)}if(t.items)for(const o of t.items){const u=n._makeStorageReference(new ji(e,o.name));r.items.push(u)}return r}(n,e,r)}(n,e,o);return wc(null!==u),u}}(n,e.bucket),D);return A.urlParams=u,A.errorHandler=by(e),A}function DN(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function CF(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class eb{constructor(e,t,r,o){this.current=e,this.total=t,this.finalized=!!r,this.metadata=o||null}}function WA(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{wc(!1)}return wc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const xF={STATE_CHANGED:"state_changed"},fs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function KA(n){switch(n){case"running":case"pausing":case"canceling":return fs.RUNNING;case"paused":return fs.PAUSED;case"success":return fs.SUCCESS;case"canceled":return fs.CANCELED;default:return fs.ERROR}}class MF{constructor(e,t,r){if(function K1(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function Cy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class NF extends class RF{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Wh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Wh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Wh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,o){if(this.sent_)throw kw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==o)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw kw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw kw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw kw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw kw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function qa(){return new NF}class SN{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Pw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{if(this._request=void 0,this._chunkMultiplier=1,o._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const u=this.isExponentialBackoffExpired();if(fN(o.status,[])){if(!u)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();o=oN()}this._error=o,this._transition("error")}},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals("canceled")?this.completeTransitions_():(this._error=o,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((o,u)=>{this._resolve=o,this._reject=u,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function TF(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),l=DN(e,r,o),m={name:l.fullPath},v=sd(u,n.host,n._protocol),A={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},M=qA(l,t),ee=new vc(v,"POST",function W(xe){let Ee;WA(xe);try{Ee=xe.getResponseHeader("X-Goog-Upload-URL")}catch{wc(!1)}return wc(YD(Ee)),Ee},n.maxUploadRetryTime);return ee.urlParams=m,ee.headers=A,ee.body=M,ee.errorHandler=by(e),ee}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,qa,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const o=function SF(n,e,t,r){const v=new vc(t,"POST",function u(D){const A=WA(D,["active","final"]);let M=null;try{M=D.getResponseHeader("X-Goog-Upload-Size-Received")}catch{wc(!1)}M||wc(!1);const V=Number(M);return wc(!isNaN(V)),new eb(V,r.size(),"final"===A)},n.maxUploadRetryTime);return v.headers={"X-Goog-Upload-Command":"query"},v.errorHandler=by(e),v}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(o,qa,t,r);this._request=u,u.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new eb(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((o,u)=>{let l;try{l=function AF(n,e,t,r,o,u,l,m){const v=new eb(0,0);if(l?(v.current=l.current,v.total=l.total):(v.current=0,v.total=r.size()),r.size()!==v.total)throw function $1(){return new wr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const D=v.total-v.current;let A=D;o>0&&(A=Math.min(A,o));const M=v.current;let W="";W=0===A?"finalize":D===A?"upload, finalize":"upload";const ee={"X-Goog-Upload-Command":W,"X-Goog-Upload-Offset":`${v.current}`},xe=r.slice(M,M+A);if(null===xe)throw uN();const dt=new vc(t,"POST",function Ee(ot,Tt){const kt=WA(ot,["active","final"]),lr=v.current+A,Wa=r.size();let QA;return QA="final"===kt?JD(e,u)(ot,Tt):null,new eb(lr,Wa,"final"===kt,QA)},e.maxUploadRetryTime);return dt.headers=ee,dt.body=xe.uploadData(),dt.progressCallback=m||null,dt.errorHandler=by(n),dt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(v){return this._error=v,void this._transition("error")}const m=this._ref.storage._makeRequest(l,qa,o,u,!1);this._request=m,m.getPromise().then(v=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(v.current),v.finalized?(this._metadata=v.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=IN(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(r,qa,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function bN(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},v=function m(){let dt="";for(let ot=0;ot<2;ot++)dt+=Math.random().toString().slice(2);return dt}();l["Content-Type"]="multipart/related; boundary="+v;const D=DN(e,r,o),A=qA(D,t),W=_c.getBlob("--"+v+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+A+"\r\n--"+v+"\r\nContent-Type: "+D.contentType+"\r\n\r\n",r,"\r\n--"+v+"--");if(null===W)throw uN();const ee={name:D.fullPath},xe=sd(u,n.host,n._protocol),gt=n.maxUploadRetryTime,vt=new vc(xe,"POST",JD(n,t),gt);return vt.urlParams=ee,vt.headers=l,vt.body=W.uploadData(),vt.errorHandler=by(e),vt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,qa,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=aN(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=KA(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,o){const u=new MF(t||void 0,r||void 0,o||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(KA(this._state)){case fs.SUCCESS:Cy(this._resolve.bind(null,this.snapshot))();break;case fs.CANCELED:case fs.ERROR:Cy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(KA(this._state)){case fs.RUNNING:case fs.PAUSED:e.next&&Cy(e.next.bind(e,this.snapshot))();break;case fs.SUCCESS:e.complete&&Cy(e.complete.bind(e))();break;default:e.error&&Cy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Gp{constructor(e,t){this._service=e,this._location=t instanceof ji?t:ji.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Gp(e,t)}get root(){const e=new ji(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return yN(this._location.path)}get storage(){return this._service}get parent(){const e=function lF(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ji(this._location.bucket,e);return new Gp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw lN(e)}}function xN(n,e,t){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,pe.Z)(function*(n,e,t){const o=yield MN(n,{pageToken:t});e.prefixes.push(...o.prefixes),e.items.push(...o.items),null!=o.nextPageToken&&(yield xN(n,e,o.nextPageToken))}),ZA.apply(this,arguments)}function MN(n,e){null!=e&&"number"==typeof e.maxResults&&$A("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=IF(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,qa)}function GF(n){n._throwIfRoot("getDownloadURL");const e=function EF(n,e,t){const o=sd(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,m=new vc(o,"GET",function wF(n,e){return function t(r,o){const u=_N(n,o,e);return wc(null!==u),function mF(n,e,t,r){const o=zA(e);if(null===o||!YD(o.downloadTokens))return null;const u=o.downloadTokens;if(0===u.length)return null;const l=encodeURIComponent;return u.split(",").map(D=>{const M=n.fullPath;return sd("/b/"+l(n.bucket)+"/o/"+l(M),t,r)+hN({alt:"media",token:D})})[0]}(u,o,n.host,n._protocol)}}(n,t),l);return m.errorHandler=Fw(e),m}(n.storage,n._location,Pw());return n.storage.makeRequestWithTokens(e,qa).then(t=>{if(null===t)throw function H1(){return new wr("no-download-url","The given file does not have any download URLs.")}();return t})}function RN(n,e){const t=function dF(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ji(n._location.bucket,t);return new Gp(n.storage,r)}function NN(n,e){if(n instanceof YA){const t=n;if(null==t._bucket)throw function j1(){return new wr("no-default-bucket","No default bucket found. Did you set the '"+sN+"' property when initializing the app?")}();const r=new Gp(t,t._bucket);return null!=e?NN(r,e):r}return void 0!==e?RN(n,e):n}function KF(n,e){if(e&&function qF(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof YA)return function WF(n,e){return new Gp(n,e)}(n,e);throw Dy("To use ref(service, url), the first argument must be a Storage instance.")}return NN(n,e)}function ON(n,e){const t=e?.[sN];return null==t?null:ji.makeFromBucketSpec(t,n)}class YA{constructor(e,t,r,o,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=u,this._bucket=null,this._host=iN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=o?ji.makeFromBucketSpec(o,this._host):ON(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ji.makeFromBucketSpec(this._url,e):ON(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$A("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$A("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,pe.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,pe.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Gp(this,e)}_makeRequest(e,t,r,o,u=!0){if(this._deleted)return new G1(cN());{const l=function tF(n,e,t,r,o,u,l=!0){const m=hN(n.urlParams),v=n.url+m,D=Object.assign({},n.headers);return function J1(n,e){e&&(n["X-Firebase-GMPID"]=e)}(D,e),function Q1(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(D,t),function X1(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(D,u),function eF(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(D,r),new Y1(v,n.method,D,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,l)}(e,this._appId,r,o,t,this._firebaseVersion,u);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,pe.Z)(function*(){const[o,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,o,u).getPromise()})()}}const kN="@firebase/storage";function LN(n,e){return KF(n=(0,Ut.m9)(n),e)}function iL(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new YA(t,r,o,e,hi.SDK_VERSION)}!function sL(){(0,hi._registerComponent)(new uo.wA("storage",iL,"PUBLIC").setMultipleInstances(!0)),(0,hi.registerVersion)(kN,"0.9.13",""),(0,hi.registerVersion)(kN,"0.9.13","esm2017")}();class tb{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class UN{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new tb(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new tb(r,this,this._ref))},t)}on(e,t,r,o){let u;return t&&(u="function"==typeof t?l=>t(new tb(l,this,this._ref)):{next:t.next?l=>t.next(new tb(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,o||void 0)}}class BN{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new od(e,this._service))}get items(){return this._delegate.items.map(e=>new od(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class od{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function rL(n,e){return RN(n,e)}(this._delegate,e);return new od(t,this.storage)}get root(){return new od(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new od(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new UN(function YF(n,e,t){return function UF(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new SN(n,new _c(e),t)}(n=(0,Ut.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=yo.RAW,r){this._throwIfRoot("putString");const o=GA(t,e),u=Object.assign({},r);return null==u.contentType&&null!=o.contentType&&(u.contentType=o.contentType),new UN(new SN(this._delegate,new _c(o.data,!0),u),this)}listAll(){return function eL(n){return function jF(n){const e={prefixes:[],items:[]};return xN(n,e).then(()=>e)}(n=(0,Ut.m9)(n))}(this._delegate).then(e=>new BN(e,this.storage))}list(e){return function JF(n,e){return MN(n=(0,Ut.m9)(n),e)}(this._delegate,e||void 0).then(t=>new BN(t,this.storage))}getMetadata(){return function QF(n){return function $F(n){n._throwIfRoot("getMetadata");const e=IN(n.storage,n._location,Pw());return n.storage.makeRequestWithTokens(e,qa)}(n=(0,Ut.m9)(n))}(this._delegate)}updateMetadata(e){return function XF(n,e){return function HF(n,e){n._throwIfRoot("updateMetadata");const t=function DF(n,e,t,r){const u=sd(e.fullServerUrl(),n.host,n._protocol),m=qA(t,r),D=n.maxOperationRetryTime,A=new vc(u,"PATCH",JD(n,r),D);return A.headers={"Content-Type":"application/json; charset=utf-8"},A.body=m,A.errorHandler=Fw(e),A}(n.storage,n._location,e,Pw());return n.storage.makeRequestWithTokens(t,qa)}(n=(0,Ut.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function tL(n){return GF(n=(0,Ut.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function nL(n){return function zF(n){n._throwIfRoot("deleteObject");const e=function bF(n,e){const r=sd(e.fullServerUrl(),n.host,n._protocol),m=new vc(r,"DELETE",function l(v,D){},n.maxOperationRetryTime);return m.successCodes=[200,204],m.errorHandler=Fw(e),m}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,qa)}(n=(0,Ut.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw lN(e)}}class jN{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if($N(e))throw Dy("ref() expected a child path but got a URL, use refFromURL instead.");return new od(LN(this._delegate,e),this)}refFromURL(e){if(!$N(e))throw Dy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ji.makeFromUrl(e,this._delegate.host)}catch{throw Dy("refFromUrl() expected a valid full URL but got an invalid one.")}return new od(LN(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function VN(n,e,t,r={}){!function ZF(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken="string"==typeof o?o:(0,Ut.Sg)(o,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function $N(n){return/^[A-Za-z]+:\/\//.test(n)}function cL(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new jN(t,r)}function HN(n){const e=function dL(n){return new Dr.y(e=>{const t=l=>e.next(l);t(n.snapshot);const u=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){u()}}).pipe(function M1(n,e=as.z){return(0,Fr.e)((t,r)=>{let o=null,u=null,l=null;const m=()=>{if(o){o.unsubscribe(),o=null;const D=u;u=null,r.next(D)}};function v(){const D=l+n,A=e.now();if(A<D)return o=this.schedule(void 0,D-A),void r.add(o);m()}t.subscribe((0,pr.x)(r,D=>{u=D,l=e.now(),o||(o=e.schedule(v,n),r.add(o))},()=>{m(),r.complete()},void 0,()=>{u=o=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,It.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function nb(n){return{getDownloadURL:()=>tt(void 0).pipe(Sn.fc,nn(()=>n.getDownloadURL()),Sn.iC),getMetadata:()=>tt(void 0).pipe(Sn.fc,nn(()=>n.getMetadata()),Sn.iC),delete:()=>(0,Qt.D)(n.delete()),child:e=>nb(n.child(e)),updateMetadata:e=>(0,Qt.D)(n.updateMetadata(e)),put:(e,t)=>HN(n.put(e,t)),putString:(e,t,r)=>HN(n.putString(e,t,r)),list:e=>(0,Qt.D)(n.list(e)),listAll:()=>(0,Qt.D)(n.listAll())}}!function lL(n){const e={TaskState:fs,TaskEvent:xF,StringFormat:yo,Storage:jN,Reference:od};n.INTERNAL.registerComponent(new uo.wA("storage-compat",cL,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.21")}(Tl.Z);const hL=new g.OlP("angularfire2.storageBucket"),fL=new g.OlP("angularfire2.storage.maxUploadRetryTime"),pL=new g.OlP("angularfire2.storage.maxOperationRetryTime"),gL=new g.OlP("angularfire2.storage.use-emulator");let GN=(()=>{class n{constructor(t,r,o,u,l,m,v,D,A,M){const V=(0,mr.on)(t,l,r);this.storage=(0,mr.cc)(`${V.name}.storage.${o}`,"AngularFireStorage",V.name,()=>{const W=l.runOutsideAngular(()=>V.storage(o||void 0)),ee=A;return ee&&W.useEmulator(...ee),v&&W.setMaxUploadRetryTime(v),D&&W.setMaxOperationRetryTime(D),W},[v,D])}ref(t){return nb(this.storage.ref(t))}refFromURL(t){return nb(this.storage.refFromURL(t))}upload(t,r,o){return nb(this.storage.ref(t)).put(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(mr.Dh),g.LFG(mr.xv,8),g.LFG(hL,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Sn.HU),g.LFG(fL,8),g.LFG(pL,8),g.LFG(gL,8),g.LFG(KD,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),mL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})(),yL=(()=>{class n{constructor(){PA.Z.registerVersion("angularfire",Sn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[GN],imports:[mL]}),n})();function _L(n,e){if(1&n&&(g.TgZ(0,"sup",8),g._uU(1),g.qZA()),2&n){const t=g.oxw();g.xp6(1),g.hij(" ",t.profilePromt," ")}}function vL(n,e){if(1&n&&(g.TgZ(0,"sup",8),g._uU(1),g.qZA()),2&n){const t=g.oxw();g.xp6(1),g.hij(" ",t.passwordPrompt," ")}}function wL(n,e){if(1&n&&(g.TgZ(0,"sup",8),g._uU(1),g.qZA()),2&n){const t=g.oxw();g.xp6(1),g.hij(" ",t.logNotify," ")}}const IL=[{path:"",pathMatch:"full",redirectTo:"main"},{path:"main",component:(()=>{class n{constructor(t,r,o,u,l,m){this.router=t,this.electronService=r,this.ipcService=o,this.cdRef=u,this.afs=l,this.afsU=m,this.invalidPassword=!1,this.invalidId=!1,this.logPrompt=!1,this.nudgeRequest=!1,this.ssRequest=!1}ngOnInit(){this.profileCollection=this.afs.collection("profiles"),this.profiles=this.profileCollection.valueChanges(),this.profiles.subscribe(t=>(this.profileList=t,console.log(this.profileList))),setInterval(()=>{this.ipcService.send("check","checking"),this.getProfile(),this.ipcService.on("appLogs",(t,r)=>{this.appLogs=r,this.logDate=new Date,this.afs.collection("profileLogs").add({eventDetails:this.appLogs.windowClass+" / "+this.appLogs.windowName+" is currently active",isIncognito:"Windows PC",logDate:this.logDate,profileName:this.loggedProfileId,userName:this.loggedUsername}),this.cdRef.detectChanges()})},6e4),setInterval(()=>{this.getProfile(),this.checkNudge(),this.checkSS()},5e3)}login(){this.profileId?(this.invalidId=!1,this.profilePromt=""):(this.invalidId=!0,this.profilePromt="Profile Id is required"),this.username?(this.invalidPassword=!1,this.passwordPrompt=""):(this.invalidPassword=!0,this.passwordPrompt="Username is required");for(let t=0;t<this.profileList.length;t++){if(console.log(this.username),console.log(this.profileId),this.profileId==this.profileList[t].profileId&&this.username==this.profileList[t].username)return this.logNotify="We are now scouting this machine",this.logPrompt=!0,localStorage.setItem("logProfile",this.profileId),localStorage.setItem("logUser",this.username),this.checkConnect(),void setTimeout(()=>{this.logNotify="",this.logPrompt=!1,this.username="",this.profileId=""},5e3);this.logNotify="Invalid Credentials",this.logPrompt=!0}}checkConnect(){this.ipcService.send("message","ping"),this.ipcService.on("reply",(t,r)=>{this.pong=r,1==this.pong&&(this.connectCheck="This device is now being scouted"),this.cdRef.detectChanges()})}getProfile(){this.loggedProfileId=localStorage.getItem("logProfile"),this.loggedUsername=localStorage.getItem("logUser"),console.log(this.loggedProfileId,this.loggedUsername),this.logprofileCollection=this.afs.collection("profiles",t=>t.where("profileId","==",this.loggedProfileId).where("username","==",this.loggedUsername)),this.logprofiles=this.logprofileCollection.valueChanges(),this.logprofiles.subscribe(t=>(this.logprofileList=t,console.log(this.logprofileList),this.nudgeRequest=this.logprofileList[0].nudge,this.ssRequest=this.logprofileList[0].ssrequest))}checkNudge(){1==this.nudgeRequest&&this.ipcService.send("watch","looking")}checkSS(){1==this.ssRequest&&(this.getScreenshot(),console.log("ready to upload",this.ssUrl),this.imagePathName="gallery"+Math.random(),this.imageRef=this.afsU.ref(this.imagePathName),this.imageRef.putString(this.ssUrl,"base64",{contentType:"image/png"}),this.imageSub=this.imageBaseRef.snapshotChanges().pipe(function Vo(...n){return function mC(...n){const e=(0,Ni.yG)(n);return(0,Fr.e)((t,r)=>{Jw()((0,Qt.D)([t,...n],e)).subscribe(r)})}(...n)}(this.imageRef.getDownloadURL())).subscribe(t=>{this.downloadUrl=t,this.galleryUrl=this.downloadUrl,this.galleryLogDate=new Date,this.afs.collection("gallery").add({ssUrl:this.galleryUrl,profileId:this.loggedProfileId,userName:this.loggedUsername})}))}getScreenshot(){this.ipcService.send("screenshot","sendSS"),this.ipcService.on("capture",(t,r)=>{this.ssUrl=r,this.cdRef.detectChanges()})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(ei),g.Y36(bl),g.Y36(Zg),g.Y36(g.sBO),g.Y36(rN),g.Y36(GN))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-login"]],decls:32,vars:6,consts:[[1,"main"],[1,"headerContainer"],["src","https://firebasestorage.googleapis.com/v0/b/prodscout-90022.appspot.com/o/ps128.png?alt=media&token=dbeed48f-3063-4c7c-8e7f-94d35fcf4a3f"],[1,"bodyContainer"],["type","text",1,"input-form-standard",3,"ngModel","ngModelChange"],["style","font-size: 10px; color: red",4,"ngIf"],["type","submit",1,"button-lg",3,"click"],[1,"footerContainer"],[2,"font-size","10px","color","red"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div",1),g._UZ(2,"img",2),g.TgZ(3,"h1"),g._uU(4,"Deskty!"),g.qZA(),g.TgZ(5,"h2"),g._uU(6,"prodScout Watcher for Desktop"),g.qZA()(),g.TgZ(7,"div",3),g._uU(8),g.TgZ(9,"h5"),g._uU(10,"Log-In (Managed Profiles)"),g.qZA(),g.TgZ(11,"label"),g._uU(12,"Profile Id "),g.qZA(),g._UZ(13,"br"),g.TgZ(14,"input",4),g.NdJ("ngModelChange",function(u){return r.profileId=u}),g.qZA(),g._UZ(15,"br"),g.YNc(16,_L,2,1,"sup",5),g._UZ(17,"br"),g.TgZ(18,"label"),g._uU(19,"Username "),g.qZA(),g._UZ(20,"br"),g.TgZ(21,"input",4),g.NdJ("ngModelChange",function(u){return r.username=u}),g.qZA(),g._UZ(22,"br"),g.YNc(23,vL,2,1,"sup",5),g._UZ(24,"br"),g.TgZ(25,"button",6),g.NdJ("click",function(){return r.login()}),g._uU(26," Send Scouts "),g.qZA(),g._UZ(27,"br"),g.YNc(28,wL,2,1,"sup",5),g.qZA(),g.TgZ(29,"div",7)(30,"label"),g._uU(31,"prodScout 2022 (Deskty)"),g.qZA()()()),2&t&&(g.xp6(8),g.hij(" ",r.connectCheck," "),g.xp6(6),g.Q6J("ngModel",r.profileId),g.xp6(2),g.Q6J("ngIf",r.invalidId),g.xp6(5),g.Q6J("ngModel",r.username),g.xp6(2),g.Q6J("ngIf",r.invalidPassword),g.xp6(5),g.Q6J("ngIf",r.logPrompt))},dependencies:[rr,Qc,tg,hg],styles:[".main[_ngcontent-%COMP%]   .headerContainer[_ngcontent-%COMP%]{margin-top:50px;text-align:center}.main[_ngcontent-%COMP%]   .bodyContainer[_ngcontent-%COMP%]{font-size:20px;margin-top:50px;text-align:center}.main[_ngcontent-%COMP%]   .bodyContainer[_ngcontent-%COMP%]   .input-form-standard[_ngcontent-%COMP%]{font-size:24px;width:180px;border:solid 1px #5da7db;border-radius:4px;text-align:center}.main[_ngcontent-%COMP%]   .bodyContainer[_ngcontent-%COMP%]   .button-lg[_ngcontent-%COMP%]{border:solid 1px #5da7db;border-radius:15px;background:#5da7db;font-size:16px;margin:5px;padding:5px;color:#fff}.main[_ngcontent-%COMP%]   .footerContainer[_ngcontent-%COMP%]{text-align:center;margin-top:10px;font-size:12px}"]}),n})()},{path:"mainmenu",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-main"]],decls:2,vars:0,template:function(t,r){1&t&&(g.TgZ(0,"p"),g._uU(1,"main works!"),g.qZA())}}),n})()}];let EL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[dI.forRoot(IL),dI]}),n})(),DL=(()=>{class n{constructor(){this.title="deskty"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},dependencies:[N0]}),n})();const zN_firebaseConfig={apiKey:"AIzaSyCXQUepOnbY0h3_kfUENO1izOF9pbgdPvs",authDomain:"prodscout-90022.firebaseapp.com",projectId:"prodscout-90022",storageBucket:"prodscout-90022.appspot.com",messagingSenderId:"420088922412",appId:"1:420088922412:web:b90702f51a77e7fdbdec89",measurementId:"G-SQVJ1QZ5EQ"};let bL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[DL]}),n.\u0275inj=g.cJS({imports:[zc,EL,Qy,Cl,mr.hO.initializeApp(zN_firebaseConfig),x1,I1,yL]}),n})();(0,g.G48)(),wu().bootstrapModule(bL).catch(n=>console.error(n))},5867:(at,Se,P)=>{P.d(Se,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=P(9681);(0,g.registerVersion)("firebase","9.13.0","app")},127:(at,Se,P)=>{P.d(Se,{Z:()=>g.Z});var g=P(3942);g.Z.registerVersion("firebase","9.13.0","app-compat")},1277:(at,Se,P)=>{P.r(Se);var g=P(5861),J=P(3942),O=P(2090),se=P(9681),ie=P(1877),le=P(655),ce=P(4859);const we=function Le(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},et=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},me=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ye=new ie.Yd("@firebase/auth");function rt(y,...h){Ye.logLevel<=ie.in.ERROR&&Ye.error(`Auth (${se.SDK_VERSION}): ${y}`,...h)}function Ae(y,...h){throw je(y,...h)}function _e(y,...h){return je(y,...h)}function Ie(y,h,p){const w=Object.assign(Object.assign({},et()),{[h]:p});return new O.LL("auth","Firebase",w).create(h,{appName:y.name})}function Ue(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&Ae(y,"argument-error"),Ie(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(y,...h){if("string"!=typeof y){const p=h[0],w=[...h.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(p,...w)}return me.create(y,...h)}function U(y,h,...p){if(!y)throw je(h,...p)}function ge(y){const h="INTERNAL ASSERTION FAILED: "+y;throw rt(h),new Error(h)}function z(y,h){y||ge(h)}const Q=new Map;function ne(y){z(y instanceof Function,"Expected a class definition");let h=Q.get(y);return h?(z(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,Q.set(y,h),h)}function Oe(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ut(){return"http:"===Xt()||"https:"===Xt()}function Xt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class an{constructor(h,p){this.shortDelay=h,this.longDelay=p,z(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Ht(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ut()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mn(y,h){z(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class Zt{static initialize(h,p,w){this.fetchImpl=h,p&&(this.headersImpl=p),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ge("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ge("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ge("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Jt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},xr=new an(3e4,6e4);function Ot(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function cn(y,h,p,w){return $i.apply(this,arguments)}function $i(){return($i=(0,g.Z)(function*(y,h,p,w,S={}){return mi(y,S,(0,g.Z)(function*(){let N={},G={};w&&("GET"===h?G=w:N={body:JSON.stringify(w)});const ae=(0,O.xO)(Object.assign({key:y.config.apiKey},G)).slice(1),Fe=yield y._getAdditionalHeaders();return Fe["Content-Type"]="application/json",y.languageCode&&(Fe["X-Firebase-Locale"]=y.languageCode),Zt.fetch()(yi(y,y.config.apiHost,p,ae),Object.assign({method:h,headers:Fe,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function mi(y,h,p){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,g.Z)(function*(y,h,p){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},Jt),h);try{const S=new ii(y),N=yield Promise.race([p(),S.promise]);S.clearNetworkTimeout();const G=yield N.json();if("needConfirmation"in G)throw si(y,"account-exists-with-different-credential",G);if(N.ok&&!("errorMessage"in G))return G;{const ae=N.ok?G.errorMessage:G.error.message,[Fe,Ze]=ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw si(y,"credential-already-in-use",G);if("EMAIL_EXISTS"===Fe)throw si(y,"email-already-in-use",G);if("USER_DISABLED"===Fe)throw si(y,"user-disabled",G);const mt=w[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(Ze)throw Ie(y,mt,Ze);Ae(y,mt)}}catch(S){if(S instanceof O.ZR)throw S;Ae(y,"network-request-failed")}})).apply(this,arguments)}function $r(y,h,p,w){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,g.Z)(function*(y,h,p,w,S={}){const N=yield cn(y,h,p,w,S);return"mfaPendingCredential"in N&&Ae(y,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function yi(y,h,p,w){const S=`${h}${p}?${w}`;return y.config.emulator?mn(y.config,S):`${y.config.apiScheme}://${S}`}class ii{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,w)=>{this.timer=setTimeout(()=>w(_e(this.auth,"network-request-failed")),xr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function si(y,h,p){const w={appName:y.name};p.email&&(w.email=p.email),p.phoneNumber&&(w.phoneNumber=p.phoneNumber);const S=_e(y,h,w);return S.customData._tokenResponse=p,S}function Ke(){return(Ke=(0,g.Z)(function*(y,h){return cn(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Ir(y,h){return ps.apply(this,arguments)}function ps(){return(ps=(0,g.Z)(function*(y,h){return cn(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Zn(y,h){return oi.apply(this,arguments)}function oi(){return(oi=(0,g.Z)(function*(y,h){return cn(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Ti(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function fn(){return(fn=(0,g.Z)(function*(y,h=!1){const p=(0,O.m9)(y),w=yield p.getIdToken(h),S=it(w);U(S&&S.exp&&S.auth_time&&S.iat,p.auth,"internal-error");const N="object"==typeof S.firebase?S.firebase:void 0,G=N?.sign_in_provider;return{claims:S,token:w,authTime:Ti(ft(S.auth_time)),issuedAtTime:Ti(ft(S.iat)),expirationTime:Ti(ft(S.exp)),signInProvider:G||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function ft(y){return 1e3*Number(y)}function it(y){var h;const[p,w,S]=y.split(".");if(void 0===p||void 0===w||void 0===S)return rt("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,O.tV)(w);return N?JSON.parse(N):(rt("Failed to decode base64 JWT payload"),null)}catch(N){return rt("Caught error parsing JWT payload as JSON",null===(h=N)||void 0===h?void 0:h.toString()),null}}function dr(y,h){return jn.apply(this,arguments)}function jn(){return(jn=(0,g.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(w){throw w instanceof O.ZR&&Hr(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function Hr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class At{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const S=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const w=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),w)}iteration(){var h=this;return(0,g.Z)(function*(){var p;try{yield h.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(p=w)||void 0===p?void 0:p.code)&&h.schedule(!0))}h.schedule()})()}}class gs{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ti(this.lastLoginAt),this.creationTime=Ti(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function en(y){return Si.apply(this,arguments)}function Si(){return(Si=(0,g.Z)(function*(y){var h;const p=y.auth,w=yield y.getIdToken(),S=yield dr(y,Zn(p,{idToken:w}));U(S?.users.length,p,"internal-error");const N=S.users[0];y._notifyReloadListener(N);const G=null!==(h=N.providerUserInfo)&&void 0!==h&&h.length?Xe(N.providerUserInfo):[],ae=Rr(y.providerData,G),mt=!!y.isAnonymous&&!(y.email&&N.passwordHash||ae?.length),yt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:ae,metadata:new gs(N.createdAt,N.lastLoginAt),isAnonymous:mt};Object.assign(y,yt)})).apply(this,arguments)}function Yn(){return(Yn=(0,g.Z)(function*(y){const h=(0,O.m9)(y);yield en(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Rr(y,h){return[...y.filter(w=>!h.some(S=>S.providerId===w.providerId)),...h]}function Xe(y){return y.map(h=>{var{providerId:p}=h,w=(0,le._T)(h,["providerId"]);return{providerId:p,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Qe(){return(Qe=(0,g.Z)(function*(y,h){const p=yield mi(y,{},(0,g.Z)(function*(){const w=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:N}=y.config,G=yi(y,S,"/v1/token",`key=${N}`),ae=yield y._getAdditionalHeaders();return ae["Content-Type"]="application/x-www-form-urlencoded",Zt.fetch()(G,{method:"POST",headers:ae,body:w})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Dt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){U(h.idToken,"internal-error"),U(typeof h.idToken<"u","internal-error"),U(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function on(y){const h=it(y);return U(h,"internal-error"),U(typeof h.exp<"u","internal-error"),U(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var w=this;return(0,g.Z)(function*(){return U(!w.accessToken||w.refreshToken,h,"user-token-expired"),p||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(h,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var w=this;return(0,g.Z)(function*(){const{accessToken:S,refreshToken:N,expiresIn:G}=yield function be(y,h){return Qe.apply(this,arguments)}(h,p);w.updateTokensAndExpiration(S,N,Number(G))})()}updateTokensAndExpiration(h,p,w){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(h,p){const{refreshToken:w,accessToken:S,expirationTime:N}=p,G=new Dt;return w&&(U("string"==typeof w,"internal-error",{appName:h}),G.refreshToken=w),S&&(U("string"==typeof S,"internal-error",{appName:h}),G.accessToken=S),N&&(U("number"==typeof N,"internal-error",{appName:h}),G.expirationTime=N),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Dt,this.toJSON())}_performRefresh(){return ge("not implemented")}}function wt(y,h){U("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class Pt{constructor(h){var{uid:p,auth:w,stsTokenManager:S}=h,N=(0,le._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new At(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=w,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new gs(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,g.Z)(function*(){const w=yield dr(p,p.stsTokenManager.getToken(p.auth,h));return U(w,p.auth,"internal-error"),p.accessToken!==w&&(p.accessToken=w,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),w})()}getIdTokenResult(h){return function Bn(y){return fn.apply(this,arguments)}(this,h)}reload(){return function tn(y){return Yn.apply(this,arguments)}(this)}_assign(h){this!==h&&(U(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new Pt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var w=this;return(0,g.Z)(function*(){let S=!1;h.idToken&&h.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(h),S=!0),p&&(yield en(w)),yield w.auth._persistUserIfCurrent(w),S&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var h=this;return(0,g.Z)(function*(){const p=yield h.getIdToken();return yield dr(h,function Ko(y,h){return Ke.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var w,S,N,G,ae,Fe,Ze,mt;const yt=null!==(w=p.displayName)&&void 0!==w?w:void 0,gr=null!==(S=p.email)&&void 0!==S?S:void 0,Fi=null!==(N=p.phoneNumber)&&void 0!==N?N:void 0,Sf=null!==(G=p.photoURL)&&void 0!==G?G:void 0,Qy=null!==(ae=p.tenantId)&&void 0!==ae?ae:void 0,zd=null!==(Fe=p._redirectEventId)&&void 0!==Fe?Fe:void 0,Xy=null!==(Ze=p.createdAt)&&void 0!==Ze?Ze:void 0,Kw=null!==(mt=p.lastLoginAt)&&void 0!==mt?mt:void 0,{uid:Jy,emailVerified:Zw,isAnonymous:Yw,providerData:pg,stsTokenManager:gg}=p;U(Jy&&gg,h,"internal-error");const mg=Dt.fromJSON(this.name,gg);U("string"==typeof Jy,h,"internal-error"),wt(yt,h.name),wt(gr,h.name),U("boolean"==typeof Zw,h,"internal-error"),U("boolean"==typeof Yw,h,"internal-error"),wt(Fi,h.name),wt(Sf,h.name),wt(Qy,h.name),wt(zd,h.name),wt(Xy,h.name),wt(Kw,h.name);const tt=new Pt({uid:Jy,auth:h,email:gr,emailVerified:Zw,displayName:yt,isAnonymous:Yw,photoURL:Sf,phoneNumber:Fi,tenantId:Qy,stsTokenManager:mg,createdAt:Xy,lastLoginAt:Kw});return pg&&Array.isArray(pg)&&(tt.providerData=pg.map(Ns=>Object.assign({},Ns))),zd&&(tt._redirectEventId=zd),tt}static _fromIdTokenResponse(h,p,w=!1){return(0,g.Z)(function*(){const S=new Dt;S.updateFromServerResponse(p);const N=new Pt({uid:p.localId,auth:h,stsTokenManager:S,isAnonymous:w});return yield en(N),N})()}}const L=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,w){var S=this;return(0,g.Z)(function*(){S.storage[p]=w})()}_get(p){var w=this;return(0,g.Z)(function*(){const S=w.storage[p];return void 0===S?null:S})()}_remove(p){var w=this;return(0,g.Z)(function*(){delete w.storage[p]})()}_addListener(p,w){}_removeListener(p,w){}}return y.type="NONE",y})();function q(y,h,p){return`firebase:${y}:${h}:${p}`}class ve{constructor(h,p,w){this.persistence=h,this.auth=p,this.userKey=w;const{config:S,name:N}=this.auth;this.fullUserKey=q(this.userKey,S.apiKey,N),this.fullPersistenceKey=q("persistence",S.apiKey,N),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?Pt._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,g.Z)(function*(){if(p.persistence===h)return;const w=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,w?p.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,w="authUser"){return(0,g.Z)(function*(){if(!p.length)return new ve(ne(L),h,w);const S=(yield Promise.all(p.map(function(){var Ze=(0,g.Z)(function*(mt){if(yield mt._isAvailable())return mt});return function(mt){return Ze.apply(this,arguments)}}()))).filter(Ze=>Ze);let N=S[0]||ne(L);const G=q(w,h.config.apiKey,h.name);let ae=null;for(const Ze of p)try{const mt=yield Ze._get(G);if(mt){const yt=Pt._fromJSON(h,mt);Ze!==N&&(ae=yt),N=Ze;break}}catch{}const Fe=S.filter(Ze=>Ze._shouldAllowMigration);return N._shouldAllowMigration&&Fe.length?(N=Fe[0],ae&&(yield N._set(G,ae.toJSON())),yield Promise.all(p.map(function(){var Ze=(0,g.Z)(function*(mt){if(mt!==N)try{yield mt._remove(G)}catch{}});return function(mt){return Ze.apply(this,arguments)}}())),new ve(N,h,w)):new ve(N,h,w)})()}}function Y(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(dn(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(He(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Ve(h))return"Blackberry";if($e(h))return"Webos";if(ct(h))return"Safari";if((h.includes("chrome/")||Yt(h))&&!h.includes("edge/"))return"Chrome";if(qt(h))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function He(y=(0,O.z$)()){return/firefox\//i.test(y)}function ct(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Yt(y=(0,O.z$)()){return/crios\//i.test(y)}function dn(y=(0,O.z$)()){return/iemobile/i.test(y)}function qt(y=(0,O.z$)()){return/android/i.test(y)}function Ve(y=(0,O.z$)()){return/blackberry/i.test(y)}function $e(y=(0,O.z$)()){return/webos/i.test(y)}function jt(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Us(y=(0,O.z$)()){return jt(y)||qt(y)||$e(y)||Ve(y)||/windows phone/i.test(y)||dn(y)}function ms(y,h=[]){let p;switch(y){case"Browser":p=Y((0,O.z$)());break;case"Worker":p=`${Y((0,O.z$)())}-${y}`;break;default:p=y}const w=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${se.SDK_VERSION}/${w}`}class _o{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const w=N=>new Promise((G,ae)=>{try{G(h(N))}catch(Fe){ae(Fe)}});w.onAbort=p,this.queue.push(w);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,g.Z)(function*(){var w;if(p.auth.currentUser===h)return;const S=[];try{for(const N of p.queue)yield N(h),N.onAbort&&S.push(N.onAbort)}catch(N){S.reverse();for(const G of S)try{G()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=N)||void 0===w?void 0:w.message})}})()}}class Ft{constructor(h,p,w){this.app=h,this.heartbeatServiceProvider=p,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bs(this),this.idTokenSubscription=new Bs(this),this.beforeStateQueue=new _o(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=me,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(h,p){var w=this;return p&&(this._popupRedirectResolver=ne(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var S,N;if(!w._deleted&&(w.persistenceManager=yield ve.create(w,h),!w._deleted)){if(null!==(S=w._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(p),w.lastNotifiedUid=(null===(N=w.currentUser)||void 0===N?void 0:N.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,g.Z)(function*(){var w;const S=yield p.assertedPersistence.getCurrentUser();let N=S,G=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const ae=null===(w=p.redirectUser)||void 0===w?void 0:w._redirectEventId,Fe=N?._redirectEventId,Ze=yield p.tryRedirectSignIn(h);(!ae||ae===Fe)&&Ze?.user&&(N=Ze.user,G=!0)}if(!N)return p.directlySetCurrentUser(null);if(!N._redirectEventId){if(G)try{yield p.beforeStateQueue.runMiddleware(N)}catch(ae){N=S,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(ae))}return N?p.reloadAndSetCurrentUserOrClear(N):p.directlySetCurrentUser(null)}return U(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===N._redirectEventId?p.directlySetCurrentUser(N):p.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(h){var p=this;return(0,g.Z)(function*(){let w=null;try{w=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,g.Z)(function*(){var w;try{yield en(h)}catch(S){if("auth/network-request-failed"!==(null===(w=S)||void 0===w?void 0:w.code))return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function We(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){const w=h?(0,O.m9)(h):null;return w&&U(w.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(w&&w._clone(p))})()}_updateCurrentUser(h,p=!1){var w=this;return(0,g.Z)(function*(){if(!w._deleted)return h&&U(w.tenantId===h.tenantId,w,"tenant-id-mismatch"),p||(yield w.beforeStateQueue.runMiddleware(h)),w.queue((0,g.Z)(function*(){yield w.directlySetCurrentUser(h),w.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(ne(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,p,w){return this.registerStateListener(this.authStateSubscription,h,p,w)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,w){return this.registerStateListener(this.idTokenSubscription,h,p,w)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var w=this;return(0,g.Z)(function*(){const S=yield w.getOrInitRedirectPersistenceManager(p);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const w=h&&ne(h)||p._popupRedirectResolver;U(w,p,"argument-error"),p.redirectPersistenceManager=yield ve.create(p,[ne(w._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,g.Z)(function*(){var w,S;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(w=p._currentUser)||void 0===w?void 0:w._redirectEventId)===h?p._currentUser:(null===(S=p.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,g.Z)(function*(){if(h===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,w,S){if(this._deleted)return()=>{};const N="function"==typeof p?p:p.next.bind(p),G=this._isInitialized?Promise.resolve():this._initializationPromise;return U(G,this,"internal-error"),G.then(()=>N(this.currentUser)),"function"==typeof p?h.addObserver(p,w,S):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=ms(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var p;const w={"X-Client-Version":h.clientVersion};h.app.options.appId&&(w["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return S&&(w["X-Firebase-Client"]=S),w})()}}function In(y){return(0,O.m9)(y)}class Bs{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ai(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function ys(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class hr{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return ge("not implemented")}_getIdTokenResponse(h){return ge("not implemented")}_linkToIdToken(h,p){return ge("not implemented")}_getReauthenticationResolver(h){return ge("not implemented")}}function Hn(y,h){return Za.apply(this,arguments)}function Za(){return(Za=(0,g.Z)(function*(y,h){return cn(y,"POST","/v1/accounts:resetPassword",Ot(y,h))})).apply(this,arguments)}function ln(y,h){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,g.Z)(function*(y,h){return cn(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ec(y,h){return js.apply(this,arguments)}function js(){return(js=(0,g.Z)(function*(y,h){return cn(y,"POST","/v1/accounts:update",Ot(y,h))})).apply(this,arguments)}function vo(){return(vo=(0,g.Z)(function*(y,h){return $r(y,"POST","/v1/accounts:signInWithPassword",Ot(y,h))})).apply(this,arguments)}function vs(y,h){return _i.apply(this,arguments)}function _i(){return(_i=(0,g.Z)(function*(y,h){return cn(y,"POST","/v1/accounts:sendOobCode",Ot(y,h))})).apply(this,arguments)}function rr(y,h){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,g.Z)(function*(y,h){return vs(y,h)})).apply(this,arguments)}function ir(y,h){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,g.Z)(function*(y,h){return vs(y,h)})).apply(this,arguments)}function Ya(y,h){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,g.Z)(function*(y,h){return vs(y,h)})).apply(this,arguments)}function bc(y,h){return Er.apply(this,arguments)}function Er(){return(Er=(0,g.Z)(function*(y,h){return vs(y,h)})).apply(this,arguments)}function ad(){return(ad=(0,g.Z)(function*(y,h){return $r(y,"POST","/v1/accounts:signInWithEmailLink",Ot(y,h))})).apply(this,arguments)}function Cc(){return(Cc=(0,g.Z)(function*(y,h){return $r(y,"POST","/v1/accounts:signInWithEmailLink",Ot(y,h))})).apply(this,arguments)}class Tc extends hr{constructor(h,p,w,S=null){super("password",w),this._email=h,this._password=p,this._tenantId=S}static _fromEmailAndPassword(h,p){return new Tc(h,p,"password")}static _fromEmailAndCode(h,p,w=null){return new Tc(h,p,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function Zo(y,h){return vo.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Kh(y,h){return ad.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:Ae(h,"internal-error")}})()}_linkToIdToken(h,p){var w=this;return(0,g.Z)(function*(){switch(w.signInMethod){case"password":return ln(h,{idToken:p,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Zh(y,h){return Cc.apply(this,arguments)}(h,{idToken:p,email:w._email,oobCode:w._password});default:Ae(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Xn(y,h){return ud.apply(this,arguments)}function ud(){return(ud=(0,g.Z)(function*(y,h){return $r(y,"POST","/v1/accounts:signInWithIdp",Ot(y,h))})).apply(this,arguments)}class Hi extends hr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new Hi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):Ae("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:S}=p,N=(0,le._T)(p,["providerId","signInMethod"]);if(!w||!S)return null;const G=new Hi(w,S);return G.idToken=N.idToken||void 0,G.accessToken=N.accessToken||void 0,G.secret=N.secret,G.nonce=N.nonce,G.pendingToken=N.pendingToken||null,G}_getIdTokenResponse(h){return Xn(h,this.buildRequest())}_linkToIdToken(h,p){const w=this.buildRequest();return w.idToken=p,Xn(h,w)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Xn(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,O.xO)(p)}return h}}function qp(y,h){return cd.apply(this,arguments)}function cd(){return(cd=(0,g.Z)(function*(y,h){return cn(y,"POST","/v1/accounts:sendVerificationCode",Ot(y,h))})).apply(this,arguments)}function ws(){return(ws=(0,g.Z)(function*(y,h){return $r(y,"POST","/v1/accounts:signInWithPhoneNumber",Ot(y,h))})).apply(this,arguments)}function ld(){return(ld=(0,g.Z)(function*(y,h){const p=yield $r(y,"POST","/v1/accounts:signInWithPhoneNumber",Ot(y,h));if(p.temporaryProof)throw si(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Kp={USER_NOT_FOUND:"user-not-found"};function dd(){return(dd=(0,g.Z)(function*(y,h){return $r(y,"POST","/v1/accounts:signInWithPhoneNumber",Ot(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Kp)})).apply(this,arguments)}class Is extends hr{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new Is({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new Is({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function Sc(y,h){return ws.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Wp(y,h){return ld.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Zp(y,h){return dd.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:w,verificationCode:S}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:w,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:w,phoneNumber:S,temporaryProof:N}=h;return w||p||S||N?new Is({verificationId:p,verificationCode:w,phoneNumber:S,temporaryProof:N}):null}}class Qa{constructor(h){var p,w,S,N,G,ae;const Fe=(0,O.zd)((0,O.pd)(h)),Ze=null!==(p=Fe.apiKey)&&void 0!==p?p:null,mt=null!==(w=Fe.oobCode)&&void 0!==w?w:null,yt=function hd(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Fe.mode)&&void 0!==S?S:null);U(Ze&&mt&&yt,"argument-error"),this.apiKey=Ze,this.operation=yt,this.code=mt,this.continueUrl=null!==(N=Fe.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(G=Fe.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(ae=Fe.tenantId)&&void 0!==ae?ae:null}static parseLink(h){const p=function fd(y){const h=(0,O.zd)((0,O.pd)(y)).link,p=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,w=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(w?(0,O.zd)((0,O.pd)(w)).link:null)||w||p||h||y}(h);try{return new Qa(p)}catch{return null}}}let xi=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,w){return Tc._fromEmailAndPassword(p,w)}static credentialWithLink(p,w){const S=Qa.parseLink(w);return U(S,"argument-error"),Tc._fromEmailAndCode(p,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Gi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class zi extends Gi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class $s extends zi{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return U("providerId"in p&&"signInMethod"in p,"argument-error"),Hi._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return U(h.idToken||h.accessToken,"argument-error"),Hi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return $s.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return $s.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:w,oauthTokenSecret:S,pendingToken:N,nonce:G,providerId:ae}=h;if(!w&&!S&&!p&&!N||!ae)return null;try{return new $s(ae)._credential({idToken:p,accessToken:w,nonce:G,pendingToken:N})}catch{return null}}}let Qo=(()=>{class y extends zi{constructor(){super("facebook.com")}static credential(p){return Hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Xa=(()=>{class y extends zi{constructor(){super("google.com"),this.addScope("profile")}static credential(p,w){return Hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:w})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:w,oauthAccessToken:S}=p;if(!w&&!S)return null;try{return y.credential(w,S)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Ac=(()=>{class y extends zi{constructor(){super("github.com")}static credential(p){return Hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Xo extends hr{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Xn(h,this.buildRequest())}_linkToIdToken(h,p){const w=this.buildRequest();return w.idToken=p,Xn(h,w)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Xn(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:S,pendingToken:N}=p;return w&&S&&N&&w===S?new Xo(w,N):null}static _create(h,p){return new Xo(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ai extends Gi{constructor(h){U(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return ai.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return ai.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=Xo.fromJSON(h);return U(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:w}=h;if(!p||!w)return null;try{return Xo._create(w,p)}catch{return null}}}let zr=(()=>{class y extends zi{constructor(){super("twitter.com")}static credential(p,w){return Hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:w})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:w,oauthTokenSecret:S}=p;if(!w||!S)return null;try{return y.credential(w,S)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function wo(y,h){return pd.apply(this,arguments)}function pd(){return(pd=(0,g.Z)(function*(y,h){return $r(y,"POST","/v1/accounts:signUp",Ot(y,h))})).apply(this,arguments)}class fr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,w,S=!1){return(0,g.Z)(function*(){const N=yield Pt._fromIdTokenResponse(h,w,S),G=Xh(w);return new fr({user:N,providerId:G,_tokenResponse:w,operationType:p})})()}static _forOperation(h,p,w){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(w,!0);const S=Xh(w);return new fr({user:h,providerId:S,_tokenResponse:w,operationType:p})})()}}function Xh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function xn(){return(xn=(0,g.Z)(function*(y){var h;const p=In(y);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new fr({user:p.currentUser,providerId:null,operationType:"signIn"});const w=yield wo(p,{returnSecureToken:!0}),S=yield fr._fromIdTokenResponse(p,"signIn",w,!0);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class Ja extends O.ZR{constructor(h,p,w,S){var N;super(p.code,p.message),this.operationType=w,this.user=S,Object.setPrototypeOf(this,Ja.prototype),this.customData={appName:h.name,tenantId:null!==(N=h.tenantId)&&void 0!==N?N:void 0,_serverResponse:p.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(h,p,w,S){return new Ja(h,p,w,S)}}function ef(y,h,p,w){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Ja._fromErrorAndOperation(y,N,h,w):N})}function ui(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function eu(){return(eu=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y);yield Wt(!0,p,h);const{providerUserInfo:w}=yield Ir(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),S=ui(w||[]);return p.providerData=p.providerData.filter(N=>S.has(N.providerId)),S.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function Io(y,h){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,g.Z)(function*(y,h,p=!1){const w=yield dr(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return fr._forOperation(y,"link",w)})).apply(this,arguments)}function Wt(y,h,p){return tu.apply(this,arguments)}function tu(){return(tu=(0,g.Z)(function*(y,h,p){yield en(h);const S=!1===y?"provider-already-linked":"no-such-provider";U(ui(h.providerData).has(p)===y,h.auth,S)})).apply(this,arguments)}function Hs(y,h){return nu.apply(this,arguments)}function nu(){return(nu=(0,g.Z)(function*(y,h,p=!1){var w;const{auth:S}=y,N="reauthenticate";try{const G=yield dr(y,ef(S,N,h,y),p);U(G.idToken,S,"internal-error");const ae=it(G.idToken);U(ae,S,"internal-error");const{sub:Fe}=ae;return U(y.uid===Fe,S,"user-mismatch"),fr._forOperation(y,N,G)}catch(G){throw"auth/user-not-found"===(null===(w=G)||void 0===w?void 0:w.code)&&Ae(S,"user-mismatch"),G}})).apply(this,arguments)}function vi(y,h){return ru.apply(this,arguments)}function ru(){return(ru=(0,g.Z)(function*(y,h,p=!1){const w="signIn",S=yield ef(y,w,h),N=yield fr._fromIdTokenResponse(y,w,S);return p||(yield y._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Tn(y,h){return St.apply(this,arguments)}function St(){return(St=(0,g.Z)(function*(y,h){return vi(In(y),h)})).apply(this,arguments)}function iu(y,h){return tf.apply(this,arguments)}function tf(){return(tf=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y);return yield Wt(!1,p,h.providerId),Io(p,h)})).apply(this,arguments)}function su(y,h){return ou.apply(this,arguments)}function ou(){return(ou=(0,g.Z)(function*(y,h){return Hs((0,O.m9)(y),h)})).apply(this,arguments)}function xc(y,h){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,g.Z)(function*(y,h){return $r(y,"POST","/v1/accounts:signInWithCustomToken",Ot(y,h))})).apply(this,arguments)}function Jo(){return(Jo=(0,g.Z)(function*(y,h){const p=In(y),w=yield xc(p,{token:h,returnSecureToken:!0}),S=yield fr._fromIdTokenResponse(p,"signIn",w);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class Ce{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Gt._fromServerResponse(h,p):Ae(h,"internal-error")}}class Gt extends Ce{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Gt(p)}}function Rc(y,h,p){var w;U((null===(w=p.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),U(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(U(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(U(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function Mn(){return(Mn=(0,g.Z)(function*(y,h,p){const w=(0,O.m9)(y),S={requestType:"PASSWORD_RESET",email:h};p&&Rc(w,S,p),yield ir(w,S)})).apply(this,arguments)}function Eo(){return(Eo=(0,g.Z)(function*(y,h,p){yield Hn((0,O.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function ea(){return(ea=(0,g.Z)(function*(y,h){yield Ec((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function ta(y,h){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y),w=yield Hn(p,{oobCode:h}),S=w.requestType;switch(U(S,p,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(w.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(w.mfaInfo,p,"internal-error");default:U(w.email,p,"internal-error")}let N=null;return w.mfaInfo&&(N=Ce._fromServerResponse(In(p),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:N},operation:S}})).apply(this,arguments)}function gd(){return(gd=(0,g.Z)(function*(y,h){const{data:p}=yield ta((0,O.m9)(y),h);return p.email})).apply(this,arguments)}function Rn(){return(Rn=(0,g.Z)(function*(y,h,p){const w=In(y),S=yield wo(w,{returnSecureToken:!0,email:h,password:p}),N=yield fr._fromIdTokenResponse(w,"signIn",S);return yield w._updateCurrentUser(N.user),N})).apply(this,arguments)}function Gs(){return(Gs=(0,g.Z)(function*(y,h,p){const w=(0,O.m9)(y),S={requestType:"EMAIL_SIGNIN",email:h};U(p.handleCodeInApp,w,"argument-error"),p&&Rc(w,S,p),yield Ya(w,S)})).apply(this,arguments)}function ra(){return(ra=(0,g.Z)(function*(y,h,p){const w=(0,O.m9)(y),S=xi.credentialWithLink(h,p||Oe());return U(S._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Tn(w,S)})).apply(this,arguments)}function Qp(y,h){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,g.Z)(function*(y,h){return cn(y,"POST","/v1/accounts:createAuthUri",Ot(y,h))})).apply(this,arguments)}function ia(){return(ia=(0,g.Z)(function*(y,h){const w={identifier:h,continueUri:ut()?Oe():"http://localhost"},{signinMethods:S}=yield Qp((0,O.m9)(y),w);return S||[]})).apply(this,arguments)}function sa(){return(sa=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&Rc(p.auth,S,h);const{email:N}=yield rr(p.auth,S);N!==y.email&&(yield y.reload())})).apply(this,arguments)}function cu(){return(cu=(0,g.Z)(function*(y,h,p){const w=(0,O.m9)(y),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&Rc(w.auth,N,p);const{email:G}=yield bc(w.auth,N);G!==y.email&&(yield y.reload())})).apply(this,arguments)}function lu(y,h){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,g.Z)(function*(y,h){return cn(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function jc(){return(jc=(0,g.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const w=(0,O.m9)(y),N={idToken:yield w.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},G=yield dr(w,lu(w.auth,N));w.displayName=G.displayName||null,w.photoURL=G.photoUrl||null;const ae=w.providerData.find(({providerId:Fe})=>"password"===Fe);ae&&(ae.displayName=w.displayName,ae.photoURL=w.photoURL),yield w._updateTokensIfNecessary(G)})).apply(this,arguments)}function qs(y,h,p){return du.apply(this,arguments)}function du(){return(du=(0,g.Z)(function*(y,h,p){const{auth:w}=y,N={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(N.email=h),p&&(N.password=p);const G=yield dr(y,ln(w,N));yield y._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class qr{constructor(h,p,w={}){this.isNewUser=h,this.providerId=p,this.profile=w}}class _n extends qr{constructor(h,p,w,S){super(h,p,w),this.username=S}}class yd extends qr{constructor(h,p){super(h,"facebook.com",p)}}class $c extends _n{constructor(h,p){super(h,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class nf extends qr{constructor(h,p){super(h,"google.com",p)}}class Hc extends _n{constructor(h,p,w){super(h,"twitter.com",p,w)}}function hu(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Jn(y){var h,p;if(!y)return null;const{providerId:w}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},N=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&y?.idToken){const G=null===(p=null===(h=it(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(G)return new qr(N,"anonymous"!==G&&"custom"!==G?G:null)}if(!w)return null;switch(w){case"facebook.com":return new yd(N,S);case"github.com":return new $c(N,S);case"google.com":return new nf(N,S);case"twitter.com":return new Hc(N,S,y.screenName||null);case"custom":case"anonymous":return new qr(N,null);default:return new qr(N,w,S)}}(p)}class Ks{constructor(h,p,w){this.type=h,this.credential=p,this.auth=w}static _fromIdtoken(h,p){return new Ks("enroll",h,p)}static _fromMfaPendingCredential(h){return new Ks("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,w;if(h?.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Ks._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(w=h.multiFactorSession)&&void 0!==w&&w.idToken)return Ks._fromIdtoken(h.multiFactorSession.idToken)}return null}}class pu{constructor(h,p,w){this.session=h,this.hints=p,this.signInResolver=w}static _fromError(h,p){const w=In(h),S=p.customData._serverResponse,N=(S.mfaInfo||[]).map(ae=>Ce._fromServerResponse(w,ae));U(S.mfaPendingCredential,w,"internal-error");const G=Ks._fromMfaPendingCredential(S.mfaPendingCredential);return new pu(G,N,function(){var ae=(0,g.Z)(function*(Fe){const Ze=yield Fe._process(w,G);delete S.mfaInfo,delete S.mfaPendingCredential;const mt=Object.assign(Object.assign({},S),{idToken:Ze.idToken,refreshToken:Ze.refreshToken});switch(p.operationType){case"signIn":const yt=yield fr._fromIdTokenResponse(w,p.operationType,mt);return yield w._updateCurrentUser(yt.user),yt;case"reauthenticate":return U(p.user,w,"internal-error"),fr._forOperation(p.user,p.operationType,mt);default:Ae(w,"internal-error")}});return function(Fe){return ae.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,g.Z)(function*(){return p.signInResolver(h)})()}}function gu(y,h){return cn(y,"POST","/v2/accounts/mfaEnrollment:start",Ot(y,h))}class rf{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(w=>Ce._fromServerResponse(h.auth,w)))})}static _fromUser(h){return new rf(h)}getSession(){var h=this;return(0,g.Z)(function*(){return Ks._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,p){var w=this;return(0,g.Z)(function*(){const S=h,N=yield w.getSession(),G=yield dr(w.user,S._process(w.user.auth,N,p));return yield w.user._updateTokensIfNecessary(G),w.user.reload()})()}unenroll(h){var p=this;return(0,g.Z)(function*(){var w;const S="string"==typeof h?h:h.uid,N=yield p.user.getIdToken(),G=yield dr(p.user,function Id(y,h){return cn(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Ot(y,h))}(p.user.auth,{idToken:N,mfaEnrollmentId:S}));p.enrolledFactors=p.enrolledFactors.filter(({uid:ae})=>ae!==S),yield p.user._updateTokensIfNecessary(G);try{yield p.user.reload()}catch(ae){if("auth/user-token-expired"!==(null===(w=ae)||void 0===w?void 0:w.code))throw ae}})()}}const Co=new WeakMap,Zs="__sak";class yu{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Zs,"1"),this.storage.removeItem(Zs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const aa=(()=>{class y extends yu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,w)=>this.onStorageEvent(p,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function oa(){const y=(0,O.z$)();return ct(y)||jt(y)}()&&function yn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Us(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const w of Object.keys(this.listeners)){const S=this.storage.getItem(w),N=this.localCache[w];S!==N&&p(w,N,S)}}onStorageEvent(p,w=!1){if(!p.key)return void this.forAllChangedKeys((ae,Fe,Ze)=>{this.notifyListeners(ae,Ze)});const S=p.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ae=this.storage.getItem(S);if(p.newValue!==ae)null!==p.newValue?this.storage.setItem(S,p.newValue):this.storage.removeItem(S);else if(this.localCache[S]===p.newValue&&!w)return}const N=()=>{const ae=this.storage.getItem(S);!w&&this.localCache[S]===ae||this.notifyListeners(S,ae)},G=this.storage.getItem(S);!function Qn(){return(0,O.w1)()&&10===document.documentMode}()||G===p.newValue||p.newValue===p.oldValue?N():setTimeout(N,10)}notifyListeners(p,w){this.localCache[p]=w;const S=this.listeners[p];if(S)for(const N of Array.from(S))N(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,w,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:w,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(w)}_removeListener(p,w){this.listeners[p]&&(this.listeners[p].delete(w),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,w){var S=()=>super._set,N=this;return(0,g.Z)(function*(){yield S().call(N,p,w),N.localCache[p]=JSON.stringify(w)})()}_get(p){var w=()=>super._get,S=this;return(0,g.Z)(function*(){const N=yield w().call(S,p);return S.localCache[p]=JSON.stringify(N),N})()}_remove(p){var w=()=>super._remove,S=this;return(0,g.Z)(function*(){yield w().call(S,p),delete S.localCache[p]})()}}return y.type="LOCAL",y})(),Ri=(()=>{class y extends yu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,w){}_removeListener(p,w){}}return y.type="SESSION",y})();let bd=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const w=this.receivers.find(N=>N.isListeningto(p));if(w)return w;const S=new y(p);return this.receivers.push(S),S}isListeningto(p){return this.eventTarget===p}handleEvent(p){var w=this;return(0,g.Z)(function*(){const S=p,{eventId:N,eventType:G,data:ae}=S.data,Fe=w.handlersMap[G];if(!Fe?.size)return;S.ports[0].postMessage({status:"ack",eventId:N,eventType:G});const Ze=Array.from(Fe).map(function(){var yt=(0,g.Z)(function*(gr){return gr(S.origin,ae)});return function(gr){return yt.apply(this,arguments)}}()),mt=yield function ca(y){return Promise.all(y.map(function(){var h=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(w){return{fulfilled:!1,reason:w}}});return function(p){return h.apply(this,arguments)}}()))}(Ze);S.ports[0].postMessage({status:"done",eventId:N,eventType:G,response:mt})})()}_subscribe(p,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(w)}_unsubscribe(p,w){this.handlersMap[p]&&w&&this.handlersMap[p].delete(w),(!w||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function la(y="",h=10){let p="";for(let w=0;w<h;w++)p+=Math.floor(10*Math.random());return y+p}class Gc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,w=50){var S=this;return(0,g.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let G,ae;return new Promise((Fe,Ze)=>{const mt=la("",20);N.port1.start();const yt=setTimeout(()=>{Ze(new Error("unsupported_event"))},w);ae={messageChannel:N,onMessage(gr){const Fi=gr;if(Fi.data.eventId===mt)switch(Fi.data.status){case"ack":clearTimeout(yt),G=setTimeout(()=>{Ze(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Fe(Fi.data.response);break;default:clearTimeout(yt),clearTimeout(G),Ze(new Error("invalid_response"))}}},S.handlers.add(ae),N.port1.addEventListener("message",ae.onMessage),S.target.postMessage({eventType:h,eventId:mt,data:p},[N.port2])}).finally(()=>{ae&&S.removeMessageHandler(ae)})})()}}function Vn(){return window}function _u(){return typeof Vn().WorkerGlobalScope<"u"&&"function"==typeof Vn().importScripts}function da(){return(da=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const bs="firebaseLocalStorageDb",Cs="firebaseLocalStorage",zc="fbase_key";class Qs{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function ha(y,h){return y.transaction([Cs],h?"readwrite":"readonly").objectStore(Cs)}function So(){const y=indexedDB.open(bs,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(Cs,{keyPath:zc})}catch(S){p(S)}}),y.addEventListener("success",(0,g.Z)(function*(){const w=y.result;w.objectStoreNames.contains(Cs)?h(w):(w.close(),yield function Td(){const y=indexedDB.deleteDatabase(bs);return new Qs(y).toPromise()}(),h(yield So()))}))})}function Yi(y,h,p){return qc.apply(this,arguments)}function qc(){return(qc=(0,g.Z)(function*(y,h,p){const w=ha(y,!0).put({[zc]:h,value:p});return new Qs(w).toPromise()})).apply(this,arguments)}function fa(){return(fa=(0,g.Z)(function*(y,h){const p=ha(y,!1).get(h),w=yield new Qs(p).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Xs(y,h){const p=ha(y,!0).delete(h);return new Qs(p).toPromise()}const Ao=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield So()),p.db})()}_withRetries(p){var w=this;return(0,g.Z)(function*(){let S=0;for(;;)try{const N=yield w._openDb();return yield p(N)}catch(N){if(S++>3)throw N;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return _u()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=bd._getInstance(function wu(){return _u()?self:null}()),p.receiver._subscribe("keyChanged",function(){var w=(0,g.Z)(function*(S,N){return{keyProcessed:(yield p._poll()).includes(N.key)}});return function(S,N){return w.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var w=(0,g.Z)(function*(S,N){return["keyChanged"]});return function(S,N){return w.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var w,S;if(p.activeServiceWorker=yield function Ys(){return da.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Gc(p.activeServiceWorker);const N=yield p.sender._send("ping",{},800);!N||(null===(w=N[0])||void 0===w?void 0:w.fulfilled)&&(null===(S=N[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var w=this;return(0,g.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function vu(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:p},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield So();return yield Yi(p,Zs,"1"),yield Xs(p,Zs),!0}catch{}return!1})()}_withPendingWrite(p){var w=this;return(0,g.Z)(function*(){w.pendingWrites++;try{yield p()}finally{w.pendingWrites--}})()}_set(p,w){var S=this;return(0,g.Z)(function*(){return S._withPendingWrite((0,g.Z)(function*(){return yield S._withRetries(N=>Yi(N,p,w)),S.localCache[p]=w,S.notifyServiceWorker(p)}))})()}_get(p){var w=this;return(0,g.Z)(function*(){const S=yield w._withRetries(N=>function Iu(y,h){return fa.apply(this,arguments)}(N,p));return w.localCache[p]=S,S})()}_remove(p){var w=this;return(0,g.Z)(function*(){return w._withPendingWrite((0,g.Z)(function*(){return yield w._withRetries(S=>Xs(S,p)),delete w.localCache[p],w.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const w=yield p._withRetries(G=>{const ae=ha(G,!1).getAll();return new Qs(ae).toPromise()});if(!w)return[];if(0!==p.pendingWrites)return[];const S=[],N=new Set;for(const{fbase_key:G,value:ae}of w)N.add(G),JSON.stringify(p.localCache[G])!==JSON.stringify(ae)&&(p.notifyListeners(G,ae),S.push(G));for(const G of Object.keys(p.localCache))p.localCache[G]&&!N.has(G)&&(p.notifyListeners(G,null),S.push(G));return S})()}notifyListeners(p,w){this.localCache[p]=w;const S=this.listeners[p];if(S)for(const N of Array.from(S))N(w)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(w)}_removeListener(p,w){this.listeners[p]&&(this.listeners[p].delete(w),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function xo(y,h){return cn(y,"POST","/v2/accounts/mfaSignIn:start",Ot(y,h))}function Ts(){return(Ts=(0,g.Z)(function*(y){return(yield cn(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ro(y){return new Promise((h,p)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=h,w.onerror=S=>{const N=_e("internal-error");N.customData=S,p(N)},w.type="text/javascript",w.charset="UTF-8",function Mo(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(w)})}function bu(y){return`__${y}${Math.floor(1e6*Math.random())}`}const pa=1e12;class pn{constructor(h){this.auth=h,this.counter=pa,this._widgets=new Map}render(h,p){const w=this.counter;return this._widgets.set(w,new Xp(h,this.auth.name,p||{})),this.counter++,w}reset(h){var p;const w=h||pa;null===(p=this._widgets.get(w))||void 0===p||p.delete(),this._widgets.delete(w)}getResponse(h){var p;return(null===(p=this._widgets.get(h||pa))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,g.Z)(function*(){var w;return null===(w=p._widgets.get(h||pa))||void 0===w||w.execute(),""})()}}class Xp{constructor(h,p,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;U(S,"argument-error",{appName:p}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ty(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Jp=bu("rcb"),Sy=new an(3e4,6e4);class sf{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Vn().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return U(function Lw(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Vn().grecaptcha):new Promise((w,S)=>{const N=Vn().setTimeout(()=>{S(_e(h,"network-request-failed"))},Sy.get());Vn()[Jp]=()=>{Vn().clearTimeout(N),delete Vn()[Jp];const ae=Vn().grecaptcha;if(!ae)return void S(_e(h,"internal-error"));const Fe=ae.render;ae.render=(Ze,mt)=>{const yt=Fe(Ze,mt);return this.counter++,yt},this.hostLanguage=p,w(ae)},Ro(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Jp,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(N),S(_e(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=Vn().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Kc{load(h){return(0,g.Z)(function*(){return new pn(h)})()}clearedOneInstance(){}}const xy="recaptcha",My={theme:"light",type:"image"};class or{constructor(h,p=Object.assign({},My),w){this.parameters=p,this.type=xy,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=In(w),this.isInvisible="invisible"===this.parameters.size,U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof h?document.getElementById(h):h;U(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Kc:new sf,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),w=h.getAssertedRecaptcha();return w.getResponse(p)||new Promise(N=>{const G=ae=>{!ae||(h.tokenChangeListeners.delete(G),N(ae))};h.tokenChangeListeners.add(G),h.isInvisible&&w.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(w=>w(p)),"function"==typeof h)h(p);else if("string"==typeof h){const w=Vn()[h];"function"==typeof w&&w(p)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const w=document.createElement("div");p.appendChild(w),p=w}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){U(ut()&&!_u(),h.auth,"internal-error"),yield function Qt(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function Wr(y){return Ts.apply(this,arguments)}(h.auth);U(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Dr{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=Is._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function Cu(){return(Cu=(0,g.Z)(function*(y,h,p){const w=In(y),S=yield Ei(w,h,(0,O.m9)(p));return new Dr(S,N=>Tn(w,N))})).apply(this,arguments)}function Ii(){return(Ii=(0,g.Z)(function*(y,h,p){const w=(0,O.m9)(y);yield Wt(!1,w,"phone");const S=yield Ei(w.auth,h,(0,O.m9)(p));return new Dr(S,N=>iu(w,N))})).apply(this,arguments)}function Oo(){return(Oo=(0,g.Z)(function*(y,h,p){const w=(0,O.m9)(y),S=yield Ei(w.auth,h,(0,O.m9)(p));return new Dr(S,N=>su(w,N))})).apply(this,arguments)}function Ei(y,h,p){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,g.Z)(function*(y,h,p){var w;const S=yield p.verify();try{let N;if(U("string"==typeof S,y,"argument-error"),U(p.type===xy,y,"argument-error"),N="string"==typeof h?{phoneNumber:h}:h,"session"in N){const G=N.session;if("phoneNumber"in N)return U("enroll"===G.type,y,"internal-error"),(yield gu(y,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{U("signin"===G.type,y,"internal-error");const ae=(null===(w=N.multiFactorHint)||void 0===w?void 0:w.uid)||N.multiFactorUid;return U(ae,y,"missing-multi-factor-info"),(yield xo(y,{mfaPendingCredential:G.credential,mfaEnrollmentId:ae,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield qp(y,{phoneNumber:N.phoneNumber,recaptchaToken:S});return G}}finally{p._reset()}})).apply(this,arguments)}function It(){return(It=(0,g.Z)(function*(y,h){yield Io((0,O.m9)(y),h)})).apply(this,arguments)}let Tu=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=In(p)}verifyPhoneNumber(p,w){return Ei(this.auth,p,(0,O.m9)(w))}static credential(p,w){return Is._fromVerification(p,w)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:w,temporaryProof:S}=p;return w&&S?Is._fromTokenResponse(w,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function eo(y,h){return h?ne(h):(U(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class ga extends hr{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Xn(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Xn(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Xn(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function kr(y){return vi(y.auth,new ga(y),y.bypassAuthState)}function ma(y){const{auth:h,user:p}=y;return U(p,h,"internal-error"),Hs(p,new ga(y),y.bypassAuthState)}function Xi(y){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,g.Z)(function*(y){const{auth:h,user:p}=y;return U(p,h,"internal-error"),Io(p,new ga(y),y.bypassAuthState)})).apply(this,arguments)}class Pr{constructor(h,p,w,S,N=!1){this.auth=h,this.resolver=w,this.user=S,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,g.Z)(function*(w,S){h.pendingPromise={resolve:w,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(N){h.reject(N)}});return function(w,S){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,g.Z)(function*(){const{urlResponse:w,sessionId:S,postBody:N,tenantId:G,error:ae,type:Fe}=h;if(ae)return void p.reject(ae);const Ze={auth:p.auth,requestUri:w,sessionId:S,tenantId:G||void 0,postBody:N||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Fe)(Ze))}catch(mt){p.reject(mt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return kr;case"linkViaPopup":case"linkViaRedirect":return Xi;case"reauthViaPopup":case"reauthViaRedirect":return ma;default:Ae(this.auth,"internal-error")}}resolve(h){z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Yc=new an(2e3,1e4);function ya(){return(ya=(0,g.Z)(function*(y,h,p){const w=In(y);Ue(y,h,Gi);const S=eo(w,p);return new Zr(w,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function Sd(){return(Sd=(0,g.Z)(function*(y,h,p){const w=(0,O.m9)(y);Ue(w.auth,h,Gi);const S=eo(w.auth,p);return new Zr(w.auth,"reauthViaPopup",h,S,w).executeNotNull()})).apply(this,arguments)}function _a(){return(_a=(0,g.Z)(function*(y,h,p){const w=(0,O.m9)(y);Ue(w.auth,h,Gi);const S=eo(w.auth,p);return new Zr(w.auth,"linkViaPopup",h,S,w).executeNotNull()})).apply(this,arguments)}let Zr=(()=>{class y extends Pr{constructor(p,w,S,N,G){super(p,w,N,G),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const w=yield p.execute();return U(w,p.auth,"internal-error"),w})()}onExecution(){var p=this;return(0,g.Z)(function*(){z(1===p.filter.length,"Popup operations only handle one event");const w=la();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],w),p.authWindow.associatedEvent=w,p.resolver._originValidation(p.auth).catch(S=>{p.reject(S)}),p.resolver._isIframeWebStorageSupported(p.auth,S=>{S||p.reject(_e(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var w,S;this.pollId=null!==(S=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Yc.get())};p()}}return y.currentPopupAction=null,y})();const gn=new Map;class ki extends Pr{constructor(h,p,w=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,w),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,g.Z)(function*(){let w=gn.get(p.auth._key());if(!w){try{const N=(yield function Au(y,h){return Ss.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;w=()=>Promise.resolve(N)}catch(S){w=()=>Promise.reject(S)}gn.set(p.auth._key(),w)}return p.bypassAuthState||gn.set(p.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,w=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(w,h);if("unknown"!==h.type){if(h.eventId){const S=yield w.auth._redirectUserForId(h.eventId);if(S)return w.user=S,p().call(w,h);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function Ss(){return(Ss=(0,g.Z)(function*(y,h){const p=Jc(h),w=Ji(y);if(!(yield w._isAvailable()))return!1;const S="true"===(yield w._get(p));return yield w._remove(p),S})).apply(this,arguments)}function xu(y,h){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,g.Z)(function*(y,h){return Ji(y)._set(Jc(h),"true")})).apply(this,arguments)}function to(y,h){gn.set(y._key(),h)}function Ji(y){return ne(y._redirectPersistence)}function Jc(y){return q("pendingRedirect",y.config.apiKey,y.name)}function b(){return(b=(0,g.Z)(function*(y,h,p){const w=In(y);Ue(y,h,Gi);const S=eo(w,p);return yield xu(S,w),S._openRedirect(w,h,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,g.Z)(function*(y,h,p){const w=(0,O.m9)(y);Ue(w.auth,h,Gi);const S=eo(w.auth,p);yield xu(S,w.auth);const N=yield ht(w);return S._openRedirect(w.auth,h,"reauthViaRedirect",N)})).apply(this,arguments)}function De(){return(De=(0,g.Z)(function*(y,h,p){const w=(0,O.m9)(y);Ue(w.auth,h,Gi);const S=eo(w.auth,p);yield Wt(!1,w,h.providerId),yield xu(S,w.auth);const N=yield ht(w);return S._openRedirect(w.auth,h,"linkViaRedirect",N)})).apply(this,arguments)}function lt(){return(lt=(0,g.Z)(function*(y,h){return yield In(y)._initializationPromise,_t(y,h,!1)})).apply(this,arguments)}function _t(y,h){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,g.Z)(function*(y,h,p=!1){const w=In(y),S=eo(w,h),G=yield new ki(w,S,p).execute();return G&&!p&&(delete G.user._redirectEventId,yield w._persistUserIfCurrent(G.user),yield w._setRedirectUser(null,h)),G})).apply(this,arguments)}function ht(y){return En.apply(this,arguments)}function En(){return(En=(0,g.Z)(function*(y){const h=la(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class As{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(h,w)&&(p=!0,this.sendToConsumer(h,w),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function no(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xs(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var w;if(h.error&&!xs(h)){const S=(null===(w=h.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";p.onError(_e(this.auth,S))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const w=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&w}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(es(h))}saveEventToCache(h){this.cachedEventUids.add(es(h)),this.lastProcessedEventTime=Date.now()}}function es(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function xs({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function ts(y){return kn.apply(this,arguments)}function kn(){return(kn=(0,g.Z)(function*(y,h={}){return cn(y,"GET","/v1/projects",h)})).apply(this,arguments)}const Yr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ms=/^https?/;function Ry(){return(Ry=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield ts(y);for(const p of h)try{if(tg(p))return}catch{}Ae(y,"unauthorized-domain")})).apply(this,arguments)}function tg(y){const h=Oe(),{protocol:p,hostname:w}=new URL(h);if(y.startsWith("chrome-extension://")){const G=new URL(y);return""===G.hostname&&""===w?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&G.hostname===w}if(!Ms.test(p))return!1;if(Yr.test(y))return w===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(w)}const Ny=new an(3e4,6e4);function xd(){const y=Vn().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let el=null;function cf(y){return el=el||function va(y){return new Promise((h,p)=>{var w,S,N;function G(){xd(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{xd(),p(_e(y,"network-request-failed"))},timeout:Ny.get()})}if(null!==(S=null===(w=Vn().gapi)||void 0===w?void 0:w.iframes)&&void 0!==S&&S.Iframe)h(gapi.iframes.getContext());else{if(null===(N=Vn().gapi)||void 0===N||!N.load){const ae=bu("iframefcb");return Vn()[ae]=()=>{gapi.load?G():p(_e(y,"network-request-failed"))},Ro(`https://apis.google.com/js/api.js?onload=${ae}`).catch(Fe=>p(Fe))}G()}}).catch(h=>{throw el=null,h})}(y),el}const ng=new an(5e3,15e3),ib={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vw(y){const h=y.config;U(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?mn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:h.apiKey,appName:y.name,v:se.SDK_VERSION},S=rg.get(y.config.apiHost);S&&(w.eid=S);const N=y._getFrameworks();return N.length&&(w.fw=N.join(",")),`${p}?${(0,O.xO)(w).slice(1)}`}function tl(){return tl=(0,g.Z)(function*(y){const h=yield cf(y),p=Vn().gapi;return U(p,y,"internal-error"),h.open({where:document.body,url:Vw(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ib,dontclear:!0},w=>new Promise(function(){var S=(0,g.Z)(function*(N,G){yield w.restyle({setHideOnLeave:!1});const ae=_e(y,"network-request-failed"),Fe=Vn().setTimeout(()=>{G(ae)},ng.get());function Ze(){Vn().clearTimeout(Fe),N(w)}w.ping(Ze).then(Ze,()=>{G(ae)})});return function(N,G){return S.apply(this,arguments)}}()))}),tl.apply(this,arguments)}const lf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ia{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ru(y,h,p,w,S,N){U(y.config.authDomain,y,"auth-domain-config-required"),U(y.config.apiKey,y,"invalid-api-key");const G={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:w,v:se.SDK_VERSION,eventId:S};if(h instanceof Gi){h.setDefaultLanguage(y.languageCode),G.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(G.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Fe,Ze]of Object.entries(N||{}))G[Fe]=Ze}if(h instanceof zi){const Fe=h.getScopes().filter(Ze=>""!==Ze);Fe.length>0&&(G.scopes=Fe.join(","))}y.tenantId&&(G.tid=y.tenantId);const ae=G;for(const Fe of Object.keys(ae))void 0===ae[Fe]&&delete ae[Fe];return`${function ig({config:y}){return y.emulator?mn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(ae).slice(1)}`}const rl="webStorageSupport";class ns extends class og{constructor(h){this.factorId=h}_process(h,p,w){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,w);case"signin":return this._finalizeSignIn(h,p.credential);default:return ge("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new ns(h)}_finalizeEnroll(h,p,w){return function mu(y,h){return cn(y,"POST","/v2/accounts/mfaEnrollment:finalize",Ot(y,h))}(h,{idToken:p,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function Du(y,h){return cn(y,"POST","/v2/accounts/mfaSignIn:finalize",Ot(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Nu=(()=>{class y{constructor(){}static assertion(p){return ns._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var Md="@firebase/auth",Bw="0.20.11";class sb{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(w=>{var S;h((null===(S=w)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ro(){return window}function ba(){return(ba=(0,g.Z)(function*(y,h,p){var w;const{BuildInfo:S}=ro();z(h.sessionId,"AuthEvent did not contain a session ID");const N=yield Od(h.sessionId),G={};return jt()?G.ibi=S.packageName:qt()?G.apn=S.packageName:Ae(y,"operation-not-supported-in-this-environment"),S.displayName&&(G.appDisplayName=S.displayName),G.sessionId=N,Ru(y,p,h.type,void 0,null!==(w=h.eventId)&&void 0!==w?w:void 0,G)})).apply(this,arguments)}function Nd(){return(Nd=(0,g.Z)(function*(y){const{BuildInfo:h}=ro(),p={};jt()?p.iosBundleId=h.packageName:qt()?p.androidPackageName=h.packageName:Ae(y,"operation-not-supported-in-this-environment"),yield ts(y,p)})).apply(this,arguments)}function Ly(){return(Ly=(0,g.Z)(function*(y,h,p){const{cordova:w}=ro();let S=()=>{};try{yield new Promise((N,G)=>{let ae=null;function Fe(){var yt;N();const gr=null===(yt=w.plugins.browsertab)||void 0===yt?void 0:yt.close;"function"==typeof gr&&gr(),"function"==typeof p?.close&&p.close()}function Ze(){ae||(ae=window.setTimeout(()=>{G(_e(y,"redirect-cancelled-by-user"))},2e3))}function mt(){"visible"===document?.visibilityState&&Ze()}h.addPassiveListener(Fe),document.addEventListener("resume",Ze,!1),qt()&&document.addEventListener("visibilitychange",mt,!1),S=()=>{h.removePassiveListener(Fe),document.removeEventListener("resume",Ze,!1),document.removeEventListener("visibilitychange",mt,!1),ae&&window.clearTimeout(ae)}})}finally{S()}})).apply(this,arguments)}function Od(y){return kd.apply(this,arguments)}function kd(){return(kd=(0,g.Z)(function*(y){const h=ag(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ag(y){if(z(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let w=0;w<y.length;w++)p[w]=y.charCodeAt(w);return p}(0,O.Pz)("authIdTokenMaxAge"),function ob(y){(0,se._registerComponent)(new ce.wA("auth",(h,{options:p})=>{const w=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),{apiKey:N,authDomain:G}=w.options;return((ae,Fe)=>{U(N&&!N.includes(":"),"invalid-api-key",{appName:ae.name}),U(!G?.includes(":"),"argument-error",{appName:ae.name});const Ze={apiKey:N,authDomain:G,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ms(y)},mt=new Ft(ae,Fe,Ze);return function ke(y,h){const p=h?.persistence||[],w=(Array.isArray(p)?p:[p]).map(ne);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(w,h?.popupRedirectResolver)}(mt,p),mt})(w,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,w)=>{h.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new ce.wA("auth-internal",h=>{const p=In(h.getProvider("auth").getImmediate());return new sb(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(Md,Bw,function jw(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,se.registerVersion)(Md,Bw,"esm2017")}("Browser");class pf extends As{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function Uy(y){return mf.apply(this,arguments)}function mf(){return(mf=(0,g.Z)(function*(y){const h=yield Pd()._get(Lu(y));return h&&(yield Pd()._remove(Lu(y))),h})).apply(this,arguments)}function Fu(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const w=Math.floor(Math.random()*h.length);y.push(h.charAt(w))}return y.join("")}function Pd(){return ne(aa)}function Lu(y){return q("authEvent",y.config.apiKey,y.name)}function Fd(y){if(!y?.includes("?"))return{};const[h,...p]=y.split("?");return(0,O.zd)(p.join("?"))}function jy(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function ol(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Vu(y=(0,O.z$)()){return!("file:"!==ol()&&"ionic:"!==ol()&&"capacitor:"!==ol()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function vf(){try{const y=self.localStorage,h=la();if(y)return y.setItem(h,"1"),y.removeItem(h),!function Gy(y=(0,O.z$)()){return function _f(){return(0,O.w1)()&&11===document?.documentMode}()||function fg(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch{return Ld()&&(0,O.hl)()}return!1}function Ld(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function al(){return(function hg(){return"http:"===ol()||"https:"===ol()}()||(0,O.ru)()||Vu())&&!function yf(){return(0,O.b$)()||(0,O.UG)()}()&&vf()&&!Ld()}function Vd(){return Vu()&&typeof document<"u"}function Ud(){return(Ud=(0,g.Z)(function*(){return!!Vd()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Qr={LOCAL:"local",NONE:"none",SESSION:"session"},Uu=U,Rs="persistence";function Ca(y){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,g.Z)(function*(y){yield y._initializationPromise;const h=ul(),p=q(Rs,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function ul(){var y;try{return(null===(y=function wf(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Bd=U;class Xr{constructor(){this.browserResolver=ne(class sg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ri,this._completeRedirectFn=_t,this._overrideRedirectResult=to}_openPopup(h,p,w,S){var N=this;return(0,g.Z)(function*(){var G;z(null===(G=N.eventManagers[h._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const ae=Ru(h,p,w,Oe(),S);return function Ea(y,h,p,w=500,S=600){const N=Math.max((window.screen.availHeight-S)/2,0).toString(),G=Math.max((window.screen.availWidth-w)/2,0).toString();let ae="";const Fe=Object.assign(Object.assign({},lf),{width:w.toString(),height:S.toString(),top:N,left:G}),Ze=(0,O.z$)().toLowerCase();p&&(ae=Yt(Ze)?"_blank":p),He(Ze)&&(h=h||"http://localhost",Fe.scrollbars="yes");const mt=Object.entries(Fe).reduce((gr,[Fi,Sf])=>`${gr}${Fi}=${Sf},`,"");if(function Gr(y=(0,O.z$)()){var h;return jt(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Ze)&&"_self"!==ae)return function nl(y,h){const p=document.createElement("a");p.href=y,p.target=h;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(w)}(h||"",ae),new Ia(null);const yt=window.open(h||"",ae,mt);U(yt,y,"popup-blocked");try{yt.focus()}catch{}return new Ia(yt)}(h,ae,la())})()}_openRedirect(h,p,w,S){var N=this;return(0,g.Z)(function*(){return yield N._originValidation(h),function wi(y){Vn().location.href=y}(Ru(h,p,w,Oe(),S)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:S,promise:N}=this.eventManagers[p];return S?Promise.resolve(S):(z(N,"If manager is not set, promise should be"),N)}const w=this.initAndGetManager(h);return this.eventManagers[p]={promise:w},w.catch(()=>{delete this.eventManagers[p]}),w}initAndGetManager(h){var p=this;return(0,g.Z)(function*(){const w=yield function ky(y){return tl.apply(this,arguments)}(h),S=new As(h);return w.register("authEvent",N=>(U(N?.authEvent,h,"invalid-auth-event"),{status:S.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:S},p.iframes[h._key()]=w,S})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(rl,{type:rl},S=>{var N;const G=null===(N=S?.[0])||void 0===N?void 0:N[rl];void 0!==G&&p(!!G),Ae(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function uf(y){return Ry.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return Us()||ct()||jt()}}),this.cordovaResolver=ne(class lg{constructor(){this._redirectPersistence=Ri,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=_t,this._overrideRedirectResult=to}_initialize(h){var p=this;return(0,g.Z)(function*(){const w=h._key();let S=p.eventManagers.get(w);return S||(S=new pf(h),p.eventManagers.set(w,S),p.attachCallbackListeners(h,S)),S})()}_openPopup(h){Ae(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,w,S){var N=this;return(0,g.Z)(function*(){!function Gw(y){var h,p,w,S,N,G,ae,Fe,Ze,mt;const yt=ro();U("function"==typeof(null===(h=yt?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(typeof(null===(p=yt?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U("function"==typeof(null===(N=null===(S=null===(w=yt?.cordova)||void 0===w?void 0:w.plugins)||void 0===S?void 0:S.browsertab)||void 0===N?void 0:N.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(Fe=null===(ae=null===(G=yt?.cordova)||void 0===G?void 0:G.plugins)||void 0===ae?void 0:ae.browsertab)||void 0===Fe?void 0:Fe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(mt=null===(Ze=yt?.cordova)||void 0===Ze?void 0:Ze.InAppBrowser)||void 0===mt?void 0:mt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const G=yield N._initialize(h);yield G.initialized(),G.resetRedirect(),function Xc(){gn.clear()}(),yield N._originValidation(h);const ae=function gf(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:Fu(),postBody:null,tenantId:y.tenantId,error:_e(y,"no-auth-event")}}(h,w,S);yield function Vy(y,h){return Pd()._set(Lu(y),h)}(h,ae);const Fe=yield function io(y,h,p){return ba.apply(this,arguments)}(h,ae,p),Ze=yield function ff(y){const{cordova:h}=ro();return new Promise(p=>{h.plugins.browsertab.isAvailable(w=>{let S=null;w?h.plugins.browsertab.openUrl(y):S=h.InAppBrowser.open(y,function nr(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(S)})})}(Fe);return function Hw(y,h,p){return Ly.apply(this,arguments)}(h,G,Ze)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function hf(y){return Nd.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:w,handleOpenURL:S,BuildInfo:N}=ro(),G=setTimeout((0,g.Z)(function*(){yield Uy(h),p.onEvent(jy())}),500),ae=function(){var mt=(0,g.Z)(function*(yt){clearTimeout(G);const gr=yield Uy(h);let Fi=null;gr&&yt?.url&&(Fi=function Pu(y,h){var p,w;const S=function ur(y){const h=Fd(y),p=h.link?decodeURIComponent(h.link):void 0,w=Fd(p).link,S=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Fd(S).link||S||w||p||y}(h);if(S.includes("/__/auth/callback")){const N=Fd(S),G=N.firebaseError?function ug(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,ae=null===(w=null===(p=G?.code)||void 0===p?void 0:p.split("auth/"))||void 0===w?void 0:w[1],Fe=ae?_e(ae):null;return Fe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(gr,yt.url)),p.onEvent(Fi||jy())});return function(gr){return mt.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,ae);const Fe=S,Ze=`${N.packageName.toLowerCase()}://`;ro().handleOpenURL=function(){var mt=(0,g.Z)(function*(yt){if(yt.toLowerCase().startsWith(Ze)&&ae({url:yt}),"function"==typeof Fe)try{Fe(yt)}catch(gr){console.error(gr)}});return function(yt){return mt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ri,this._completeRedirectFn=_t,this._overrideRedirectResult=to}_initialize(h){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,w,S){var N=this;return(0,g.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(h,p,w,S)})()}_openRedirect(h,p,w,S){var N=this;return(0,g.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(h,p,w,S)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Vd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Bd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const p=yield function zy(){return Ud.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Ef(y){return y.unwrap()}function Wy(y){return bf(y)}function bf(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Tu.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let w;switch(p){case"google.com":w=Xa;break;case"facebook.com":w=Qo;break;case"github.com":w=Ac;break;case"twitter.com":w=zr;break;default:const{oauthIdToken:S,oauthAccessToken:N,oauthTokenSecret:G,pendingToken:ae,nonce:Fe}=h;return N||G||S||ae?ae?p.startsWith("saml.")?Xo._create(p,ae):Hi._fromParams({providerId:p,signInMethod:p,pendingToken:ae,idToken:S,accessToken:N}):new $s(p).credential({idToken:S,accessToken:N,rawNonce:Fe}):null}return y instanceof O.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function cr(y,h){return h.catch(p=>{throw p instanceof O.ZR&&function Df(y,h){var p,w;const S=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=h)||void 0===w?void 0:w.code))h.resolver=new Ww(y,function Nn(y,h){var p;const w=(0,O.m9)(y),S=h;return U(h.customData.operationType,w,"argument-error"),U(null===(p=S.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,w,"argument-error"),pu._fromError(w,S)}(y,h));else if(S){const N=bf(h),G=h;N&&(G.credential=N,G.tenantId=S.tenantId||void 0,G.email=S.email||void 0,G.phoneNumber=S.phoneNumber||void 0)}}(y,p),p}).then(p=>{const S=p.user;return{operationType:p.operationType,credential:Wy(p),additionalUserInfo:hu(p),user:rs.getOrCreate(S)}})}function $d(y,h){return Cf.apply(this,arguments)}function Cf(){return(Cf=(0,g.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:w=>cr(y,p.confirm(w))}})).apply(this,arguments)}class Ww{constructor(h,p){this.resolver=p,this.auth=function jd(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return cr(Ef(this.auth),this.resolver.resolveSignIn(h))}}class rs{constructor(h){this._delegate=h,this.multiFactor=function To(y){const h=(0,O.m9)(y);return Co.has(h)||Co.set(h,rf._fromUser(h)),Co.get(h)}(h)}static getOrCreate(h){return rs.USER_MAP.has(h)||rs.USER_MAP.set(h,new rs(h)),rs.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,g.Z)(function*(){return cr(p.auth,iu(p._delegate,h))})()}linkWithPhoneNumber(h,p){var w=this;return(0,g.Z)(function*(){return $d(w.auth,function Kr(y,h,p){return Ii.apply(this,arguments)}(w._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,g.Z)(function*(){return cr(p.auth,function Qc(y,h,p){return _a.apply(this,arguments)}(p._delegate,h,Xr))})()}linkWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Ca(In(p.auth)),function Z(y,h,p){return function re(y,h,p){return De.apply(this,arguments)}(y,h,p)}(p._delegate,h,Xr)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,g.Z)(function*(){return cr(p.auth,su(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return $d(this.auth,function Zc(y,h,p){return Oo.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return cr(this.auth,function eg(y,h,p){return Sd.apply(this,arguments)}(this._delegate,h,Xr))}reauthenticateWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Ca(In(p.auth)),function C(y,h,p){return function x(y,h,p){return F.apply(this,arguments)}(y,h,p)}(p._delegate,h,Xr)})()}sendEmailVerification(h){return function Lc(y,h){return sa.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,g.Z)(function*(){return yield function Or(y,h){return eu.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function md(y,h){return qs((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function zs(y,h){return qs((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function pr(y,h){return It.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Bc(y,h){return jc.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function Vc(y,h,p){return cu.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}rs.USER_MAP=new WeakMap;const Ta=U;let Tf=(()=>{class y{constructor(p,w){if(this.app=p,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=p.options;Ta(S,"invalid-api-key",{appName:p.name}),Ta(S,"invalid-api-key",{appName:p.name});const N=typeof window<"u"?Xr:void 0;this._delegate=w.initialize({options:{persistence:Sa(S,p.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(we),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?rs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,w){!function Ka(y,h,p){const w=In(y);U(w._canInitEmulator,w,"emulator-config-failed"),U(/^https?:\/\//.test(h),w,"invalid-emulator-scheme");const S=!!p?.disableWarnings,N=Ai(h),{host:G,port:ae}=function $n(y){const h=Ai(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const w=p[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(w);if(S){const N=S[1];return{host:N,port:ys(w.substr(N.length+1))}}{const[N,G]=w.split(":");return{host:N,port:ys(G)}}}(h);w.config.emulator={url:`${N}//${G}${null===ae?"":`:${ae}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:G,port:ae,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function _s(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,w)}applyActionCode(p){return function ci(y,h){return ea.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return ta(this._delegate,p)}confirmPasswordReset(p,w){return function au(y,h,p){return Eo.apply(this,arguments)}(this._delegate,p,w)}createUserWithEmailAndPassword(p,w){var S=this;return(0,g.Z)(function*(){return cr(S._delegate,function na(y,h,p){return Rn.apply(this,arguments)}(S._delegate,p,w))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function uu(y,h){return ia.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Zi(y,h){return"EMAIL_SIGNIN"===Qa.parseLink(h)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){Ta(al(),p._delegate,"operation-not-supported-in-this-environment");const w=yield function Be(y,h){return lt.apply(this,arguments)}(p._delegate,Xr);return w?cr(p._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function qw(y,h){In(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,w,S){const{next:N,error:G,complete:ae}=Hd(p,w,S);return this._delegate.onAuthStateChanged(N,G,ae)}onIdTokenChanged(p,w,S){const{next:N,error:G,complete:ae}=Hd(p,w,S);return this._delegate.onIdTokenChanged(N,G,ae)}sendSignInLinkToEmail(p,w){return function Pc(y,h,p){return Gs.apply(this,arguments)}(this._delegate,p,w)}sendPasswordResetEmail(p,w){return function Nc(y,h,p){return Mn.apply(this,arguments)}(this._delegate,p,w||void 0)}setPersistence(p){var w=this;return(0,g.Z)(function*(){let S;switch(function qy(y,h){Uu(Object.values(Qr).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?Uu(h!==Qr.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Uu(h===Qr.NONE,y,"unsupported-persistence-type"):Ld()?Uu(h===Qr.NONE||h===Qr.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Uu(h===Qr.NONE||vf(),y,"unsupported-persistence-type")}(w._delegate,p),p){case Qr.SESSION:S=Ri;break;case Qr.LOCAL:S=(yield ne(Ao)._isAvailable())?Ao:aa;break;case Qr.NONE:S=L;break;default:return Ae("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return cr(this._delegate,function Jh(y){return xn.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return cr(this._delegate,Tn(this._delegate,p))}signInWithCustomToken(p){return cr(this._delegate,function Mc(y,h){return Jo.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,w){return cr(this._delegate,function Mi(y,h,p){return Tn((0,O.m9)(y),xi.credential(h,p))}(this._delegate,p,w))}signInWithEmailLink(p,w){return cr(this._delegate,function Yp(y,h,p){return ra.apply(this,arguments)}(this._delegate,p,w))}signInWithPhoneNumber(p,w){return $d(this._delegate,function af(y,h,p){return Cu.apply(this,arguments)}(this._delegate,p,w))}signInWithPopup(p){var w=this;return(0,g.Z)(function*(){return Ta(al(),w._delegate,"operation-not-supported-in-this-environment"),cr(w._delegate,function Su(y,h,p){return ya.apply(this,arguments)}(w._delegate,p,Xr))})()}signInWithRedirect(p){var w=this;return(0,g.Z)(function*(){return Ta(al(),w._delegate,"operation-not-supported-in-this-environment"),yield Ca(w._delegate),function On(y,h,p){return function Ad(y,h,p){return b.apply(this,arguments)}(y,h,p)}(w._delegate,p,Xr)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function kc(y,h){return gd.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Qr,y})();function Hd(y,h,p){let w=y;"function"!=typeof y&&({next:w,error:h,complete:p}=y);const S=w;return{next:G=>S(G&&rs.getOrCreate(G)),error:h,complete:p}}function Sa(y,h){const p=function If(y,h){const p=ul();if(!p)return[];const w=q(Rs,y,h);switch(p.getItem(w)){case Qr.NONE:return[L];case Qr.LOCAL:return[Ao,Ri];case Qr.SESSION:return[Ri];default:return[]}}(y,h);if(typeof self<"u"&&!p.includes(Ao)&&p.push(Ao),typeof window<"u")for(const w of[aa,Ri])p.includes(w)||p.push(w);return p.includes(L)||p.push(L),p}class Gd{constructor(){this.providerId="phone",this._delegate=new Tu(Ef(J.Z.auth()))}static credential(h,p){return Tu.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}Gd.PHONE_SIGN_IN_METHOD=Tu.PHONE_SIGN_IN_METHOD,Gd.PROVIDER_ID=Tu.PROVIDER_ID;const Ky=U;class Zy{constructor(h,p,w=J.Z.app()){var S;Ky(null===(S=w.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new or(h,p,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Yy(y){y.INTERNAL.registerComponent(new ce.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),w=h.getProvider("auth");return new Tf(p,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:xi,FacebookAuthProvider:Qo,GithubAuthProvider:Ac,GoogleAuthProvider:Xa,OAuthProvider:$s,SAMLAuthProvider:ai,PhoneAuthProvider:Gd,PhoneMultiFactorGenerator:Nu,RecaptchaVerifier:Zy,TwitterAuthProvider:zr,Auth:Tf,AuthCredential:hr,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.24")}(J.Z)},9751:(at,Se,P)=>{P.d(Se,{y:()=>de});var g=P(2961),J=P(727),O=P(8822),se=P(9635),ie=P(2416),le=P(576),ce=P(2806);let de=(()=>{class K{constructor(Me){Me&&(this._subscribe=Me)}lift(Me){const we=new K;return we.source=this,we.operator=Me,we}subscribe(Me,we,et){const me=function j(K){return K&&K instanceof g.Lv||function B(K){return K&&(0,le.m)(K.next)&&(0,le.m)(K.error)&&(0,le.m)(K.complete)}(K)&&(0,J.Nn)(K)}(Me)?Me:new g.Hp(Me,we,et);return(0,ce.x)(()=>{const{operator:fe,source:Ye}=this;me.add(fe?fe.call(me,Ye):Ye?this._subscribe(me):this._trySubscribe(me))}),me}_trySubscribe(Me){try{return this._subscribe(Me)}catch(we){Me.error(we)}}forEach(Me,we){return new(we=he(we))((et,me)=>{const fe=new g.Hp({next:Ye=>{try{Me(Ye)}catch(rt){me(rt),fe.unsubscribe()}},error:me,complete:et});this.subscribe(fe)})}_subscribe(Me){var we;return null===(we=this.source)||void 0===we?void 0:we.subscribe(Me)}[O.L](){return this}pipe(...Me){return(0,se.U)(Me)(this)}toPromise(Me){return new(Me=he(Me))((we,et)=>{let me;this.subscribe(fe=>me=fe,fe=>et(fe),()=>we(me))})}}return K.create=Le=>new K(Le),K})();function he(K){var Le;return null!==(Le=K??ie.v.Promise)&&void 0!==Le?Le:Promise}},7579:(at,Se,P)=>{P.d(Se,{x:()=>ce});var g=P(9751),J=P(727);const se=(0,P(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=P(8737),le=P(2806);let ce=(()=>{class he extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const K=new de(this,this);return K.operator=j,K}_throwIfClosed(){if(this.closed)throw new se}next(j){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(j)}})}error(j){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:K}=this;for(;K.length;)K.shift().error(j)}})}complete(){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:K,isStopped:Le,observers:Me}=this;return K||Le?J.Lc:(this.currentObservers=null,Me.push(j),new J.w0(()=>{this.currentObservers=null,(0,ie.P)(Me,j)}))}_checkFinalizedStatuses(j){const{hasError:K,thrownError:Le,isStopped:Me}=this;K?j.error(Le):Me&&j.complete()}asObservable(){const j=new g.y;return j.source=this,j}}return he.create=(B,j)=>new de(B,j),he})();class de extends ce{constructor(B,j){super(),this.destination=B,this.source=j}next(B){var j,K;null===(K=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===K||K.call(j,B)}error(B){var j,K;null===(K=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===K||K.call(j,B)}complete(){var B,j;null===(j=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===j||j.call(B)}_subscribe(B){var j,K;return null!==(K=null===(j=this.source)||void 0===j?void 0:j.subscribe(B))&&void 0!==K?K:J.Lc}}},2961:(at,Se,P)=>{P.d(Se,{Hp:()=>et,Lv:()=>K});var g=P(576),J=P(727),O=P(2416),se=P(7849);function ie(){}const le=he("C",void 0,void 0);function he(Ae,_e,Ie){return{kind:Ae,value:_e,error:Ie}}var B=P(3410),j=P(2806);class K extends J.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,J.Nn)(_e)&&_e.add(this)):this.destination=rt}static create(_e,Ie,Ue){return new et(_e,Ie,Ue)}next(_e){this.isStopped?Ye(function de(Ae){return he("N",Ae,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?Ye(function ce(Ae){return he("E",void 0,Ae)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?Ye(le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Le=Function.prototype.bind;function Me(Ae,_e){return Le.call(Ae,_e)}class we{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(_e)}catch(Ue){me(Ue)}}error(_e){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(_e)}catch(Ue){me(Ue)}else me(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(Ie){me(Ie)}}}class et extends K{constructor(_e,Ie,Ue){let je;if(super(),(0,g.m)(_e)||!_e)je={next:_e??void 0,error:Ie??void 0,complete:Ue??void 0};else{let U;this&&O.v.useDeprecatedNextContext?(U=Object.create(_e),U.unsubscribe=()=>this.unsubscribe(),je={next:_e.next&&Me(_e.next,U),error:_e.error&&Me(_e.error,U),complete:_e.complete&&Me(_e.complete,U)}):je=_e}this.destination=new we(je)}}function me(Ae){O.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Ae):(0,se.h)(Ae)}function Ye(Ae,_e){const{onStoppedNotification:Ie}=O.v;Ie&&B.z.setTimeout(()=>Ie(Ae,_e))}const rt={closed:!0,next:ie,error:function fe(Ae){throw Ae},complete:ie}},727:(at,Se,P)=>{P.d(Se,{Lc:()=>le,w0:()=>ie,Nn:()=>ce});var g=P(576);const O=(0,P(3888).d)(he=>function(j){he(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((K,Le)=>`${Le+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var se=P(8737);class ie{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Me of j)Me.remove(this);else j.remove(this);const{initialTeardown:K}=this;if((0,g.m)(K))try{K()}catch(Me){B=Me instanceof O?Me.errors:[Me]}const{_finalizers:Le}=this;if(Le){this._finalizers=null;for(const Me of Le)try{de(Me)}catch(we){B=B??[],we instanceof O?B=[...B,...we.errors]:B.push(we)}}if(B)throw new O(B)}}add(B){var j;if(B&&B!==this)if(this.closed)de(B);else{if(B instanceof ie){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(B)}}_hasParent(B){const{_parentage:j}=this;return j===B||Array.isArray(j)&&j.includes(B)}_addParent(B){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(B),j):j?[j,B]:B}_removeParent(B){const{_parentage:j}=this;j===B?this._parentage=null:Array.isArray(j)&&(0,se.P)(j,B)}remove(B){const{_finalizers:j}=this;j&&(0,se.P)(j,B),B instanceof ie&&B._removeParent(this)}}ie.EMPTY=(()=>{const he=new ie;return he.closed=!0,he})();const le=ie.EMPTY;function ce(he){return he instanceof ie||he&&"closed"in he&&(0,g.m)(he.remove)&&(0,g.m)(he.add)&&(0,g.m)(he.unsubscribe)}function de(he){(0,g.m)(he)?he():he.unsubscribe()}},2416:(at,Se,P)=>{P.d(Se,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(at,Se,P)=>{P.d(Se,{E:()=>J});const J=new(P(9751).y)(ie=>ie.complete())},8996:(at,Se,P)=>{P.d(Se,{D:()=>_e});var g=P(8421),J=P(5363),O=P(9468),le=P(9751),de=P(2202),he=P(576),B=P(9672);function K(Ie,Ue){if(!Ie)throw new Error("Iterable cannot be null");return new le.y(je=>{(0,B.f)(je,Ue,()=>{const U=Ie[Symbol.asyncIterator]();(0,B.f)(je,Ue,()=>{U.next().then(ge=>{ge.done?je.complete():je.next(ge.value)})},0,!0)})})}var Le=P(3670),Me=P(8239),we=P(1144),et=P(6495),me=P(2206),fe=P(4532),Ye=P(3260);function _e(Ie,Ue){return Ue?function Ae(Ie,Ue){if(null!=Ie){if((0,Le.c)(Ie))return function se(Ie,Ue){return(0,g.Xf)(Ie).pipe((0,O.R)(Ue),(0,J.Q)(Ue))}(Ie,Ue);if((0,we.z)(Ie))return function ce(Ie,Ue){return new le.y(je=>{let U=0;return Ue.schedule(function(){U===Ie.length?je.complete():(je.next(Ie[U++]),je.closed||this.schedule())})})}(Ie,Ue);if((0,Me.t)(Ie))return function ie(Ie,Ue){return(0,g.Xf)(Ie).pipe((0,O.R)(Ue),(0,J.Q)(Ue))}(Ie,Ue);if((0,me.D)(Ie))return K(Ie,Ue);if((0,et.T)(Ie))return function j(Ie,Ue){return new le.y(je=>{let U;return(0,B.f)(je,Ue,()=>{U=Ie[de.h](),(0,B.f)(je,Ue,()=>{let ge,z;try{({value:ge,done:z}=U.next())}catch(Q){return void je.error(Q)}z?je.complete():je.next(ge)},0,!0)}),()=>(0,he.m)(U?.return)&&U.return()})}(Ie,Ue);if((0,Ye.L)(Ie))return function rt(Ie,Ue){return K((0,Ye.Q)(Ie),Ue)}(Ie,Ue)}throw(0,fe.z)(Ie)}(Ie,Ue):(0,g.Xf)(Ie)}},8421:(at,Se,P)=>{P.d(Se,{Xf:()=>Le});var g=P(655),J=P(1144),O=P(8239),se=P(9751),ie=P(3670),le=P(2206),ce=P(4532),de=P(6495),he=P(3260),B=P(576),j=P(7849),K=P(8822);function Le(Ae){if(Ae instanceof se.y)return Ae;if(null!=Ae){if((0,ie.c)(Ae))return function Me(Ae){return new se.y(_e=>{const Ie=Ae[K.L]();if((0,B.m)(Ie.subscribe))return Ie.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,J.z)(Ae))return function we(Ae){return new se.y(_e=>{for(let Ie=0;Ie<Ae.length&&!_e.closed;Ie++)_e.next(Ae[Ie]);_e.complete()})}(Ae);if((0,O.t)(Ae))return function et(Ae){return new se.y(_e=>{Ae.then(Ie=>{_e.closed||(_e.next(Ie),_e.complete())},Ie=>_e.error(Ie)).then(null,j.h)})}(Ae);if((0,le.D)(Ae))return fe(Ae);if((0,de.T)(Ae))return function me(Ae){return new se.y(_e=>{for(const Ie of Ae)if(_e.next(Ie),_e.closed)return;_e.complete()})}(Ae);if((0,he.L)(Ae))return function Ye(Ae){return fe((0,he.Q)(Ae))}(Ae)}throw(0,ce.z)(Ae)}function fe(Ae){return new se.y(_e=>{(function rt(Ae,_e){var Ie,Ue,je,U;return(0,g.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,g.KL)(Ae);!(Ue=yield Ie.next()).done;)if(_e.next(Ue.value),_e.closed)return}catch(ge){je={error:ge}}finally{try{Ue&&!Ue.done&&(U=Ie.return)&&(yield U.call(Ie))}finally{if(je)throw je.error}}_e.complete()})})(Ae,_e).catch(Ie=>_e.error(Ie))})}},6451:(at,Se,P)=>{P.d(Se,{T:()=>le});var g=P(8189),J=P(8421),O=P(515),se=P(7669),ie=P(8996);function le(...ce){const de=(0,se.yG)(ce),he=(0,se._6)(ce,1/0),B=ce;return B.length?1===B.length?(0,J.Xf)(B[0]):(0,g.J)(he)((0,ie.D)(B,de)):O.E}},5403:(at,Se,P)=>{P.d(Se,{x:()=>J});var g=P(2961);function J(se,ie,le,ce,de){return new O(se,ie,le,ce,de)}class O extends g.Lv{constructor(ie,le,ce,de,he,B){super(ie),this.onFinalize=he,this.shouldUnsubscribe=B,this._next=le?function(j){try{le(j)}catch(K){ie.error(K)}}:super._next,this._error=de?function(j){try{de(j)}catch(K){ie.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=ce?function(){try{ce()}catch(j){ie.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:le}=this;super.unsubscribe(),!le&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},4004:(at,Se,P)=>{P.d(Se,{U:()=>O});var g=P(4482),J=P(5403);function O(se,ie){return(0,g.e)((le,ce)=>{let de=0;le.subscribe((0,J.x)(ce,he=>{ce.next(se.call(ie,he,de++))}))})}},8189:(at,Se,P)=>{P.d(Se,{J:()=>O});var g=P(5577),J=P(4671);function O(se=1/0){return(0,g.z)(J.y,se)}},5577:(at,Se,P)=>{P.d(Se,{z:()=>de});var g=P(4004),J=P(8421),O=P(4482),se=P(9672),ie=P(5403),ce=P(576);function de(he,B,j=1/0){return(0,ce.m)(B)?de((K,Le)=>(0,g.U)((Me,we)=>B(K,Me,Le,we))((0,J.Xf)(he(K,Le))),j):("number"==typeof B&&(j=B),(0,O.e)((K,Le)=>function le(he,B,j,K,Le,Me,we,et){const me=[];let fe=0,Ye=0,rt=!1;const Ae=()=>{rt&&!me.length&&!fe&&B.complete()},_e=Ue=>fe<K?Ie(Ue):me.push(Ue),Ie=Ue=>{Me&&B.next(Ue),fe++;let je=!1;(0,J.Xf)(j(Ue,Ye++)).subscribe((0,ie.x)(B,U=>{Le?.(U),Me?_e(U):B.next(U)},()=>{je=!0},void 0,()=>{if(je)try{for(fe--;me.length&&fe<K;){const U=me.shift();we?(0,se.f)(B,we,()=>Ie(U)):Ie(U)}Ae()}catch(U){B.error(U)}}))};return he.subscribe((0,ie.x)(B,_e,()=>{rt=!0,Ae()})),()=>{et?.()}}(K,Le,he,j)))}},5363:(at,Se,P)=>{P.d(Se,{Q:()=>se});var g=P(9672),J=P(4482),O=P(5403);function se(ie,le=0){return(0,J.e)((ce,de)=>{ce.subscribe((0,O.x)(de,he=>(0,g.f)(de,ie,()=>de.next(he),le),()=>(0,g.f)(de,ie,()=>de.complete(),le),he=>(0,g.f)(de,ie,()=>de.error(he),le)))})}},3099:(at,Se,P)=>{P.d(Se,{B:()=>ie});var g=P(8421),J=P(7579),O=P(2961),se=P(4482);function ie(ce={}){const{connector:de=(()=>new J.x),resetOnError:he=!0,resetOnComplete:B=!0,resetOnRefCountZero:j=!0}=ce;return K=>{let Le,Me,we,et=0,me=!1,fe=!1;const Ye=()=>{Me?.unsubscribe(),Me=void 0},rt=()=>{Ye(),Le=we=void 0,me=fe=!1},Ae=()=>{const _e=Le;rt(),_e?.unsubscribe()};return(0,se.e)((_e,Ie)=>{et++,!fe&&!me&&Ye();const Ue=we=we??de();Ie.add(()=>{et--,0===et&&!fe&&!me&&(Me=le(Ae,j))}),Ue.subscribe(Ie),!Le&&et>0&&(Le=new O.Hp({next:je=>Ue.next(je),error:je=>{fe=!0,Ye(),Me=le(rt,he,je),Ue.error(je)},complete:()=>{me=!0,Ye(),Me=le(rt,B),Ue.complete()}}),(0,g.Xf)(_e).subscribe(Le))})(K)}}function le(ce,de,...he){if(!0===de)return void ce();if(!1===de)return;const B=new O.Hp({next:()=>{B.unsubscribe(),ce()}});return de(...he).subscribe(B)}},9468:(at,Se,P)=>{P.d(Se,{R:()=>J});var g=P(4482);function J(O,se=0){return(0,g.e)((ie,le)=>{le.add(O.schedule(()=>ie.subscribe(le),se))})}},8505:(at,Se,P)=>{P.d(Se,{b:()=>ie});var g=P(576),J=P(4482),O=P(5403),se=P(4671);function ie(le,ce,de){const he=(0,g.m)(le)||ce||de?{next:le,error:ce,complete:de}:le;return he?(0,J.e)((B,j)=>{var K;null===(K=he.subscribe)||void 0===K||K.call(he);let Le=!0;B.subscribe((0,O.x)(j,Me=>{var we;null===(we=he.next)||void 0===we||we.call(he,Me),j.next(Me)},()=>{var Me;Le=!1,null===(Me=he.complete)||void 0===Me||Me.call(he),j.complete()},Me=>{var we;Le=!1,null===(we=he.error)||void 0===we||we.call(he,Me),j.error(Me)},()=>{var Me,we;Le&&(null===(Me=he.unsubscribe)||void 0===Me||Me.call(he)),null===(we=he.finalize)||void 0===we||we.call(he)}))}):se.y}},4408:(at,Se,P)=>{P.d(Se,{o:()=>ie});var g=P(727);class J extends g.w0{constructor(ce,de){super()}schedule(ce,de=0){return this}}const O={setInterval(le,ce,...de){const{delegate:he}=O;return he?.setInterval?he.setInterval(le,ce,...de):setInterval(le,ce,...de)},clearInterval(le){const{delegate:ce}=O;return(ce?.clearInterval||clearInterval)(le)},delegate:void 0};var se=P(8737);class ie extends J{constructor(ce,de){super(ce,de),this.scheduler=ce,this.work=de,this.pending=!1}schedule(ce,de=0){var he;if(this.closed)return this;this.state=ce;const B=this.id,j=this.scheduler;return null!=B&&(this.id=this.recycleAsyncId(j,B,de)),this.pending=!0,this.delay=de,this.id=null!==(he=this.id)&&void 0!==he?he:this.requestAsyncId(j,this.id,de),this}requestAsyncId(ce,de,he=0){return O.setInterval(ce.flush.bind(ce,this),he)}recycleAsyncId(ce,de,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return de;null!=de&&O.clearInterval(de)}execute(ce,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ce,de);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ce,de){let B,he=!1;try{this.work(ce)}catch(j){he=!0,B=j||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:ce,scheduler:de}=this,{actions:he}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(he,this),null!=ce&&(this.id=this.recycleAsyncId(de,ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(at,Se,P)=>{P.d(Se,{v:()=>O});var g=P(6063);class J{constructor(ie,le=J.now){this.schedulerActionCtor=ie,this.now=le}schedule(ie,le=0,ce){return new this.schedulerActionCtor(this,ie).schedule(ce,le)}}J.now=g.l.now;class O extends J{constructor(ie,le=J.now){super(ie,le),this.actions=[],this._active=!1}flush(ie){const{actions:le}=this;if(this._active)return void le.push(ie);let ce;this._active=!0;do{if(ce=ie.execute(ie.state,ie.delay))break}while(ie=le.shift());if(this._active=!1,ce){for(;ie=le.shift();)ie.unsubscribe();throw ce}}}},4986:(at,Se,P)=>{P.d(Se,{z:()=>O});var g=P(4408);const O=new(P(7565).v)(g.o)},6063:(at,Se,P)=>{P.d(Se,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(at,Se,P)=>{P.d(Se,{z:()=>g});const g={setTimeout(J,O,...se){const{delegate:ie}=g;return ie?.setTimeout?ie.setTimeout(J,O,...se):setTimeout(J,O,...se)},clearTimeout(J){const{delegate:O}=g;return(O?.clearTimeout||clearTimeout)(J)},delegate:void 0}},2202:(at,Se,P)=>{P.d(Se,{h:()=>J});const J=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(at,Se,P)=>{P.d(Se,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(at,Se,P)=>{P.d(Se,{_6:()=>le,jO:()=>se,yG:()=>ie});var g=P(576);function O(ce){return ce[ce.length-1]}function se(ce){return(0,g.m)(O(ce))?ce.pop():void 0}function ie(ce){return function J(ce){return ce&&(0,g.m)(ce.schedule)}(O(ce))?ce.pop():void 0}function le(ce,de){return"number"==typeof O(ce)?ce.pop():de}},8737:(at,Se,P)=>{function g(J,O){if(J){const se=J.indexOf(O);0<=se&&J.splice(se,1)}}P.d(Se,{P:()=>g})},3888:(at,Se,P)=>{function g(J){const se=J(ie=>{Error.call(ie),ie.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}P.d(Se,{d:()=>g})},2806:(at,Se,P)=>{P.d(Se,{O:()=>se,x:()=>O});var g=P(2416);let J=null;function O(ie){if(g.v.useDeprecatedSynchronousErrorHandling){const le=!J;if(le&&(J={errorThrown:!1,error:null}),ie(),le){const{errorThrown:ce,error:de}=J;if(J=null,ce)throw de}}else ie()}function se(ie){g.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=ie)}},9672:(at,Se,P)=>{function g(J,O,se,ie=0,le=!1){const ce=O.schedule(function(){se(),le?J.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(J.add(ce),!le)return ce}P.d(Se,{f:()=>g})},4671:(at,Se,P)=>{function g(J){return J}P.d(Se,{y:()=>g})},1144:(at,Se,P)=>{P.d(Se,{z:()=>g});const g=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(at,Se,P)=>{P.d(Se,{D:()=>J});var g=P(576);function J(O){return Symbol.asyncIterator&&(0,g.m)(O?.[Symbol.asyncIterator])}},576:(at,Se,P)=>{function g(J){return"function"==typeof J}P.d(Se,{m:()=>g})},3670:(at,Se,P)=>{P.d(Se,{c:()=>O});var g=P(8822),J=P(576);function O(se){return(0,J.m)(se[g.L])}},6495:(at,Se,P)=>{P.d(Se,{T:()=>O});var g=P(2202),J=P(576);function O(se){return(0,J.m)(se?.[g.h])}},8239:(at,Se,P)=>{P.d(Se,{t:()=>J});var g=P(576);function J(O){return(0,g.m)(O?.then)}},3260:(at,Se,P)=>{P.d(Se,{L:()=>se,Q:()=>O});var g=P(655),J=P(576);function O(ie){return(0,g.FC)(this,arguments,function*(){const ce=ie.getReader();try{for(;;){const{value:de,done:he}=yield(0,g.qq)(ce.read());if(he)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(de)}}finally{ce.releaseLock()}})}function se(ie){return(0,J.m)(ie?.getReader)}},4482:(at,Se,P)=>{P.d(Se,{A:()=>J,e:()=>O});var g=P(576);function J(se){return(0,g.m)(se?.lift)}function O(se){return ie=>{if(J(ie))return ie.lift(function(le){try{return se(le,this)}catch(ce){this.error(ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(at,Se,P)=>{P.d(Se,{U:()=>O,z:()=>J});var g=P(4671);function J(...se){return O(se)}function O(se){return 0===se.length?g.y:1===se.length?se[0]:function(le){return se.reduce((ce,de)=>de(ce),le)}}},7849:(at,Se,P)=>{P.d(Se,{h:()=>O});var g=P(2416),J=P(3410);function O(se){J.z.setTimeout(()=>{const{onUnhandledError:ie}=g.v;if(!ie)throw se;ie(se)})}},4532:(at,Se,P)=>{function g(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Se,{z:()=>g})},655:(at,Se,P)=>{function se(z,Q){var ne={};for(var te in z)Object.prototype.hasOwnProperty.call(z,te)&&Q.indexOf(te)<0&&(ne[te]=z[te]);if(null!=z&&"function"==typeof Object.getOwnPropertySymbols){var ke=0;for(te=Object.getOwnPropertySymbols(z);ke<te.length;ke++)Q.indexOf(te[ke])<0&&Object.prototype.propertyIsEnumerable.call(z,te[ke])&&(ne[te[ke]]=z[te[ke]])}return ne}function de(z,Q,ne,te){return new(ne||(ne=Promise))(function(Oe,ut){function Xt(an){try{We(te.next(an))}catch(mn){ut(mn)}}function Ht(an){try{We(te.throw(an))}catch(mn){ut(mn)}}function We(an){an.done?Oe(an.value):function ke(Oe){return Oe instanceof ne?Oe:new ne(function(ut){ut(Oe)})}(an.value).then(Xt,Ht)}We((te=te.apply(z,Q||[])).next())})}function me(z){return this instanceof me?(this.v=z,this):new me(z)}function fe(z,Q,ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,te=ne.apply(z,Q||[]),Oe=[];return ke={},ut("next"),ut("throw"),ut("return"),ke[Symbol.asyncIterator]=function(){return this},ke;function ut(Zt){te[Zt]&&(ke[Zt]=function(Jt){return new Promise(function(xr,Ot){Oe.push([Zt,Jt,xr,Ot])>1||Xt(Zt,Jt)})})}function Xt(Zt,Jt){try{!function Ht(Zt){Zt.value instanceof me?Promise.resolve(Zt.value.v).then(We,an):mn(Oe[0][2],Zt)}(te[Zt](Jt))}catch(xr){mn(Oe[0][3],xr)}}function We(Zt){Xt("next",Zt)}function an(Zt){Xt("throw",Zt)}function mn(Zt,Jt){Zt(Jt),Oe.shift(),Oe.length&&Xt(Oe[0][0],Oe[0][1])}}function rt(z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ne,Q=z[Symbol.asyncIterator];return Q?Q.call(z):(z=function K(z){var Q="function"==typeof Symbol&&Symbol.iterator,ne=Q&&z[Q],te=0;if(ne)return ne.call(z);if(z&&"number"==typeof z.length)return{next:function(){return z&&te>=z.length&&(z=void 0),{value:z&&z[te++],done:!z}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")}(z),ne={},te("next"),te("throw"),te("return"),ne[Symbol.asyncIterator]=function(){return this},ne);function te(Oe){ne[Oe]=z[Oe]&&function(ut){return new Promise(function(Xt,Ht){!function ke(Oe,ut,Xt,Ht){Promise.resolve(Ht).then(function(We){Oe({value:We,done:Xt})},ut)}(Xt,Ht,(ut=z[Oe](ut)).done,ut.value)})}}}P.d(Se,{FC:()=>fe,KL:()=>rt,_T:()=>se,mG:()=>de,qq:()=>me})},4650:(at,Se,P)=>{P.d(Se,{$8M:()=>Du,$Z:()=>Vb,AFp:()=>rw,AaK:()=>de,CRH:()=>Dh,CZH:()=>Ho,CqO:()=>em,D6c:()=>ed,EJc:()=>bp,F4k:()=>q_,FYo:()=>S,FiY:()=>Be,G48:()=>iD,GfV:()=>Fe,Gpc:()=>j,JOm:()=>oo,LFG:()=>On,LSH:()=>lg,Lbi:()=>uT,Lck:()=>Nv,MMx:()=>ue,NdJ:()=>lh,OlP:()=>pn,PXZ:()=>gT,Q6J:()=>G_,QGY:()=>ch,QP$:()=>Yt,Qsj:()=>N,R0b:()=>Fs,RDi:()=>Vw,Rgc:()=>Vr,SBq:()=>h,Sil:()=>ZE,Suo:()=>fo,TTD:()=>zi,TgZ:()=>yr,X6Q:()=>IT,XFs:()=>Ke,Xpm:()=>be,Xts:()=>yf,Y36:()=>_l,YKP:()=>ic,YNc:()=>Qg,Yjl:()=>ve,Yz7:()=>Jt,Z0I:()=>$i,ZZ4:()=>kp,_Bn:()=>Ne,_UZ:()=>z_,_Vd:()=>ju,_c5:()=>mD,_uU:()=>cv,aQg:()=>Pp,c2e:()=>Km,cJS:()=>Ot,cg1:()=>La,dDg:()=>hT,dqk:()=>on,eFA:()=>nD,ekj:()=>dm,eoX:()=>Sp,f3M:()=>b,g9A:()=>Rh,h0i:()=>An,hGG:()=>oy,hij:()=>ec,iGM:()=>Ip,ifc:()=>it,ip1:()=>nw,jDz:()=>vr,kL8:()=>HI,lG2:()=>q,lqb:()=>Xr,lri:()=>eD,n5z:()=>Qi,oAB:()=>Pt,oxw:()=>K_,q4F:()=>Ze,qLn:()=>Af,qOj:()=>H_,qZA:()=>co,rWj:()=>$t,sBO:()=>aD,sIi:()=>Yf,s_b:()=>Bl,soG:()=>Zm,tb:()=>WE,tp0:()=>_t,uIk:()=>Sn,vHH:()=>we,vpe:()=>Ps,wAp:()=>Et,xp6:()=>y0,z2F:()=>xp,zSh:()=>Ca,zs3:()=>Na});var g=P(7579),J=P(727),O=P(9751),se=P(6451),ie=P(3099);function le(i){for(let s in i)if(i[s]===le)return s;throw Error("Could not find renamed property on target object.")}function ce(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function de(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(de).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function he(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const B=le({__forward_ref__:le});function j(i){return i.__forward_ref__=j,i.toString=function(){return de(this())},i}function K(i){return Le(i)?i():i}function Le(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===j}class we extends Error{constructor(s,a){super(function et(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function me(i){return"string"==typeof i?i:null==i?"":String(i)}function _e(i,s){throw new we(-201,!1)}function Ht(i,s){null==i&&function We(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function Jt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Ot(i){return{providers:i.providers||[],imports:i.imports||[]}}function cn(i){return mi(i,yi)||mi(i,si)}function $i(i){return null!==cn(i)}function mi(i,s){return i.hasOwnProperty(s)?i[s]:null}function Vs(i){return i&&(i.hasOwnProperty(ii)||i.hasOwnProperty(Ko))?i[ii]:null}const yi=le({\u0275prov:le}),ii=le({\u0275inj:le}),si=le({ngInjectableDef:le}),Ko=le({ngInjectorDef:le});var Ke=(()=>((Ke=Ke||{})[Ke.Default=0]="Default",Ke[Ke.Host=1]="Host",Ke[Ke.Self=2]="Self",Ke[Ke.SkipSelf=4]="SkipSelf",Ke[Ke.Optional=8]="Optional",Ke))();let Ir;function Zn(i){const s=Ir;return Ir=i,s}function oi(i,s,a){const c=cn(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Ke.Optional?null:void 0!==s?s:void _e(de(i))}function Ln(i){return{toString:i}.toString()}var Bn=(()=>((Bn=Bn||{})[Bn.OnPush=0]="OnPush",Bn[Bn.Default=1]="Default",Bn))(),it=(()=>{return(i=it||(it={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",it;var i})();const on=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Hr={},At=[],gs=le({\u0275cmp:le}),en=le({\u0275dir:le}),Si=le({\u0275pipe:le}),tn=le({\u0275mod:le}),Yn=le({\u0275fac:le}),Rr=le({__NG_ELEMENT_ID__:le});let Xe=0;function be(i){return Ln(()=>{const a=!0===i.standalone,c={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Bn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||At,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||it.Emulated,id:"c"+Xe++,styles:i.styles||At,_:null,setInput:null,schemas:i.schemas||null,tView:null},f=i.dependencies,_=i.features;return d.inputs=L(i.inputs,c),d.outputs=L(i.outputs),_&&_.forEach(I=>I(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(Dt).filter(wt):null,d.pipeDefs=f?()=>("function"==typeof f?f():f).map(ct).filter(wt):null,d})}function Dt(i){return Y(i)||He(i)}function wt(i){return null!==i}function Pt(i){return Ln(()=>({type:i.type,bootstrap:i.bootstrap||At,declarations:i.declarations||At,imports:i.imports||At,exports:i.exports||At,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function L(i,s){if(null==i)return Hr;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=c,s&&(s[d]=f)}return a}const q=be;function ve(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Y(i){return i[gs]||null}function He(i){return i[en]||null}function ct(i){return i[Si]||null}function Yt(i){const s=Y(i)||He(i)||ct(i);return null!==s&&s.standalone}function dn(i,s){const a=i[tn]||null;if(!a&&!0===s)throw new Error(`Type ${de(i)} does not have '\u0275mod' property.`);return a}function ir(i){return Array.isArray(i)&&"object"==typeof i[1]}function Nr(i){return Array.isArray(i)&&!0===i[1]}function Ya(i){return 0!=(8&i.flags)}function Yo(i){return 2==(2&i.flags)}function bc(i){return 1==(1&i.flags)}function Er(i){return null!==i.template}function Kh(i){return 0!=(256&i[2])}function xi(i,s){return i.hasOwnProperty(Yn)?i[Yn]:null}class Gi{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function zi(){return $s}function $s(i){return i.type.prototype.ngOnChanges&&(i.setInput=Xa),Qo}function Qo(){const i=Qh(this),s=i?.current;if(s){const a=i.previous;if(a===Hr)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function Xa(i,s,a,c){const d=Qh(i)||function Xo(i,s){return i[Ac]=s}(i,{previous:Hr,current:null}),f=d.current||(d.current={}),_=d.previous,I=this.declaredInputs[a],E=_[I];f[I]=new Gi(E&&E.currentValue,s,_===Hr),i[c]=s}zi.ngInherit=!0;const Ac="__ngSimpleChanges__";function Qh(i){return i[Ac]||null}function xn(i){for(;Array.isArray(i);)i=i[0];return i}function ui(i,s){return xn(s[i])}function Or(i,s){return xn(s[i.index])}function Io(i,s){return i.data[s]}function Wt(i,s){const a=s[i];return ir(a)?a:a[0]}function Hs(i){return 64==(64&i[2])}function vi(i,s){return null==s?null:i[s]}function ru(i){i[18]=0}function Tn(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const St={lFrame:Bc(null),bindingsEnabled:!0};function Ki(){return St.bindingsEnabled}function Ce(){return St.lFrame.lView}function Gt(){return St.lFrame.tView}function Mn(){let i=au();for(;null!==i&&64===i.type;)i=i.parent;return i}function au(){return St.lFrame.currentTNode}function ci(i,s){const a=St.lFrame;a.currentTNode=i,a.isParent=s}function ea(){return St.lFrame.isParent}function Gs(){return St.lFrame.bindingIndex++}function Qp(i,s){const a=St.lFrame;a.bindingIndex=a.bindingRootIndex=i,uu(s)}function uu(i){St.lFrame.currentDirectiveIndex=i}function Lc(){return St.lFrame.currentQueryIndex}function sa(i){St.lFrame.currentQueryIndex=i}function Vc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function cu(i,s,a){if(a&Ke.SkipSelf){let d=s,f=i;for(;!(d=d.parent,null!==d||a&Ke.Host||(d=Vc(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;s=d,i=f}const c=St.lFrame=Uc();return c.currentTNode=s,c.lView=i,!0}function lu(i){const s=Uc(),a=i[1];St.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Uc(){const i=St.lFrame,s=null===i?null:i.child;return null===s?Bc(i):s}function Bc(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function jc(){const i=St.lFrame;return St.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const md=jc;function zs(){const i=jc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Jn(){return St.lFrame.selectedIndex}function qr(i){St.lFrame.selectedIndex=i}function _n(){const i=St.lFrame;return Io(i.tView,i.selectedIndex)}function fu(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:I,ngAfterViewInit:E,ngAfterViewChecked:T,ngOnDestroy:R}=f;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),I&&((i.contentHooks||(i.contentHooks=[])).push(a,I),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,I)),E&&(i.viewHooks||(i.viewHooks=[])).push(-a,E),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=R&&(i.destroyHooks||(i.destroyHooks=[])).push(a,R)}}function Ws(i,s,a){bo(i,s,3,a)}function Do(i,s,a,c){(3&i[2])===a&&bo(i,s,a,c)}function vd(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function bo(i,s,a,c){const f=c??-1,_=s.length-1;let I=0;for(let E=void 0!==c?65535&i[18]:0;E<_;E++)if("number"==typeof s[E+1]){if(I=s[E],null!=c&&I>=c)break}else s[E]<0&&(i[18]+=65536),(I<f||-1==f)&&(wd(i,a,s,E),i[18]=(4294901760&i[18])+E+2),E++}function wd(i,s,a,c){const d=a[c]<0,f=a[c+1],I=i[d?-a[c]:a[c]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(I)}finally{}}}else try{f.call(I)}finally{}}class Ds{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function To(i,s,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const f=a[c++],_=a[c++],I=a[c++];i.setAttribute(s,_,I,f)}else{const f=d,_=a[++c];yu(f)?i.setProperty(s,f,_):i.setAttribute(s,f,_),c++}}return c}function Zs(i){return 3===i||4===i||6===i}function yu(i){return 64===i.charCodeAt(0)}function oa(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const d=s[c];"number"==typeof d?a=d:0===a||Ed(i,a,d,null,-1===a||2===a?s[++c]:null)}}return i}function Ed(i,s,a,c,d){let f=0,_=i.length;if(-1===s)_=-1;else for(;f<i.length;){const I=i[f++];if("number"==typeof I){if(I===s){_=-1;break}if(I>s){_=f-1;break}}}for(;f<i.length;){const I=i[f];if("number"==typeof I)break;if(I===a){if(null===c)return void(null!==d&&(i[f+1]=d));if(c===i[f+1])return void(i[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==_&&(i.splice(_,0,s),f=_+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==d&&i.splice(f++,0,d)}function Dd(i){return-1!==i}function sr(i){return 32767&i}function ua(i,s){let a=function aa(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let Ri=!0;function ca(i){const s=Ri;return Ri=i,s}let Vn=0;const wi={};function Ys(i,s){const a=vu(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,da(c.data,i),da(s,null),da(c.blueprint,null));const d=wu(i,s),f=i.injectorIndex;if(Dd(d)){const _=sr(d),I=ua(d,s),E=I[1].data;for(let T=0;T<8;T++)s[f+T]=I[_+T]|E[_+T]}return s[f+8]=d,f}function da(i,s){i.push(0,0,0,0,0,0,0,0,s)}function vu(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function wu(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=s;for(;null!==d;){if(c=xo(d),null===c)return-1;if(a++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function bs(i,s,a){!function _u(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Rr)&&(c=a[Rr]),null==c&&(c=a[Rr]=Vn++);const d=255&c;s.data[i+(d>>5)]|=1<<d}(i,s,a)}function Cs(i,s,a){if(a&Ke.Optional||void 0!==i)return i;_e()}function zc(i,s,a,c){if(a&Ke.Optional&&void 0===c&&(c=null),0==(a&(Ke.Self|Ke.Host))){const d=i[9],f=Zn(void 0);try{return d?d.get(s,c,a&Ke.Optional):oi(s,c,a&Ke.Optional)}finally{Zn(f)}}return Cs(c,0,a)}function Qs(i,s,a,c=Ke.Default,d){if(null!==i){if(1024&s[2]){const _=function Ao(i,s,a,c,d){let f=i,_=s;for(;null!==f&&null!==_&&1024&_[2]&&!(256&_[2]);){const I=ha(f,_,a,c|Ke.Self,wi);if(I!==wi)return I;let E=f.parent;if(!E){const T=_[21];if(T){const R=T.get(a,wi,c);if(R!==wi)return R}E=xo(_),_=_[15]}f=E}return d}(i,s,a,c,wi);if(_!==wi)return _}const f=ha(i,s,a,c,wi);if(f!==wi)return f}return zc(s,a,c,d)}function ha(i,s,a,c,d){const f=function qc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Rr)?i[Rr]:void 0;return"number"==typeof s?s>=0?255&s:Wc:s}(a);if("function"==typeof f){if(!cu(s,i,c))return c&Ke.Host?Cs(d,0,c):zc(s,a,c,d);try{const _=f(c);if(null!=_||c&Ke.Optional)return _;_e()}finally{md()}}else if("number"==typeof f){let _=null,I=vu(i,s),E=-1,T=c&Ke.Host?s[16][6]:null;for((-1===I||c&Ke.SkipSelf)&&(E=-1===I?wu(i,s):s[I+8],-1!==E&&fa(c,!1)?(_=s[1],I=sr(E),s=ua(E,s)):I=-1);-1!==I;){const R=s[1];if(Iu(f,I,R.data)){const k=Td(I,s,a,_,c,T);if(k!==wi)return k}E=s[I+8],-1!==E&&fa(c,s[1].data[I+8]===T)&&Iu(f,I,s)?(_=R,I=sr(E),s=ua(E,s)):I=-1}}return d}function Td(i,s,a,c,d,f){const _=s[1],I=_.data[i+8],R=So(I,_,a,null==c?Yo(I)&&Ri:c!=_&&0!=(3&I.type),d&Ke.Host&&f===I);return null!==R?Yi(s,_,R,I):wi}function So(i,s,a,c,d){const f=i.providerIndexes,_=s.data,I=1048575&f,E=i.directiveStart,R=f>>20,H=d?I+R:i.directiveEnd;for(let X=c?I:I+R;X<H;X++){const ye=_[X];if(X<E&&a===ye||X>=E&&ye.type===a)return X}if(d){const X=_[E];if(X&&Er(X)&&X.type===a)return E}return null}function Yi(i,s,a,c){let d=i[a];const f=s.data;if(function Ks(i){return i instanceof Ds}(d)){const _=d;_.resolving&&function Ye(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new we(-200,`Circular dependency in DI detected for ${i}${a}`)}(function fe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():me(i)}(f[a]));const I=ca(_.canSeeViewProviders);_.resolving=!0;const E=_.injectImpl?Zn(_.injectImpl):null;cu(i,c,Ke.Default);try{d=i[a]=_.factory(void 0,f,i,c),s.firstCreatePass&&a>=c.directiveStart&&function _d(i,s,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=s.type.prototype;if(c){const _=$s(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==E&&Zn(E),ca(I),_.resolving=!1,md()}}return d}function Iu(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function fa(i,s){return!(i&Ke.Self||i&Ke.Host&&s)}class Xs{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return Qs(this._tNode,this._lView,s,c,a)}}function Wc(){return new Xs(Mn(),Ce())}function Qi(i){return Ln(()=>{const s=i.prototype.constructor,a=s[Yn]||Eu(s),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const f=d[Yn]||Eu(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function Eu(i){return Le(i)?()=>{const s=Eu(K(i));return s&&s()}:xi(i)}function xo(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function Du(i){return function Cd(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const f=a[d];if(Zs(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(f===s)return a[d+1];d+=2}}}return null}(Mn(),i)}const Ts="__parameters__";function No(i,s,a){return Ln(()=>{const c=function bu(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(s);function d(...f){if(this instanceof d)return c.apply(this,f),this;const _=new d(...f);return I.annotation=_,I;function I(E,T,R){const k=E.hasOwnProperty(Ts)?E[Ts]:Object.defineProperty(E,Ts,{value:[]})[Ts];for(;k.length<=R;)k.push(null);return(k[R]=k[R]||[]).push(_),E}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class pn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Jt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Kr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(s===i&&(s=i.slice(0,a)),Kr(c,s)):s!==i&&s.push(c)}return s}function Ii(i,s){i.forEach(a=>Array.isArray(a)?Ii(a,s):s(a))}function Zc(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Oo(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function kr(i,s,a){let c=Xi(i,s);return c>=0?i[1|c]=a:(c=~c,function It(i,s,a,c){let d=i.length;if(d==s)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function ma(i,s){const a=Xi(i,s);if(a>=0)return i[1|a]}function Xi(i,s){return function Pr(i,s,a){let c=0,d=i.length>>a;for(;d!==c;){const f=c+(d-c>>1),_=i[f<<a];if(s===_)return f<<a;_>s?d=f:c=f+1}return~(d<<a)}(i,s,1)}const gn={},ki="__NG_DI_FLAG__",Au="ngTempTokenPath",xu=/\n/gm,Xc="__source";let to;function Ji(i){const s=to;return to=i,s}function Jc(i,s=Ke.Default){if(void 0===to)throw new we(-203,!1);return null===to?oi(i,void 0,s):to.get(i,s&Ke.Optional?null:void 0,s)}function On(i,s=Ke.Default){return(function ps(){return Ir}()||Jc)(K(i),s)}function b(i,s=Ke.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),On(i,s)}function C(i){const s=[];for(let a=0;a<i.length;a++){const c=K(i[a]);if(Array.isArray(c)){if(0===c.length)throw new we(900,!1);let d,f=Ke.Default;for(let _=0;_<c.length;_++){const I=c[_],E=F(I);"number"==typeof E?-1===E?d=I.token:f|=E:d=I}s.push(On(d,f))}else s.push(On(c))}return s}function x(i,s){return i[ki]=s,i.prototype[ki]=s,i}function F(i){return i[ki]}const Be=x(No("Optional"),8),_t=x(No("SkipSelf"),4);let rg;function Vw(i){rg=i}class Ru{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ns(i){return i instanceof Ru?i.changingThisBreaksApplicationSecurity:i}const ro=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var ur=(()=>((ur=ur||{})[ur.NONE=0]="NONE",ur[ur.HTML=1]="HTML",ur[ur.STYLE=2]="STYLE",ur[ur.SCRIPT=3]="SCRIPT",ur[ur.URL=4]="URL",ur[ur.RESOURCE_URL=5]="RESOURCE_URL",ur))();function lg(i){const s=function Vu(){const i=Ce();return i&&i[12]}();return s?s.sanitize(ur.URL,i)||"":function Nu(i,s){const a=function Md(i){return i instanceof Ru&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?ns(i):function ku(i){return(i=String(i)).match(ro)?i:"unsafe:"+i}(me(i))}const yf=new pn("ENVIRONMENT_INITIALIZER"),_f=new pn("INJECTOR",-1),fg=new pn("INJECTOR_DEF_TYPES");class Gy{get(s,a=gn){if(a===gn){const c=new Error(`NullInjectorError: No provider for ${de(s)}!`);throw c.name="NullInjectorError",c}return a}}function vf(...i){return{\u0275providers:Ld(0,i)}}function Ld(i,...s){const a=[],c=new Set;let d;return Ii(s,f=>{const _=f;Vd(_,a,[],c)&&(d||(d=[]),d.push(_))}),void 0!==d&&al(d,a),a}function al(i,s){for(let a=0;a<i.length;a++){const{providers:d}=i[a];Ii(d,f=>{s.push(f)})}}function Vd(i,s,a,c){if(!(i=K(i)))return!1;let d=null,f=Vs(i);const _=!f&&Y(i);if(f||_){if(_&&!_.standalone)return!1;d=i}else{const E=i.ngModule;if(f=Vs(E),!f)return!1;d=E}const I=c.has(d);if(_){if(I)return!1;if(c.add(d),_.dependencies){const E="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const T of E)Vd(T,s,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!I){let T;c.add(d);try{Ii(f.imports,R=>{Vd(R,s,a,c)&&(T||(T=[]),T.push(R))})}finally{}void 0!==T&&al(T,s)}if(!I){const T=xi(d)||(()=>new d);s.push({provide:d,useFactory:T,deps:At},{provide:fg,useValue:d,multi:!0},{provide:yf,useValue:()=>On(d),multi:!0})}const E=f.providers;null==E||I||Ii(E,R=>{s.push(R)})}}return d!==i&&void 0!==i.providers}const Ud=le({provide:String,useValue:le});function wf(i){return null!==i&&"object"==typeof i&&Ud in i}function Rs(i){return"function"==typeof i}const Ca=new pn("Set Injector scope."),Bu={},If={};let ul;function Bd(){return void 0===ul&&(ul=new Gy),ul}class Xr{}class Ef extends Xr{constructor(s,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ta(s,_=>this.processProvider(_)),this.records.set(_f,cr(void 0,this)),d.has("environment")&&this.records.set(Xr,cr(void 0,this));const f=this.records.get(Ca);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(fg.multi,At,Ke.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=Ji(this),c=Zn(void 0);try{return s()}finally{Ji(a),Zn(c)}}get(s,a=gn,c=Ke.Default){this.assertNotDestroyed();const d=Ji(this),f=Zn(void 0);try{if(!(c&Ke.SkipSelf)){let I=this.records.get(s);if(void 0===I){const E=function Ww(i){return"function"==typeof i||"object"==typeof i&&i instanceof pn}(s)&&cn(s);I=E&&this.injectableDefInScope(E)?cr(jd(s),Bu):null,this.records.set(s,I)}if(null!=I)return this.hydrate(s,I)}return(c&Ke.Self?Bd():this.parent).get(s,a=c&Ke.Optional&&a===gn?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Au]=_[Au]||[]).unshift(de(s)),d)throw _;return function Z(i,s,a,c){const d=i[Au];throw s[Xc]&&d.unshift(s[Xc]),i.message=function re(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=de(s);if(Array.isArray(s))d=s.map(de).join(" -> ");else if("object"==typeof s){let f=[];for(let _ in s)if(s.hasOwnProperty(_)){let I=s[_];f.push(_+":"+("string"==typeof I?JSON.stringify(I):de(I)))}d=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(xu,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[Au]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{Zn(f),Ji(d)}}resolveInjectorInitializers(){const s=Ji(this),a=Zn(void 0);try{const c=this.get(yf.multi,At,Ke.Self);for(const d of c)d()}finally{Ji(s),Zn(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(de(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new we(205,!1)}processProvider(s){let a=Rs(s=K(s))?s:K(s&&s.provide);const c=function Df(i){return wf(i)?cr(void 0,i.useValue):cr(bf(i),Bu)}(s);if(Rs(s)||!0!==s.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=cr(void 0,Bu,!0),d.factory=()=>C(d.multi),this.records.set(a,d)),a=s,d.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===Bu&&(a.value=If,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Cf(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=K(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function jd(i){const s=cn(i),a=null!==s?s.factory:xi(i);if(null!==a)return a;if(i instanceof pn)throw new we(204,!1);if(i instanceof Function)return function Wy(i){const s=i.length;if(s>0)throw function Ei(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new we(204,!1);const a=function Mr(i){const s=i&&(i[yi]||i[si]);if(s){const a=function $r(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new we(204,!1)}function bf(i,s,a){let c;if(Rs(i)){const d=K(i);return xi(d)||jd(d)}if(wf(i))c=()=>K(i.useValue);else if(function Uu(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...C(i.deps||[]));else if(function Qr(i){return!(!i||!i.useExisting)}(i))c=()=>On(K(i.useExisting));else{const d=K(i&&(i.useClass||i.provide));if(!function $d(i){return!!i.deps}(i))return xi(d)||jd(d);c=()=>new d(...C(i.deps))}return c}function cr(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function rs(i){return!!i.\u0275providers}function Ta(i,s){for(const a of i)Array.isArray(a)?Ta(a,s):rs(a)?Ta(a.\u0275providers,s):s(a)}class Hd{}class Zy{resolveComponentFactory(s){throw function Sa(i){const s=Error(`No component factory found for ${de(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let ju=(()=>{class i{}return i.NULL=new Zy,i})();function Yy(){return y(Mn(),Ce())}function y(i,s){return new h(Or(i,s))}let h=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Yy,i})();function p(i){return i instanceof h?i.nativeElement:i}class S{}let N=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function G(){const i=Ce(),a=Wt(Mn().index,i);return(ir(a)?a:i)[11]}(),i})(),ae=(()=>{class i{}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:()=>null}),i})();class Fe{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Ze=new Fe("14.2.8"),mt={};function cl(i){return i.ngOriginalError}class Af{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&cl(s);for(;a&&cl(a);)a=cl(a);return a||null}}const xf=new Map;let Mf=0;const is="__ngContext__";function hn(i,s){ir(s)?(i[is]=s[20],function t0(i){xf.set(i[20],i)}(s)):i[is]=s}function ss(i){return i instanceof Function?i():i}var oo=(()=>((oo=oo||{})[oo.Important=1]="Important",oo[oo.DashCase=2]="DashCase",oo))();function s0(i,s){return undefined(i,s)}function Nf(i){const s=i[3];return Nr(s)?s[3]:s}function vg(i){return u_(i[13])}function a_(i){return u_(i[4])}function u_(i){for(;null!==i&&!Nr(i);)i=i[4];return i}function hl(i,s,a,c,d){if(null!=c){let f,_=!1;Nr(c)?f=c:ir(c)&&(_=!0,c=c[0]);const I=xn(c);0===i&&null!==a?null==d?l_(s,a,I):Gu(s,a,I,d||null,!0):1===i&&null!==a?Gu(s,a,I,d||null,!0):2===i?function Ib(i,s,a){const c=gl(i,s);c&&function vb(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,I,_):3===i&&s.destroyNode(I),null!=f&&function Vf(i,s,a,c,d){const f=a[7];f!==xn(a)&&hl(s,i,c,f,d);for(let I=10;I<a.length;I++){const E=a[I];Lf(E[1],E,i,s,c,f)}}(s,i,f,a,d)}}function zt(i,s,a){return i.createElement(s,a)}function u0(i,s){const a=i[9],c=a.indexOf(s),d=s[3];512&s[2]&&(s[2]&=-513,Tn(d,-1)),a.splice(c,1)}function Zd(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const d=c[17];null!==d&&d!==i&&u0(d,c),s>0&&(i[a-1][4]=c[4]);const f=Oo(i,10+s);!function kf(i,s){Lf(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const _=f[19];null!==_&&_.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Yd(i,s){if(!(128&s[2])){const a=s[11];a.destroyNode&&Lf(i,s,a,3,null,null),function yb(i){let s=i[13];if(!s)return Ig(i[1],i);for(;s;){let a=null;if(ir(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)ir(s)&&Ig(s[1],s),s=s[3];null===s&&(s=i),ir(s)&&Ig(s[1],s),a=s&&s[4]}s=a}}(s)}}function Ig(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function _b(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=s[a[c]];if(!(d instanceof Ds)){const f=a[c+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const I=d[f[_]],E=f[_+1];try{E.call(I)}finally{}}else try{f.call(d)}finally{}}}}(i,s),function Eg(i,s){const a=i.cleanup,c=s[7];let d=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const _=a[f+1],I="function"==typeof _?_(s):xn(s[_]),E=c[d=a[f+2]],T=a[f+3];"boolean"==typeof T?I.removeEventListener(a[f],E,T):T>=0?c[d=T]():c[d=-T].unsubscribe(),f+=2}else{const _=c[d=a[f+1]];a[f].call(_)}if(null!==c){for(let f=d+1;f<c.length;f++)(0,c[f])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const a=s[17];if(null!==a&&Nr(s[3])){a!==s[3]&&u0(a,s);const c=s[19];null!==c&&c.detachView(i)}!function n_(i){xf.delete(i[20])}(s)}}function Dg(i,s,a){return function Pf(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];if(2&c.flags){const d=i.data[c.directiveStart].encapsulation;if(d===it.None||d===it.Emulated)return null}return Or(c,a)}(i,s.parent,a)}function Gu(i,s,a,c,d){i.insertBefore(s,a,c,d)}function l_(i,s,a){i.appendChild(s,a)}function c0(i,s,a,c,d){null!==c?Gu(i,s,a,c,d):l_(i,s,a)}function gl(i,s){return i.parentNode(s)}let h0=function d0(i,s,a){return 40&i.type?Or(i,a):null};function ml(i,s,a,c){const d=Dg(i,c,s),f=s[11],I=function l0(i,s,a){return h0(i,s,a)}(c.parent||s[6],c,s);if(null!=d)if(Array.isArray(a))for(let E=0;E<a.length;E++)c0(f,d,a[E],I,!1);else c0(f,d,a,I,!1)}function Cg(i,s){if(null!==s){const a=s.type;if(3&a)return Or(s,i);if(4&a)return Ff(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return Cg(i,c);{const d=i[s.index];return Nr(d)?Ff(-1,d):xn(d)}}if(32&a)return s0(s,i)()||xn(i[s.index]);{const c=zu(i,s);return null!==c?Array.isArray(c)?c[0]:Cg(Nf(i[16]),c):Cg(i,s.next)}}return null}function zu(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Ff(i,s){const a=10+i+1;if(a<s.length){const c=s[a],d=c[1].firstChild;if(null!==d)return Cg(c,d)}return s[7]}function h_(i,s,a,c,d,f,_){for(;null!=a;){const I=c[a.index],E=a.type;if(_&&0===s&&(I&&hn(xn(I),c),a.flags|=4),64!=(64&a.flags))if(8&E)h_(i,s,a.child,c,d,f,!1),hl(s,i,d,I,f);else if(32&E){const T=s0(a,c);let R;for(;R=T();)hl(s,i,d,R,f);hl(s,i,d,I,f)}else 16&E?Qd(i,s,c,a,d,f):hl(s,i,d,I,f);a=_?a.projectionNext:a.next}}function Lf(i,s,a,c,d,f){h_(a,c,i.firstChild,s,d,f,!1)}function Qd(i,s,a,c,d,f){const _=a[16],E=_[6].projection[c.projection];if(Array.isArray(E))for(let T=0;T<E.length;T++)hl(s,i,d,E[T],f);else h_(i,s,E,_[3],d,f,!0)}function f_(i,s,a){i.setAttribute(s,"style",a)}function Tg(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function p_(i,s,a){let c=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=s.length;if(d+f===c||i.charCodeAt(d+f)<=32)return d}a=d+1}}const f0="ng-template";function Db(i,s,a){let c=0;for(;c<i.length;){let d=i[c++];if(a&&"class"===d){if(d=i[c],-1!==p_(d.toLowerCase(),s,0))return!0}else if(1===d){for(;c<i.length&&"string"==typeof(d=i[c++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function g_(i){return 4===i.type&&i.value!==f0}function bb(i,s,a){return s===(4!==i.type||a?i.value:f0)}function m_(i,s,a){let c=4;const d=i.attrs||[],f=function p0(i){for(let s=0;s<i.length;s++)if(Zs(i[s]))return s;return i.length}(d);let _=!1;for(let I=0;I<s.length;I++){const E=s[I];if("number"!=typeof E){if(!_)if(4&c){if(c=2|1&c,""!==E&&!bb(i,E,a)||""===E&&1===s.length){if(Di(c))return!1;_=!0}}else{const T=8&c?E:s[++I];if(8&c&&null!==i.attrs){if(!Db(i.attrs,T,a)){if(Di(c))return!1;_=!0}continue}const k=Cb(8&c?"class":E,d,g_(i),a);if(-1===k){if(Di(c))return!1;_=!0;continue}if(""!==T){let H;H=k>f?"":d[k+1].toLowerCase();const X=8&c?H:null;if(X&&-1!==p_(X,T,0)||2&c&&T!==H){if(Di(c))return!1;_=!0}}}}else{if(!_&&!Di(c)&&!Di(E))return!1;if(_&&Di(E))continue;_=!1,c=E|1&c}}return Di(c)||_}function Di(i){return 0==(1&i)}function Cb(i,s,a,c){if(null===s)return-1;let d=0;if(c||!a){let f=!1;for(;d<s.length;){const _=s[d];if(_===i)return d;if(3===_||6===_)f=!0;else{if(1===_||2===_){let I=s[++d];for(;"string"==typeof I;)I=s[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=f?1:2}return-1}return function g0(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function Sg(i,s,a=!1){for(let c=0;c<s.length;c++)if(m_(i,s[c],a))return!0;return!1}function Ag(i,s){return i?":not("+s.trim()+")":s}function yl(i){let s=i[0],a=1,c=2,d="",f=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&c){const I=i[++a];d+="["+_+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?d+="."+_:4&c&&(d+=" "+_);else""!==d&&!Di(_)&&(s+=Ag(f,d),d=""),c=_,f=f||!Di(c);a++}return""!==d&&(s+=Ag(f,d)),s}const Vt={};function y0(i){_0(Gt(),Ce(),Jn()+i,!1)}function _0(i,s,a,c){if(!c)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&Ws(s,f,a)}else{const f=i.preOrderHooks;null!==f&&Do(s,f,0,a)}qr(a)}function E0(i,s=null,a=null,c){const d=y_(i,s,a,c);return d.resolveInjectorInitializers(),d}function y_(i,s=null,a=null,c,d=new Set){const f=[a||At,vf(i)];return c=c||("object"==typeof i?void 0:de(i)),new Ef(f,s||Bd(),c||null,d)}let Na=(()=>{class i{static create(a,c){if(Array.isArray(a))return E0({name:""},c,a,"");{const d=a.name??"";return E0({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=gn,i.NULL=new Gy,i.\u0275prov=Jt({token:i,providedIn:"any",factory:()=>On(_f)}),i.__NG_ELEMENT_ID__=-1,i})();function _l(i,s=Ke.Default){const a=Ce();return null===a?On(i,s):Qs(Mn(),a,K(i),s)}function Vb(){throw new Error("invalid")}function D_(i,s){return i<<17|s<<2}function Po(i){return i>>17&32767}function b_(i){return 2|i}function Oa(i){return(131068&i)>>2}function Bf(i,s){return-131069&i|s<<2}function Ng(i){return 1|i}function Wf(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const d=a[c],f=a[c+1];if(-1!==f){const _=i.data[f];sa(d),_.contentQueries(2,s[f],f)}}}function wl(i,s,a,c,d,f,_,I,E,T,R){const k=s.blueprint.slice();return k[0]=d,k[2]=76|c,(null!==R||i&&1024&i[2])&&(k[2]|=1024),ru(k),k[3]=k[15]=i,k[8]=a,k[10]=_||i&&i[10],k[11]=I||i&&i[11],k[12]=E||i&&i[12]||null,k[9]=T||i&&i[9]||null,k[6]=f,k[20]=function ll(){return Mf++}(),k[21]=R,k[16]=2==s.type?i[16]:k,k}function ka(i,s,a,c,d){let f=i.data[s];if(null===f)f=function Fg(i,s,a,c,d){const f=au(),_=ea(),E=i.data[s]=function Kb(i,s,a,c,d,f){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,a,s,c,d);return null===i.firstChild&&(i.firstChild=E),null!==f&&(_?null==f.child&&null!==E.parent&&(f.child=E):null===f.next&&(f.next=E)),E}(i,s,a,c,d),function Yp(){return St.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=c,f.attrs=d;const _=function Eo(){const i=St.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return ci(f,!0),f}function Fo(i,s,a,c){if(0===a)return-1;const d=s.length;for(let f=0;f<a;f++)s.push(c),i.blueprint.push(c),i.data.push(null);return d}function Lg(i,s,a){lu(s);try{const c=i.viewQuery;null!==c&&B_(1,c,a);const d=i.template;null!==d&&G0(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Wf(i,s),i.staticViewQueries&&B_(2,i.viewQuery,a);const f=i.components;null!==f&&function H0(i,s){for(let a=0;a<s.length;a++)iC(i,s[a])}(s,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,zs()}}function Vg(i,s,a,c){const d=s[2];if(128!=(128&d)){lu(s);try{ru(s),function Pc(i){return St.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&G0(i,s,a,2,c);const _=3==(3&d);if(_){const T=i.preOrderCheckHooks;null!==T&&Ws(s,T,null)}else{const T=i.preOrderHooks;null!==T&&Do(s,T,0,null),vd(s,0)}if(function rC(i){for(let s=vg(i);null!==s;s=a_(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const d=a[c],f=d[3];0==(512&d[2])&&Tn(f,1),d[2]|=512}}}(s),function nC(i){for(let s=vg(i);null!==s;s=a_(s))for(let a=10;a<s.length;a++){const c=s[a],d=c[1];Hs(c)&&Vg(d,c,d.template,c[8])}}(s),null!==i.contentQueries&&Wf(i,s),_){const T=i.contentCheckHooks;null!==T&&Ws(s,T)}else{const T=i.contentHooks;null!==T&&Do(s,T,1),vd(s,1)}!function zb(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)qr(~d);else{const f=d,_=a[++c],I=a[++c];Qp(_,f),I(2,s[f])}}}finally{qr(-1)}}(i,s);const I=i.components;null!==I&&function $0(i,s){for(let a=0;a<s.length;a++)$g(i,s[a])}(s,I);const E=i.viewQuery;if(null!==E&&B_(2,E,c),_){const T=i.viewCheckHooks;null!==T&&Ws(s,T)}else{const T=i.viewHooks;null!==T&&Do(s,T,2),vd(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,Tn(s[3],-1))}finally{zs()}}}function G0(i,s,a,c,d){const f=Jn(),_=2&c;try{qr(-1),_&&s.length>22&&_0(i,s,22,!1),a(c,d)}finally{qr(f)}}function R_(i,s,a){!Ki()||(function Xb(i,s,a,c){const d=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||Ys(a,s),hn(c,s);const _=a.initialInputs;for(let I=d;I<f;I++){const E=i.data[I],T=Er(E);T&&tC(s,a,E);const R=Yi(s,i,I,a);hn(R,s),null!==_&&Bg(0,I-d,R,E,0,_),T&&(Wt(a.index,s)[8]=R)}}(i,s,a,Or(a,s)),128==(128&a.flags)&&function Jb(i,s,a){const c=a.directiveStart,d=a.directiveEnd,f=a.index,_=function Fc(){return St.lFrame.currentDirectiveIndex}();try{qr(f);for(let I=c;I<d;I++){const E=i.data[I],T=s[I];uu(I),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&Q0(E,T)}}finally{qr(-1),uu(_)}}(i,s,a))}function N_(i,s,a=Or){const c=s.localNames;if(null!==c){let d=s.index+1;for(let f=0;f<c.length;f+=2){const _=c[f+1],I=-1===_?a(s,i):i[_];i[d++]=I}}}function Kf(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=O_(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function O_(i,s,a,c,d,f,_,I,E,T){const R=22+c,k=R+d,H=function qb(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:Vt);return a}(R,k),X="function"==typeof T?T():T;return H[1]={type:i,blueprint:H,template:a,queries:null,viewQuery:I,declTNode:s,data:H.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:E,consts:X,incompleteFirstPass:!1}}function q0(i,s,a,c){const d=Gg(s);null===a?d.push(c):(d.push(a),i.firstCreatePass&&zg(i).push(c,d.length-1))}function W0(i,s,a){for(let c in i)if(i.hasOwnProperty(c)){const d=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(s,d):a[c]=[s,d]}return a}function k_(i,s){const c=s.directiveEnd,d=i.data,f=s.attrs,_=[];let I=null,E=null;for(let T=s.directiveStart;T<c;T++){const R=d[T],k=R.inputs,H=null===f||g_(s)?null:nI(k,f);_.push(H),I=W0(k,T,I),E=W0(R.outputs,T,E)}null!==I&&(I.hasOwnProperty("class")&&(s.flags|=16),I.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=I,s.outputs=E}function P_(i,s){const a=Wt(s,i);16&a[2]||(a[2]|=32)}function F_(i,s,a,c){let d=!1;if(Ki()){const f=function X0(i,s,a){const c=i.directiveRegistry;let d=null;if(c)for(let f=0;f<c.length;f++){const _=c[f];Sg(a,_.selectors,!1)&&(d||(d=[]),bs(Ys(a,s),i,_.type),Er(_)?(Ug(i,a),d.unshift(_)):d.push(_))}return d}(i,s,a),_=null===c?null:{"":-1};if(null!==f){d=!0,eC(a,i.data.length,f.length);for(let R=0;R<f.length;R++){const k=f[R];k.providersResolver&&k.providersResolver(k)}let I=!1,E=!1,T=Fo(i,s,f.length,null);for(let R=0;R<f.length;R++){const k=f[R];a.mergedAttrs=oa(a.mergedAttrs,k.hostAttrs),tI(i,a,s,T,k),eI(T,k,_),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const H=k.type.prototype;!I&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),I=!0),!E&&(H.ngOnChanges||H.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),T++}k_(i,a)}_&&function J0(i,s,a){if(s){const c=i.localNames=[];for(let d=0;d<s.length;d+=2){const f=a[s[d+1]];if(null==f)throw new we(-301,!1);c.push(s[d],f)}}}(a,c,_)}return a.mergedAttrs=oa(a.mergedAttrs,a.attrs),d}function Y0(i,s,a,c,d,f){const _=f.hostBindings;if(_){let I=i.hostBindingOpCodes;null===I&&(I=i.hostBindingOpCodes=[]);const E=~s.index;(function Qb(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(I)!=E&&I.push(E),I.push(c,d,_)}}function Q0(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Ug(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function eI(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;Er(s)&&(a[""]=i)}}function eC(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function tI(i,s,a,c,d){i.data[c]=d;const f=d.factory||(d.factory=xi(d.type)),_=new Ds(f,Er(d),_l);i.blueprint[c]=_,a[c]=_,Y0(i,s,0,c,Fo(i,a,d.hostVars,Vt),d)}function tC(i,s,a){const c=Or(s,i),d=Kf(a),f=i[10],_=Hg(i,wl(i,d,null,a.onPush?32:16,c,s,f,f.createRenderer(c,a),null,null,null));i[s.index]=_}function Lo(i,s,a,c,d,f){const _=Or(i,s);!function L_(i,s,a,c,d,f,_){if(null==f)i.removeAttribute(s,d,a);else{const I=null==_?me(f):_(f,c||"",d);i.setAttribute(s,d,I,a)}}(s[11],_,f,i.value,a,c,d)}function Bg(i,s,a,c,d,f){const _=f[s];if(null!==_){const I=c.setInput;for(let E=0;E<_.length;){const T=_[E++],R=_[E++],k=_[E++];null!==I?c.setInput(a,k,T,R):a[R]=k}}}function nI(i,s){let a=null,c=0;for(;c<s.length;){const d=s[c];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],s[c+1])),c+=2}else c+=2;else c+=4}return a}function jg(i,s,a,c){return new Array(i,!0,!1,s,null,0,c,a,null,null)}function $g(i,s){const a=Wt(s,i);if(Hs(a)){const c=a[1];48&a[2]?Vg(c,a,c.template,a[8]):a[5]>0&&V_(a)}}function V_(i){for(let c=vg(i);null!==c;c=a_(c))for(let d=10;d<c.length;d++){const f=c[d];if(Hs(f))if(512&f[2]){const _=f[1];Vg(_,f,_.template,f[8])}else f[5]>0&&V_(f)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const d=Wt(a[c],i);Hs(d)&&d[5]>0&&V_(d)}}function iC(i,s){const a=Wt(s,i),c=a[1];(function sC(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),Lg(c,a,a[8])}function Hg(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function U_(i){for(;i;){i[2]|=32;const s=Nf(i);if(Kh(i)&&!s)return i;i=s}return null}function Zf(i,s,a,c=!0){const d=s[10];d.begin&&d.begin();try{Vg(i,s,i.template,a)}catch(_){throw c&&sI(s,_),_}finally{d.end&&d.end()}}function B_(i,s,a){sa(0),s(i,a)}function Gg(i){return i[7]||(i[7]=[])}function zg(i){return i.cleanup||(i.cleanup=[])}function sI(i,s){const a=i[9],c=a?a.get(Af,null):null;c&&c.handleError(s)}function qg(i,s,a,c,d){for(let f=0;f<a.length;){const _=a[f++],I=a[f++],E=s[_],T=i.data[_];null!==T.setInput?T.setInput(E,d,c,I):E[I]=d}}function j_(i,s,a){let c=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==s)for(let _=0;_<s.length;_++){const I=s[_];"number"==typeof I?f=I:1==f?d=he(d,I):2==f&&(c=he(c,I+": "+s[++_]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function Wg(i,s,a,c,d=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&c.push(xn(f)),Nr(f))for(let I=10;I<f.length;I++){const E=f[I],T=E[1].firstChild;null!==T&&Wg(E[1],E,T,c)}const _=a.type;if(8&_)Wg(i,s,a.child,c);else if(32&_){const I=s0(a,s);let E;for(;E=I();)c.push(E)}else if(16&_){const I=zu(s,a);if(Array.isArray(I))c.push(...I);else{const E=Nf(s[16]);Wg(E[1],E,I,c,!0)}}a=d?a.projectionNext:a.next}return c}class Il{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Wg(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Nr(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(Zd(s,c),Oo(a,c))}this._attachedToViewContainer=!1}Yd(this._lView[1],this._lView)}onDestroy(s){q0(this._lView[1],this._lView,null,s)}markForCheck(){U_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Zf(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new we(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function pl(i,s){Lf(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new we(902,!1);this._appRef=s}}class oI extends Il{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Zf(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class ih extends ju{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Y(s);return new El(a,this.ngModule)}}function aC(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class sh{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){const d=this.injector.get(s,mt,c);return d!==mt||a===mt?d:this.parentInjector.get(s,a,c)}}class El extends Hd{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function xg(i){return i.map(yl).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return aC(this.componentDef.inputs)}get outputs(){return aC(this.componentDef.outputs)}create(s,a,c,d){let f=(d=d||this.ngModule)instanceof Xr?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const _=f?new sh(s,f):s,I=_.get(S,null);if(null===I)throw new we(407,!1);const E=_.get(ae,null),T=I.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",k=c?function Wb(i,s,a){return i.selectRootElement(s,a===it.ShadowDom)}(T,c,this.componentDef.encapsulation):zt(I.createRenderer(null,this.componentDef),R,function aI(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(R)),H=this.componentDef.onPush?288:272,X=O_(0,null,null,1,0,null,null,null,null,null),ye=wl(null,X,null,H,null,null,I,T,E,_,null);let Pe,Ge;lu(ye);try{const Je=function cC(i,s,a,c,d,f){const _=a[1];a[22]=i;const E=ka(_,22,2,"#host",null),T=E.mergedAttrs=s.hostAttrs;null!==T&&(j_(E,T,!0),null!==i&&(To(d,i,T),null!==E.classes&&Tg(d,i,E.classes),null!==E.styles&&f_(d,i,E.styles)));const R=c.createRenderer(i,s),k=wl(a,Kf(s),null,s.onPush?32:16,a[22],E,c,R,f||null,null,null);return _.firstCreatePass&&(bs(Ys(E,a),_,s.type),Ug(_,E),eC(E,a.length,1)),Hg(a,k),a[22]=k}(k,this.componentDef,ye,I,T);if(k)if(c)To(T,k,["ng-version",Ze.full]);else{const{attrs:pt,classes:Te}=function m0(i){const s=[],a=[];let c=1,d=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===d?""!==f&&s.push(f,i[++c]):8===d&&a.push(f);else{if(!Di(d))break;d=f}c++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);pt&&To(T,k,pt),Te&&Te.length>0&&Tg(T,k,Te.join(" "))}if(Ge=Io(X,22),void 0!==a){const pt=Ge.projection=[];for(let Te=0;Te<this.ngContentSelectors.length;Te++){const Ct=a[Te];pt.push(null!=Ct?Array.from(Ct):null)}}Pe=function lC(i,s,a,c){const d=a[1],f=function Z0(i,s,a){const c=Mn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),tI(i,c,s,Fo(i,s,1,null),a),k_(i,c));const d=Yi(s,i,c.directiveStart,c);hn(d,s);const f=Or(c,s);return f&&hn(f,s),d}(d,a,s);if(i[8]=a[8]=f,null!==c)for(const I of c)I(f,s);if(s.contentQueries){const I=Mn();s.contentQueries(1,f,I.directiveStart)}const _=Mn();return!d.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(qr(_.index),Y0(a[1],_,0,_.directiveStart,_.directiveEnd,s),Q0(s,f)),f}(Je,this.componentDef,ye,[dC]),Lg(X,ye,null)}finally{zs()}return new uI(this.componentType,Pe,y(Ge,ye),ye,Ge)}}class uI extends class Tf{}{constructor(s,a,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new oI(d),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[s])){const f=this._rootLView;qg(f[1],f,d,s,a),P_(f,this._tNode.index)}}get injector(){return new Xs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function dC(){const i=Mn();fu(Ce()[1],i)}function H_(i){let s=function $_(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let d;if(Er(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new we(903,!1);d=s.\u0275dir}if(d){if(a){c.push(d);const _=i;_.inputs=oh(i.inputs),_.declaredInputs=oh(i.declaredInputs),_.outputs=oh(i.outputs);const I=d.hostBindings;I&&hC(i,I);const E=d.viewQuery,T=d.contentQueries;if(E&&yx(i,E),T&&lI(i,T),ce(i.inputs,d.inputs),ce(i.declaredInputs,d.declaredInputs),ce(i.outputs,d.outputs),Er(d)&&d.data.animation){const R=i.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let _=0;_<f.length;_++){const I=f[_];I&&I.ngInherit&&I(i),I===H_&&(a=!1)}}s=Object.getPrototypeOf(s)}!function mx(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=s+=d.hostVars,d.hostAttrs=oa(d.hostAttrs,a=oa(a,d.hostAttrs))}}(c)}function oh(i){return i===Hr?{}:i===At?[]:i}function yx(i,s){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{s(c,d),a(c,d)}:s}function lI(i,s){const a=i.contentQueries;i.contentQueries=a?(c,d,f)=>{s(c,d,f),a(c,d,f)}:s}function hC(i,s){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{s(c,d),a(c,d)}:s}let Kg=null;function Dl(){if(!Kg){const i=on.Symbol;if(i&&i.iterator)Kg=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Kg=c)}}}return Kg}function Yf(i){return!!fI(i)&&(Array.isArray(i)||!(i instanceof Map)&&Dl()in i)}function fI(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function di(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Sn(i,s,a,c){const d=Ce();return di(d,Gs(),s)&&(Gt(),Lo(_n(),d,i,s,a,c)),Sn}function Qg(i,s,a,c,d,f,_,I){const E=Ce(),T=Gt(),R=i+22,k=T.firstCreatePass?function yC(i,s,a,c,d,f,_,I,E){const T=s.consts,R=ka(s,i,4,_||null,vi(T,I));F_(s,a,R,vi(T,E)),fu(s,R);const k=R.tViews=O_(2,R,c,d,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,R),k.queries=s.queries.embeddedTView(R)),R}(R,T,E,s,a,c,d,f,_):T.data[R];ci(k,!1);const H=E[11].createComment("");ml(T,E,H,k),hn(H,E),Hg(E,E[R]=jg(H,E,H,k)),bc(k)&&R_(T,E,k),null!=_&&N_(E,k,I)}function G_(i,s,a){const c=Ce();return di(c,Gs(),s)&&function Li(i,s,a,c,d,f,_,I){const E=Or(s,a);let R,T=s.inputs;!I&&null!=T&&(R=T[c])?(qg(i,a,R,c,d),Yo(s)&&P_(a,s.index)):3&s.type&&(c=function Zb(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=_?_(d,s.value||"",c):d,f.setProperty(E,c,d))}(Gt(),_n(),c,i,s,c[11],a,!1),G_}function Lr(i,s,a,c,d){const _=d?"class":"style";qg(i,a,s.inputs[_],_,c)}function yr(i,s,a,c){const d=Ce(),f=Gt(),_=22+i,I=d[11],E=d[_]=zt(I,s,function hu(){return St.lFrame.currentNamespace}()),T=f.firstCreatePass?function Xg(i,s,a,c,d,f,_){const I=s.consts,T=ka(s,i,2,d,vi(I,f));return F_(s,a,T,vi(I,_)),null!==T.attrs&&j_(T,T.attrs,!1),null!==T.mergedAttrs&&j_(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(_,f,d,0,s,a,c):f.data[_];ci(T,!0);const R=T.mergedAttrs;null!==R&&To(I,E,R);const k=T.classes;null!==k&&Tg(I,E,k);const H=T.styles;return null!==H&&f_(I,E,H),64!=(64&T.flags)&&ml(f,d,E,T),0===function su(){return St.lFrame.elementDepthCount}()&&hn(E,d),function ou(){St.lFrame.elementDepthCount++}(),bc(T)&&(R_(f,d,T),function z0(i,s,a){if(Ya(s)){const d=s.directiveEnd;for(let f=s.directiveStart;f<d;f++){const _=i.data[f];_.contentQueries&&_.contentQueries(1,a[f],f)}}}(f,T,d)),null!==c&&N_(d,T),yr}function co(){let i=Mn();ea()?function ta(){St.lFrame.isParent=!1}():(i=i.parent,ci(i,!1));const s=i;!function xc(){St.lFrame.elementDepthCount--}();const a=Gt();return a.firstCreatePass&&(fu(a,i),Ya(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function mu(i){return 0!=(16&i.flags)}(s)&&Lr(a,s,Ce(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Id(i){return 0!=(32&i.flags)}(s)&&Lr(a,s,Ce(),s.stylesWithoutHost,!1),co}function z_(i,s,a,c){return yr(i,s,a,c),co(),z_}function ch(i){return!!i&&"function"==typeof i.then}function q_(i){return!!i&&"function"==typeof i.subscribe}const em=q_;function lh(i,s,a,c){const d=Ce(),f=Gt(),_=Mn();return function mI(i,s,a,c,d,f,_,I){const E=bc(c),R=i.firstCreatePass&&zg(i),k=s[8],H=Gg(s);let X=!0;if(3&c.type||I){const Ge=Or(c,s),Je=I?I(Ge):Ge,pt=H.length,Te=I?un=>I(xn(un[c.index])):c.index;let Ct=null;if(!I&&E&&(Ct=function W_(i,s,a,c){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const _=d[f];if(_===a&&d[f+1]===c){const I=s[7],E=d[f+2];return I.length>E?I[E]:null}"string"==typeof _&&(f+=2)}return null}(i,s,d,c.index)),null!==Ct)(Ct.__ngLastListenerFn__||Ct).__ngNextListenerFn__=f,Ct.__ngLastListenerFn__=f,X=!1;else{f=Sl(c,s,k,f,!1);const un=a.listen(Je,d,f);H.push(f,un),R&&R.push(d,Te,pt,pt+1)}}else f=Sl(c,s,k,f,!1);const ye=c.outputs;let Pe;if(X&&null!==ye&&(Pe=ye[d])){const Ge=Pe.length;if(Ge)for(let Je=0;Je<Ge;Je+=2){const Kt=s[Pe[Je]][Pe[Je+1]].subscribe(f),fc=H.length;H.push(f,Kt),R&&R.push(d,c.index,fc,-(fc+1))}}}(f,d,d[11],_,i,s,0,c),lh}function yI(i,s,a,c){try{return!1!==a(c)}catch(d){return sI(i,d),!1}}function Sl(i,s,a,c,d){return function f(_){if(_===Function)return c;U_(2&i.flags?Wt(i.index,s):s);let E=yI(s,0,c,_),T=f.__ngNextListenerFn__;for(;T;)E=yI(s,0,T,_)&&E,T=T.__ngNextListenerFn__;return d&&!1===E&&(_.preventDefault(),_.returnValue=!1),E}}function K_(i=1){return function qs(i){return(St.lFrame.contextLView=function du(i,s){for(;i>0;)s=s[15],i--;return s}(i,St.lFrame.contextLView))[8]}(i)}function EI(i,s,a,c,d){const f=i[a+1],_=null===s;let I=c?Po(f):Oa(f),E=!1;for(;0!==I&&(!1===E||_);){const R=i[I+1];DC(i[I],s)&&(E=!0,i[I+1]=c?Ng(R):b_(R)),I=c?Po(R):Oa(R)}E&&(i[a+1]=c?b_(f):Ng(f))}function DC(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Xi(i,s)>=0}function dm(i,s){return function vn(i,s,a,c){const d=Ce(),f=Gt(),_=function Zi(i){const s=St.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function hm(i,s,a,c){const d=i.data;if(null===d[a+1]){const f=d[Jn()],_=function rp(i,s){return s>=i.expandoStartIndex}(i,a);(function fm(i,s){return 0!=(i.flags&(s?16:32))})(f,c)&&null===s&&!_&&(s=!1),s=function TC(i,s,a,c){const d=function ia(i){const s=St.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=c?s.residualClasses:s.residualStyles;if(null===d)0===(c?s.classBindings:s.styleBindings)&&(a=hh(a=iv(null,i,s,a,c),s.attrs,c),f=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==d)if(a=iv(d,i,s,a,c),null===f){let E=function SC(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==Oa(c))return i[Po(c)]}(i,s,c);void 0!==E&&Array.isArray(E)&&(E=iv(null,i,s,E[1],c),E=hh(E,s.attrs,c),function TI(i,s,a,c){i[Po(a?s.classBindings:s.styleBindings)]=c}(i,s,c,E))}else f=function AC(i,s,a){let c;const d=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<d;f++)c=hh(c,i[f].hostAttrs,a);return hh(c,s.attrs,a)}(i,s,c)}return void 0!==f&&(c?s.residualClasses=f:s.residualStyles=f),a}(d,f,s,c),function EC(i,s,a,c,d,f){let _=f?s.classBindings:s.styleBindings,I=Po(_),E=Oa(_);i[c]=a;let R,T=!1;if(Array.isArray(a)){const k=a;R=k[1],(null===R||Xi(k,R)>0)&&(T=!0)}else R=a;if(d)if(0!==E){const H=Po(i[I+1]);i[c+1]=D_(H,I),0!==H&&(i[H+1]=Bf(i[H+1],c)),i[I+1]=function Bb(i,s){return 131071&i|s<<17}(i[I+1],c)}else i[c+1]=D_(I,0),0!==I&&(i[I+1]=Bf(i[I+1],c)),I=c;else i[c+1]=D_(E,0),0===I?I=c:i[E+1]=Bf(i[E+1],c),E=c;T&&(i[c+1]=b_(i[c+1])),EI(i,R,c,!0),EI(i,R,c,!1),function np(i,s,a,c,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&Xi(f,s)>=0&&(a[c+1]=Ng(a[c+1]))}(s,R,i,c,f),_=D_(I,E),f?s.classBindings=_:s.styleBindings=_}(d,f,s,a,_,c)}}(f,i,_,c),s!==Vt&&di(d,_,s)&&function av(i,s,a,c,d,f,_,I){if(!(3&s.type))return;const E=i.data,T=E[I+1];Al(function os(i){return 1==(1&i)}(T)?AI(E,s,a,d,Oa(T),_):void 0)||(Al(f)||function Rg(i){return 2==(2&i)}(T)&&(f=AI(E,null,a,d,I,_)),function Xd(i,s,a,c,d){if(s)d?i.addClass(a,c):i.removeClass(a,c);else{let f=-1===c.indexOf("-")?void 0:oo.DashCase;null==d?i.removeStyle(a,c,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=oo.Important),i.setStyle(a,c,d,f))}}(c,_,ui(Jn(),a),d,f))}(f,f.data[Jn()],d,d[11],i,d[_+1]=function uv(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=de(ns(i)))),i}(s,a),c,_)}(i,s,null,!0),dm}function iv(i,s,a,c,d){let f=null;const _=a.directiveEnd;let I=a.directiveStylingLast;for(-1===I?I=a.directiveStart:I++;I<_&&(f=s[I],c=hh(c,f.hostAttrs,d),f!==i);)I++;return null!==i&&(a.directiveStylingLast=I),c}function hh(i,s,a){const c=a?1:2;let d=-1;if(null!==s)for(let f=0;f<s.length;f++){const _=s[f];"number"==typeof _?d=_:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),kr(i,_,!!a||s[++f]))}return void 0===i?null:i}function AI(i,s,a,c,d,f){const _=null===s;let I;for(;d>0;){const E=i[d],T=Array.isArray(E),R=T?E[1]:E,k=null===R;let H=a[d+1];H===Vt&&(H=k?At:void 0);let X=k?ma(H,c):R===c?H:void 0;if(T&&!Al(X)&&(X=ma(E,c)),Al(X)&&(I=X,_))return I;const ye=i[d+1];d=_?Po(ye):Oa(ye)}if(null!==s){let E=f?s.residualClasses:s.residualStyles;null!=E&&(I=ma(E,c))}return I}function Al(i){return void 0!==i}function cv(i,s=""){const a=Ce(),c=Gt(),d=i+22,f=c.firstCreatePass?ka(c,d,1,s,null):c.data[d],_=a[d]=function wg(i,s){return i.createText(s)}(a[11],s);ml(c,a,_,f),ci(f,!1)}function ec(i,s,a){const c=Ce(),d=function ah(i,s,a,c){return di(i,Gs(),a)?s+me(a)+c:Vt}(c,i,s,a);return d!==Vt&&function Qu(i,s,a){const c=ui(s,i);!function Of(i,s,a){i.setValue(s,a)}(i[11],c,a)}(c,Jn(),d),ec}const Rl=void 0;var jI=["en",[["a","p"],["AM","PM"],Rl],[["AM","PM"],Rl,Rl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Rl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Rl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Rl,"{1} 'at' {0}",Rl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function lp(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Fa={};function La(i){const s=function RC(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=GI(s);if(a)return a;const c=s.split("-")[0];if(a=GI(c),a)return a;if("en"===c)return jI;throw new we(701,!1)}function HI(i){return La(i)[Et.PluralCase]}function GI(i){return i in Fa||(Fa[i]=on.ng&&on.ng.common&&on.ng.common.locales&&on.ng.common.locales[i]),Fa[i]}var Et=(()=>((Et=Et||{})[Et.LocaleId=0]="LocaleId",Et[Et.DayPeriodsFormat=1]="DayPeriodsFormat",Et[Et.DayPeriodsStandalone=2]="DayPeriodsStandalone",Et[Et.DaysFormat=3]="DaysFormat",Et[Et.DaysStandalone=4]="DaysStandalone",Et[Et.MonthsFormat=5]="MonthsFormat",Et[Et.MonthsStandalone=6]="MonthsStandalone",Et[Et.Eras=7]="Eras",Et[Et.FirstDayOfWeek=8]="FirstDayOfWeek",Et[Et.WeekendRange=9]="WeekendRange",Et[Et.DateFormat=10]="DateFormat",Et[Et.TimeFormat=11]="TimeFormat",Et[Et.DateTimeFormat=12]="DateTimeFormat",Et[Et.NumberSymbols=13]="NumberSymbols",Et[Et.NumberFormats=14]="NumberFormats",Et[Et.CurrencyCode=15]="CurrencyCode",Et[Et.CurrencySymbol=16]="CurrencySymbol",Et[Et.CurrencyName=17]="CurrencyName",Et[Et.Currencies=18]="Currencies",Et[Et.Directionality=19]="Directionality",Et[Et.PluralCase=20]="PluralCase",Et[Et.ExtraData=21]="ExtraData",Et))();const Ua="en-US";let ph=Ua;function vh(i,s,a,c,d){if(i=K(i),Array.isArray(i))for(let f=0;f<i.length;f++)vh(i[f],s,a,c,d);else{const f=Gt(),_=Ce();let I=Rs(i)?i:K(i.provide),E=bf(i);const T=Mn(),R=1048575&T.providerIndexes,k=T.directiveStart,H=T.providerIndexes>>20;if(Rs(i)||!i.multi){const X=new Ds(E,d,_l),ye=_r(I,s,d?R:R+H,k);-1===ye?(bs(Ys(T,_),f,I),Mv(f,i,s.length),s.push(I),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(X),_.push(X)):(a[ye]=X,_[ye]=X)}else{const X=_r(I,s,R+H,k),ye=_r(I,s,R,R+H),Pe=X>=0&&a[X],Ge=ye>=0&&a[ye];if(d&&!Ge||!d&&!Pe){bs(Ys(T,_),f,I);const Je=function UC(i,s,a,c,d){const f=new Ds(i,a,_l);return f.multi=[],f.index=s,f.componentProviders=0,Rv(f,d,c&&!a),f}(d?rc:wh,a.length,d,c,E);!d&&Ge&&(a[ye].providerFactory=Je),Mv(f,i,s.length,0),s.push(I),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(Je),_.push(Je)}else Mv(f,i,X>-1?X:ye,Rv(a[d?ye:X],E,!d&&c));!d&&c&&Ge&&a[ye].componentProviders++}}}function Mv(i,s,a,c){const d=Rs(s),f=function qy(i){return!!i.useClass}(s);if(d||f){const E=(f?K(s.useClass):s).prototype.ngOnDestroy;if(E){const T=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const R=T.indexOf(a);-1===R?T.push(a,[c,E]):T[R+1].push(c,E)}else T.push(a,E)}}}function Rv(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function _r(i,s,a,c){for(let d=a;d<c;d++)if(s[d]===i)return d;return-1}function wh(i,s,a,c){return pp(this.multi,[])}function rc(i,s,a,c){const d=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,I=Yi(a,a[1],this.providerFactory.index,c);f=I.slice(0,_),pp(d,f);for(let E=_;E<I.length;E++)f.push(I[E])}else f=[],pp(d,f);return f}function pp(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function Ne(i,s=[]){return a=>{a.providersResolver=(c,d)=>function VC(i,s,a){const c=Gt();if(c.firstCreatePass){const d=Er(i);vh(a,c.data,c.blueprint,d,!0),vh(s,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,s)}}class An{}class ic{}function Nv(i,s){return new bt(i,s??null)}class bt extends An{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ih(this);const c=dn(s);this._bootstrapComponents=ss(c.bootstrap),this._r3Injector=y_(s,a,[{provide:An,useValue:this},{provide:ju,useValue:this.componentFactoryResolver}],de(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Ov extends ic{constructor(s){super(),this.moduleType=s}create(s){return new bt(this.moduleType,s)}}class qe extends An{constructor(s,a,c){super(),this.componentFactoryResolver=new ih(this),this.instance=null;const d=new Ef([...s,{provide:An,useValue:this},{provide:ju,useValue:this.componentFactoryResolver}],a||Bd(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function ue(i,s,a=null){return new qe(i,s,a).injector}let Re=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=Ld(0,a.type),d=c.length>0?ue([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Jt({token:i,providedIn:"environment",factory:()=>new i(On(Xr))}),i})();function vr(i){i.getStandaloneInjector=s=>s.get(Re).getOrCreateStandaloneInjector(i)}function Bm(i){return s=>{setTimeout(i,void 0,s)}}const Ps=class Vl extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let d=s,f=a||(()=>null),_=c;if(s&&"object"==typeof s){const E=s;d=E.next?.bind(E),f=E.error?.bind(E),_=E.complete?.bind(E)}this.__isAsync&&(f=Bm(f),d&&(d=Bm(d)),_&&(_=Bm(_)));const I=super.subscribe({next:d,error:f,complete:_});return s instanceof J.w0&&s.add(I),I}};function WC(){return this._results[Dl()]()}class Uv{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Dl(),c=Uv.prototype;c[a]||(c[a]=WC)}get changes(){return this._changes||(this._changes=new Ps)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const d=Kr(s);(this._changesDetected=!function Cu(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],f=s[c];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Vr=(()=>{class i{}return i.__NG_ELEMENT_ID__=kE,i})();const OE=Vr,Ul=class extends OE{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s,a){const c=this._declarationTContainer.tViews,d=wl(this._declarationLView,c,s,16,null,c.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(d[19]=_.createEmbeddedView(c)),Lg(c,d,s),new Il(d)}};function kE(){return Fn(Mn(),Ce())}function Fn(i,s){return 4&i.type?new Ul(s,i,y(i,s)):null}let Bl=(()=>{class i{}return i.__NG_ELEMENT_ID__=ni,i})();function ni(){return PE(Mn(),Ce())}const wn=Bl,Bv=class extends wn{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return y(this._hostTNode,this._hostLView)}get injector(){return new Xs(this._hostTNode,this._hostLView)}get parentInjector(){const s=wu(this._hostTNode,this._hostLView);if(Dd(s)){const a=ua(s,this._hostLView),c=sr(s);return new Xs(a[1].data[c+8],a)}return new Xs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=jl(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){let d,f;"number"==typeof c?d=c:null!=c&&(d=c.index,f=c.injector);const _=s.createEmbeddedView(a||{},f);return this.insert(_,d),_}createComponent(s,a,c,d,f){const _=s&&!function Dr(i){return"function"==typeof i}(s);let I;if(_)I=a;else{const k=a||{};I=k.index,c=k.injector,d=k.projectableNodes,f=k.environmentInjector||k.ngModuleRef}const E=_?s:new El(Y(s)),T=c||this.parentInjector;if(!f&&null==E.ngModule){const H=(_?T:this.parentInjector).get(Xr,null);H&&(f=H)}const R=E.create(T,d,void 0,f);return this.insert(R.hostView,I),R}insert(s,a){const c=s._lView,d=c[1];if(function nu(i){return Nr(i[3])}(c)){const R=this.indexOf(s);if(-1!==R)this.detach(R);else{const k=c[3],H=new Bv(k,k[6],k[3]);H.detach(H.indexOf(s))}}const f=this._adjustIndex(a),_=this._lContainer;!function a0(i,s,a,c){const d=10+c,f=a.length;c>0&&(a[d-1][4]=s),c<f-10?(s[4]=a[d],Zc(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function c_(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const I=s[19];null!==I&&I.insertView(i),s[2]|=64}(d,c,_,f);const I=Ff(f,_),E=c[11],T=gl(E,_[7]);return null!==T&&function mb(i,s,a,c,d,f){c[0]=d,c[6]=s,Lf(i,c,a,1,d,f)}(d,_[6],E,c,T,I),s.attachToViewContainerRef(),Zc(Ci(_),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=jl(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=Zd(this._lContainer,a);c&&(Oo(Ci(this._lContainer),a),Yd(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=Zd(this._lContainer,a);return c&&null!=Oo(Ci(this._lContainer),a)?new Il(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function jl(i){return i[8]}function Ci(i){return i[8]||(i[8]=[])}function PE(i,s){let a;const c=s[i.index];if(Nr(c))a=c;else{let d;if(8&i.type)d=xn(c);else{const f=s[11];d=f.createComment("");const _=Or(i,s);Gu(f,gl(f,_),d,function wb(i,s){return i.nextSibling(s)}(f,_),!1)}s[i.index]=a=jg(c,s,d,i),Hg(s,a)}return new Bv(a,i,s)}class Un{constructor(s){this.queryList=s,this.matches=null}clone(){return new Un(this.queryList)}setDirty(){this.queryList.setDirty()}}class $a{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let f=0;f<c;f++){const _=a.getByIndex(f);d.push(this.queries[_.indexInDeclarationView].clone())}return new $a(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==cc(s,a).matches&&this.queries[a].setDirty()}}class jm{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class $m{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(s,d);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new $m(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Hl{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Hl(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(s,a,ZC(a,f)),this.matchTNodeWithReadOption(s,a,So(a,s,f,!1,!1))}else c===Vr?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,So(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===h||d===Bl||d===Vr&&4&a.type)this.addMatch(a.index,-2);else{const f=So(a,s,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function ZC(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function vp(i,s,a,c){return-1===a?function ac(i,s){return 11&i.type?y(i,s):4&i.type?Fn(i,s):null}(s,i):-2===a?function wp(i,s,a){return a===h?y(s,i):a===Vr?Fn(s,i):a===Bl?PE(s,i):void 0}(i,s,c):Yi(i,i[1],a,s)}function jv(i,s,a,c){const d=s[19].queries[c];if(null===d.matches){const f=i.data,_=a.matches,I=[];for(let E=0;E<_.length;E+=2){const T=_[E];I.push(T<0?null:vp(s,f[T],_[E+1],a.metadata.read))}d.matches=I}return d.matches}function jo(i,s,a,c){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const _=jv(i,s,d,a);for(let I=0;I<f.length;I+=2){const E=f[I];if(E>0)c.push(_[I/2]);else{const T=f[I+1],R=s[-E];for(let k=10;k<R.length;k++){const H=R[k];H[17]===H[3]&&jo(H[1],H,T,c)}if(null!==R[9]){const k=R[9];for(let H=0;H<k.length;H++){const X=k[H];jo(X[1],X,T,c)}}}}}return c}function Ip(i){const s=Ce(),a=Gt(),c=Lc();sa(c+1);const d=cc(a,c);if(i.dirty&&function tu(i){return 4==(4&i[2])}(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?jo(a,s,c,[]):jv(a,s,d,c);i.reset(f,p),i.notifyOnChanges()}return!0}return!1}function fo(i,s,a,c){const d=Gt();if(d.firstCreatePass){const f=Mn();(function zl(i,s,a){null===i.queries&&(i.queries=new $m),i.queries.track(new Hl(s,a))})(d,new jm(s,a,c),f.index),function Hv(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function $v(i,s,a){const c=new Uv(4==(4&a));q0(i,s,c,c.destroy),null===s[19]&&(s[19]=new $a),s[19].queries.push(new Un(c))}(d,Ce(),a)}function Dh(){return function uc(i,s){return i[19].queries[s].queryList}(Ce(),Lc())}function cc(i,s){return i.queries.getByIndex(s)}function Ha(...i){}const nw=new pn("Application Initializer");let Ho=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Ha,this.reject=Ha,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(ch(f))a.push(f);else if(em(f)){const _=new Promise((I,E)=>{f.subscribe({complete:I,error:E})});a.push(_)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(On(nw,8))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const rw=new pn("AppId",{providedIn:"root",factory:function Ql(){return`${Wm()}${Wm()}${Wm()}`}});function Wm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Rh=new pn("Platform Initializer"),uT=new pn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),WE=new pn("appBootstrapListener");let Km=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Zm=new pn("LocaleId",{providedIn:"root",factory:()=>b(Zm,Ke.Optional|Ke.SkipSelf)||function KE(){return typeof $localize<"u"&&$localize.locale||Ua}()}),bp=new pn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Ga{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let ZE=(()=>{class i{compileModuleSync(a){return new Ov(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=ss(dn(a).declarations).reduce((_,I)=>{const E=Y(I);return E&&_.push(new El(E)),_},[]);return new Ga(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const XE=(()=>Promise.resolve(0))();function Qm(i){typeof Zone>"u"?XE.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Fs{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ps(!1),this.onMicrotaskEmpty=new Ps(!1),this.onStable=new Ps(!1),this.onError=new Ps(!1),typeof Zone>"u")throw new we(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function lc(){let i=on.requestAnimationFrame,s=on.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function JE(i){const s=()=>{!function Tp(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(on,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Ls(i),i.isCheckStableRunning=!0,Xm(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Ls(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,f,_,I)=>{try{return sw(i),a.invokeTask(d,f,_,I)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),Oh(i)}},onInvoke:(a,c,d,f,_,I,E)=>{try{return sw(i),a.invoke(d,f,_,I,E)}finally{i.shouldCoalesceRunChangeDetection&&s(),Oh(i)}},onHasTask:(a,c,d,f)=>{a.hasTask(d,f),c===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Ls(i),Xm(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Fs.isInAngularZone())throw new we(909,!1)}static assertNotInAngularZone(){if(Fs.isInAngularZone())throw new we(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,d){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+d,s,Ui,Ha,Ha);try{return f.runTask(_,a,c)}finally{f.cancelTask(_)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const Ui={};function Xm(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Ls(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function sw(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Oh(i){i._nesting--,Xm(i)}class dT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ps,this.onMicrotaskEmpty=new Ps,this.onStable=new Ps,this.onError=new Ps}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,d){return s.apply(a,c)}}const eD=new pn(""),$t=new pn("");let Xl,hT=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Xl||(function Ap(i){Xl=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Fs.assertNotInAngularZone(),Qm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Qm(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(On(Fs),On(Sp),On($t))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})(),Sp=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Xl?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),po=null;const ow=new pn("AllowMultipleToken"),Jm=new pn("PlatformDestroyListeners");class gT{constructor(s,a){this.name=s,this.token=a}}function nD(i,s,a=[]){const c=`Platform: ${s}`,d=new pn(c);return(f=[])=>{let _=Jl();if(!_||_.injector.get(ow,!1)){const I=[...a,...f,{provide:d,useValue:!0}];i?i(I):function mT(i){if(po&&!po.get(ow,!1))throw new we(400,!1);po=i;const s=i.get(go);(function kh(i){const s=i.get(Rh,null);s&&s.forEach(a=>a())})(i)}(function ey(i=[],s){return Na.create({name:s,providers:[{provide:Ca,useValue:"platform"},{provide:Jm,useValue:new Set([()=>po=null])},...i]})}(I,c))}return function Br(i){const s=Jl();if(!s)throw new we(401,!1);return s}()}}function Jl(){return po?.get(go)??null}let go=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function aw(i,s){let a;return a="noop"===i?new dT:("zone.js"===i?void 0:i)||new Fs(s),a}(c?.ngZone,function ty(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:Fs,useValue:d}];return d.run(()=>{const _=Na.create({providers:f,parent:this.injector,name:a.moduleType.name}),I=a.create(_),E=I.injector.get(Af,null);if(!E)throw new we(402,!1);return d.runOutsideAngular(()=>{const T=d.onError.subscribe({next:R=>{E.handleError(R)}});I.onDestroy(()=>{Mp(this._modules,I),T.unsubscribe()})}),function Ph(i,s,a){try{const c=a();return ch(c)?c.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(E,d,()=>{const T=I.injector.get(Ho);return T.runInitializers(),T.donePromise.then(()=>(function zI(i){Ht(i,"Expected localeId to be defined"),"string"==typeof i&&(ph=i.toLowerCase().replace(/_/g,"-"))}(I.injector.get(Zm,Ua)||Ua),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,c=[]){const d=uw({},c);return function fT(i,s,a){const c=new Ov(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const c=a.injector.get(xp);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new we(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new we(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(Jm,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(On(Na))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function uw(i,s){return Array.isArray(s)?s.reduce(uw,i):{...i,...s}}let xp=(()=>{class i{constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),_=new O.y(I=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{Fs.assertNotInAngularZone(),Qm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{Fs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{E.unsubscribe(),T.unsubscribe()}});this.isStable=(0,se.T)(f,_.pipe((0,ie.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const d=a instanceof Hd;if(!this._injector.get(Ho).done)throw!d&&Yt(a),new we(405,false);let _;_=d?a:this._injector.get(ju).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const I=function tD(i){return i.isBoundToModule}(_)?void 0:this._injector.get(An),T=_.create(Na.NULL,[],c||_.selector,I),R=T.location.nativeElement,k=T.injector.get(eD,null);return k?.registerApplication(R),T.onDestroy(()=>{this.detachView(T.hostView),Mp(this.components,T),k?.unregisterApplication(R)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new we(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Mp(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(WE,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Mp(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new we(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(On(Fs),On(Xr),On(Af))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Mp(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Fh=!0,ny=!1;function IT(){return ny=!0,Fh}function iD(){if(ny)throw new Error("Cannot enable prod mode after platform setup.");Fh=!1}let aD=(()=>{class i{}return i.__NG_ELEMENT_ID__=DT,i})();function DT(i){return function bT(i,s,a){if(Yo(i)&&!a){const c=Wt(i.index,s);return new Il(c,c)}return 47&i.type?new Il(s[16],s):null}(Mn(),Ce(),16==(16&i))}class lD{constructor(){}supports(s){return Yf(s)}create(s){return new AT(s)}}const ST=(i,s)=>s;class AT{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||ST}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,d=0,f=null;for(;a||c;){const _=!c||a&&a.currentIndex<hw(c,d,f)?a:c,I=hw(_,d,f),E=_.currentIndex;if(_===c)d--,c=c._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{f||(f=[]);const T=I-d,R=E-d;if(T!=R){for(let H=0;H<T;H++){const X=H<f.length?f[H]:f[H]=0,ye=X+H;R<=ye&&ye<T&&(f[H]=X+1)}f[_.previousIndex]=R-T}}I!==E&&s(_,I,E)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Yf(s))throw new we(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,f,_,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let I=0;I<this.length;I++)f=s[I],_=this._trackByFn(I,f),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,f,_,I)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,_,I),c=!0),a=a._next}else d=0,function gC(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Dl()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,I=>{_=this._trackByFn(d,I),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,I,_,d)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,_,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,d){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,d)):s=this._addAfter(new xT(a,c),f,d),s}_verifyReinsertion(s,a,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?s=this._reinsertAfter(f,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,f=s._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new dD),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new dD),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class xT{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class MT{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class dD{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new MT,this.map.set(a,c)),c.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function hw(i,s,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+s+d}class hD{constructor(){}supports(s){return s instanceof Map||fI(s)}create(){return new fD}}class fD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||fI(s)))throw new we(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const f=d._prev,_=d._next;return f&&(f._next=_),_&&(_._prev=f),d._next=null,d._prev=null,d}const c=new pD(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class pD{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function gD(){return new kp([new lD])}let kp=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||gD()),deps:[[i,new _t,new Be]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new we(901,!1)}}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:gD}),i})();function sy(){return new Pp([new hD])}let Pp=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||sy()),deps:[[i,new _t,new Be]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new we(901,!1)}}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:sy}),i})();const mD=nD(null,"core",[]);let oy=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(On(xp))},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({}),i})();function ed(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(at,Se,P)=>{P.d(Se,{Z:()=>we});var g=P(2090),J=P(4859),O=P(9681),se=P(1877);class ie{constructor(me,fe){this._delegate=me,this.firebase=fe,(0,O._addComponent)(me,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(me,fe=O._DEFAULT_ENTRY_NAME){var Ye;this._delegate.checkDestroyed();const rt=this._delegate.container.getProvider(me);return!rt.isInitialized()&&"EXPLICIT"===(null===(Ye=rt.getComponent())||void 0===Ye?void 0:Ye.instantiationMode)&&rt.initialize(),rt.getImmediate({identifier:fe})}_removeServiceInstance(me,fe=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(fe)}_addComponent(me){(0,O._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,O._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ce=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function he(){const et=function de(et){const me={},fe={__esModule:!0,initializeApp:function Ae(je,U={}){const ge=O.initializeApp(je,U);if((0,g.r3)(me,ge.name))return me[ge.name];const z=new et(ge,fe);return me[ge.name]=z,z},app:rt,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ie(je){const U=je.name,ge=U.replace("-compat","");if(O._registerComponent(je)&&"PUBLIC"===je.type){const z=(Q=rt())=>{if("function"!=typeof Q[ge])throw ce.create("invalid-app-argument",{appName:U});return Q[ge]()};void 0!==je.serviceProps&&(0,g.ZB)(z,je.serviceProps),fe[ge]=z,et.prototype[ge]=function(...Q){return this._getService.bind(this,U).apply(this,je.multipleInstances?Q:[])}}return"PUBLIC"===je.type?fe[ge]:null},removeApp:function Ye(je){delete me[je]},useAsService:function Ue(je,U){return"serverAuth"===U?null:U},modularAPIs:O}};function rt(je){if(!(0,g.r3)(me,je=je||O._DEFAULT_ENTRY_NAME))throw ce.create("no-app",{appName:je});return me[je]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function _e(){return Object.keys(me).map(je=>me[je])}}),rt.App=et,fe}(ie);return et.INTERNAL=Object.assign(Object.assign({},et.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function me(fe){(0,g.ZB)(et,fe)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),et}(),j=new se.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const et=self.firebase.SDK_VERSION;et&&et.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const we=B;!function Me(et){(0,O.registerVersion)("@firebase/app-compat","0.1.38",et)}()},9681:(at,Se,P)=>{P.r(Se),P.d(Se,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Vs,_DEFAULT_ENTRY_NAME:()=>Ht,_addComponent:()=>Zt,_addOrOverwriteComponent:()=>Jt,_apps:()=>an,_clearComponents:()=>$i,_components:()=>mn,_getProvider:()=>Ot,_registerComponent:()=>xr,_removeServiceInstance:()=>cn,deleteApp:()=>Ko,getApp:()=>ii,getApps:()=>si,initializeApp:()=>yi,onLog:()=>ps,registerVersion:()=>Ir,setLogLevel:()=>Zn});var g=P(5861),J=P(4859),O=P(1877),se=P(2090),ie=P(8766);class le{constructor(be){this.container=be}getPlatformInfoString(){return this.container.getProviders().map(Qe=>{if(function ce(Xe){return"VERSION"===Xe.getComponent()?.type}(Qe)){const Dt=Qe.getImmediate();return`${Dt.library}/${Dt.version}`}return null}).filter(Qe=>Qe).join(" ")}}const de="@firebase/app",B=new O.Yd("@firebase/app"),Ht="[DEFAULT]",We={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},an=new Map,mn=new Map;function Zt(Xe,be){try{Xe.container.addComponent(be)}catch(Qe){B.debug(`Component ${be.name} failed to register with FirebaseApp ${Xe.name}`,Qe)}}function Jt(Xe,be){Xe.container.addOrOverwriteComponent(be)}function xr(Xe){const be=Xe.name;if(mn.has(be))return B.debug(`There were multiple attempts to register component ${be}.`),!1;mn.set(be,Xe);for(const Qe of an.values())Zt(Qe,Xe);return!0}function Ot(Xe,be){const Qe=Xe.container.getProvider("heartbeat").getImmediate({optional:!0});return Qe&&Qe.triggerHeartbeat(),Xe.container.getProvider(be)}function cn(Xe,be,Qe=Ht){Ot(Xe,be).clearInstance(Qe)}function $i(){mn.clear()}const Mr=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class $r{constructor(be,Qe,Dt){this._isDeleted=!1,this._options=Object.assign({},be),this._config=Object.assign({},Qe),this._name=Qe.name,this._automaticDataCollectionEnabled=Qe.automaticDataCollectionEnabled,this._container=Dt,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this.checkDestroyed(),this._automaticDataCollectionEnabled=be}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(be){this._isDeleted=be}checkDestroyed(){if(this.isDeleted)throw Mr.create("app-deleted",{appName:this._name})}}const Vs="9.13.0";function yi(Xe,be={}){let Qe=Xe;"object"!=typeof be&&(be={name:be});const Dt=Object.assign({name:Ht,automaticDataCollectionEnabled:!1},be),wt=Dt.name;if("string"!=typeof wt||!wt)throw Mr.create("bad-app-name",{appName:String(wt)});if(Qe||(Qe=(0,se.aH)()),!Qe)throw Mr.create("no-options");const Pt=an.get(wt);if(Pt){if((0,se.vZ)(Qe,Pt.options)&&(0,se.vZ)(Dt,Pt.config))return Pt;throw Mr.create("duplicate-app",{appName:wt})}const $=new J.H0(wt);for(const q of mn.values())$.addComponent(q);const L=new $r(Qe,Dt,$);return an.set(wt,L),L}function ii(Xe=Ht){const be=an.get(Xe);if(!be&&Xe===Ht)return yi();if(!be)throw Mr.create("no-app",{appName:Xe});return be}function si(){return Array.from(an.values())}function Ko(Xe){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,g.Z)(function*(Xe){const be=Xe.name;an.has(be)&&(an.delete(be),yield Promise.all(Xe.container.getProviders().map(Qe=>Qe.delete())),Xe.isDeleted=!0)})).apply(this,arguments)}function Ir(Xe,be,Qe){var Dt;let wt=null!==(Dt=We[Xe])&&void 0!==Dt?Dt:Xe;Qe&&(wt+=`-${Qe}`);const Pt=wt.match(/\s|\//),$=be.match(/\s|\//);if(Pt||$){const L=[`Unable to register library "${wt}" with version "${be}":`];return Pt&&L.push(`library name "${wt}" contains illegal characters (whitespace or "/")`),Pt&&$&&L.push("and"),$&&L.push(`version name "${be}" contains illegal characters (whitespace or "/")`),void B.warn(L.join(" "))}xr(new J.wA(`${wt}-version`,()=>({library:wt,version:be}),"VERSION"))}function ps(Xe,be){if(null!==Xe&&"function"!=typeof Xe)throw Mr.create("invalid-log-argument");(0,O.Am)(Xe,be)}function Zn(Xe){(0,O.Ub)(Xe)}const Ln="firebase-heartbeat-store";let Bn=null;function fn(){return Bn||(Bn=(0,ie.X3)("firebase-heartbeat-database",1,{upgrade:(Xe,be)=>{0===be&&Xe.createObjectStore(Ln)}}).catch(Xe=>{throw Mr.create("idb-open",{originalErrorMessage:Xe.message})})),Bn}function it(){return(it=(0,g.Z)(function*(Xe){var be;try{return(yield fn()).transaction(Ln).objectStore(Ln).get(jn(Xe))}catch(Qe){if(Qe instanceof se.ZR)B.warn(Qe.message);else{const Dt=Mr.create("idb-get",{originalErrorMessage:null===(be=Qe)||void 0===be?void 0:be.message});B.warn(Dt.message)}}})).apply(this,arguments)}function on(Xe,be){return dr.apply(this,arguments)}function dr(){return(dr=(0,g.Z)(function*(Xe,be){var Qe;try{const wt=(yield fn()).transaction(Ln,"readwrite");return yield wt.objectStore(Ln).put(be,jn(Xe)),wt.done}catch(Dt){if(Dt instanceof se.ZR)B.warn(Dt.message);else{const wt=Mr.create("idb-set",{originalErrorMessage:null===(Qe=Dt)||void 0===Qe?void 0:Qe.message});B.warn(wt.message)}}})).apply(this,arguments)}function jn(Xe){return`${Xe.name}!${Xe.options.appId}`}class gs{constructor(be){this.container=be,this._heartbeatsCache=null;const Qe=this.container.getProvider("app").getImmediate();this._storage=new tn(Qe),this._heartbeatsCachePromise=this._storage.read().then(Dt=>(this._heartbeatsCache=Dt,Dt))}triggerHeartbeat(){var be=this;return(0,g.Z)(function*(){const Dt=be.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),wt=en();if(null===be._heartbeatsCache&&(be._heartbeatsCache=yield be._heartbeatsCachePromise),be._heartbeatsCache.lastSentHeartbeatDate!==wt&&!be._heartbeatsCache.heartbeats.some(Pt=>Pt.date===wt))return be._heartbeatsCache.heartbeats.push({date:wt,agent:Dt}),be._heartbeatsCache.heartbeats=be._heartbeatsCache.heartbeats.filter(Pt=>{const $=new Date(Pt.date).valueOf();return Date.now()-$<=2592e6}),be._storage.overwrite(be._heartbeatsCache)})()}getHeartbeatsHeader(){var be=this;return(0,g.Z)(function*(){if(null===be._heartbeatsCache&&(yield be._heartbeatsCachePromise),null===be._heartbeatsCache||0===be._heartbeatsCache.heartbeats.length)return"";const Qe=en(),{heartbeatsToSend:Dt,unsentEntries:wt}=function Si(Xe,be=1024){const Qe=[];let Dt=Xe.slice();for(const wt of Xe){const Pt=Qe.find($=>$.agent===wt.agent);if(Pt){if(Pt.dates.push(wt.date),Yn(Qe)>be){Pt.dates.pop();break}}else if(Qe.push({agent:wt.agent,dates:[wt.date]}),Yn(Qe)>be){Qe.pop();break}Dt=Dt.slice(1)}return{heartbeatsToSend:Qe,unsentEntries:Dt}}(be._heartbeatsCache.heartbeats),Pt=(0,se.L)(JSON.stringify({version:2,heartbeats:Dt}));return be._heartbeatsCache.lastSentHeartbeatDate=Qe,wt.length>0?(be._heartbeatsCache.heartbeats=wt,yield be._storage.overwrite(be._heartbeatsCache)):(be._heartbeatsCache.heartbeats=[],be._storage.overwrite(be._heartbeatsCache)),Pt})()}}function en(){return(new Date).toISOString().substring(0,10)}class tn{constructor(be){this.app=be,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var be=this;return(0,g.Z)(function*(){return(yield be._canUseIndexedDBPromise)&&(yield function ft(Xe){return it.apply(this,arguments)}(be.app))||{heartbeats:[]}})()}overwrite(be){var Qe=this;return(0,g.Z)(function*(){var Dt;if(yield Qe._canUseIndexedDBPromise){const Pt=yield Qe.read();return on(Qe.app,{lastSentHeartbeatDate:null!==(Dt=be.lastSentHeartbeatDate)&&void 0!==Dt?Dt:Pt.lastSentHeartbeatDate,heartbeats:be.heartbeats})}})()}add(be){var Qe=this;return(0,g.Z)(function*(){var Dt;if(yield Qe._canUseIndexedDBPromise){const Pt=yield Qe.read();return on(Qe.app,{lastSentHeartbeatDate:null!==(Dt=be.lastSentHeartbeatDate)&&void 0!==Dt?Dt:Pt.lastSentHeartbeatDate,heartbeats:[...Pt.heartbeats,...be.heartbeats]})}})()}}function Yn(Xe){return(0,se.L)(JSON.stringify({version:2,heartbeats:Xe})).length}!function Rr(Xe){xr(new J.wA("platform-logger",be=>new le(be),"PRIVATE")),xr(new J.wA("heartbeat",be=>new gs(be),"PRIVATE")),Ir(de,"0.8.3",Xe),Ir(de,"0.8.3","esm2017"),Ir("fire-js","")}("")},4859:(at,Se,P)=>{P.d(Se,{H0:()=>de,wA:()=>O});var g=P(5861),J=P(2090);class O{constructor(B,j,K){this.name=B,this.instanceFactory=j,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const se="[DEFAULT]";class ie{constructor(B,j){this.name=B,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const j=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(j)){const K=new J.BH;if(this.instancesDeferred.set(j,K),this.isInitialized(j)||this.shouldAutoInitialize())try{const Le=this.getOrInitializeService({instanceIdentifier:j});Le&&K.resolve(Le)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(B){var j;const K=this.normalizeInstanceIdentifier(B?.identifier),Le=null!==(j=B?.optional)&&void 0!==j&&j;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(Le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(Me){if(Le)return null;throw Me}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function ce(he){return"EAGER"===he.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[j,K]of this.instancesDeferred.entries()){const Le=this.normalizeInstanceIdentifier(j);try{const Me=this.getOrInitializeService({instanceIdentifier:Le});K.resolve(Me)}catch{}}}}clearInstance(B=se){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,g.Z)(function*(){const j=Array.from(B.instances.values());yield Promise.all([...j.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...j.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=se){return this.instances.has(B)}getOptions(B=se){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:j={}}=B,K=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Le=this.getOrInitializeService({instanceIdentifier:K,options:j});for(const[Me,we]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(Me)&&we.resolve(Le);return Le}onInit(B,j){var K;const Le=this.normalizeInstanceIdentifier(j),Me=null!==(K=this.onInitCallbacks.get(Le))&&void 0!==K?K:new Set;Me.add(B),this.onInitCallbacks.set(Le,Me);const we=this.instances.get(Le);return we&&B(we,Le),()=>{Me.delete(B)}}invokeOnInitCallbacks(B,j){const K=this.onInitCallbacks.get(j);if(K)for(const Le of K)try{Le(B,j)}catch{}}getOrInitializeService({instanceIdentifier:B,options:j={}}){let K=this.instances.get(B);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(he=B,he===se?void 0:he),options:j}),this.instances.set(B,K),this.instancesOptions.set(B,j),this.invokeOnInitCallbacks(K,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,K)}catch{}var he;return K||null}normalizeInstanceIdentifier(B=se){return this.component?this.component.multipleInstances?B:se:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const j=this.getProvider(B.name);if(j.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);j.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const j=new ie(B,this);return this.providers.set(B,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(at,Se,P)=>{P.d(Se,{Am:()=>he,Ub:()=>de,Yd:()=>ce,in:()=>J});const g=[];var J=(()=>{return(B=J||(J={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",J;var B})();const O={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},se=J.INFO,ie={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},le=(B,j,...K)=>{if(j<B.logLevel)return;const Le=(new Date).toISOString(),Me=ie[j];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Me](`[${Le}]  ${B.name}:`,...K)};class ce{constructor(j){this.name=j,this._logLevel=se,this._logHandler=le,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in J))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?O[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...j),this._logHandler(this,J.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...j),this._logHandler(this,J.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,J.INFO,...j),this._logHandler(this,J.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,J.WARN,...j),this._logHandler(this,J.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...j),this._logHandler(this,J.ERROR,...j)}}function de(B){g.forEach(j=>{j.setLogLevel(B)})}function he(B,j){for(const K of g){let Le=null;j&&j.level&&(Le=O[j.level]),K.userLogHandler=null===B?null:(Me,we,...et)=>{const me=et.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch{return null}}).filter(fe=>fe).join(" ");we>=(Le??Me.logLevel)&&B({level:J[we].toLowerCase(),message:me,args:et,type:Me.name})}}}},8766:(at,Se,P)=>{P.d(Se,{Lj:()=>Ae,X3:()=>rt});var g=P(5861);let O,se;const ce=new WeakMap,de=new WeakMap,he=new WeakMap,B=new WeakMap,j=new WeakMap;let Me={get(U,ge,z){if(U instanceof IDBTransaction){if("done"===ge)return de.get(U);if("objectStoreNames"===ge)return U.objectStoreNames||he.get(U);if("store"===ge)return z.objectStoreNames[1]?void 0:z.objectStore(z.objectStoreNames[0])}return fe(U[ge])},set:(U,ge,z)=>(U[ge]=z,!0),has:(U,ge)=>U instanceof IDBTransaction&&("done"===ge||"store"===ge)||ge in U};function me(U){return"function"==typeof U?function et(U){return U!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function le(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(U)?function(...ge){return U.apply(Ye(this),ge),fe(ce.get(this))}:function(...ge){return fe(U.apply(Ye(this),ge))}:function(ge,...z){const Q=U.call(Ye(this),ge,...z);return he.set(Q,ge.sort?ge.sort():[ge]),fe(Q)}}(U):(U instanceof IDBTransaction&&function Le(U){if(de.has(U))return;const ge=new Promise((z,Q)=>{const ne=()=>{U.removeEventListener("complete",te),U.removeEventListener("error",ke),U.removeEventListener("abort",ke)},te=()=>{z(),ne()},ke=()=>{Q(U.error||new DOMException("AbortError","AbortError")),ne()};U.addEventListener("complete",te),U.addEventListener("error",ke),U.addEventListener("abort",ke)});de.set(U,ge)}(U),((U,ge)=>ge.some(z=>U instanceof z))(U,function ie(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(U,Me):U)}function fe(U){if(U instanceof IDBRequest)return function K(U){const ge=new Promise((z,Q)=>{const ne=()=>{U.removeEventListener("success",te),U.removeEventListener("error",ke)},te=()=>{z(fe(U.result)),ne()},ke=()=>{Q(U.error),ne()};U.addEventListener("success",te),U.addEventListener("error",ke)});return ge.then(z=>{z instanceof IDBCursor&&ce.set(z,U)}).catch(()=>{}),j.set(ge,U),ge}(U);if(B.has(U))return B.get(U);const ge=me(U);return ge!==U&&(B.set(U,ge),j.set(ge,U)),ge}const Ye=U=>j.get(U);function rt(U,ge,{blocked:z,upgrade:Q,blocking:ne,terminated:te}={}){const ke=indexedDB.open(U,ge),Oe=fe(ke);return Q&&ke.addEventListener("upgradeneeded",ut=>{Q(fe(ke.result),ut.oldVersion,ut.newVersion,fe(ke.transaction))}),z&&ke.addEventListener("blocked",()=>z()),Oe.then(ut=>{te&&ut.addEventListener("close",()=>te()),ne&&ut.addEventListener("versionchange",()=>ne())}).catch(()=>{}),Oe}function Ae(U,{blocked:ge}={}){const z=indexedDB.deleteDatabase(U);return ge&&z.addEventListener("blocked",()=>ge()),fe(z).then(()=>{})}const _e=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Ue=new Map;function je(U,ge){if(!(U instanceof IDBDatabase)||ge in U||"string"!=typeof ge)return;if(Ue.get(ge))return Ue.get(ge);const z=ge.replace(/FromIndex$/,""),Q=ge!==z,ne=Ie.includes(z);if(!(z in(Q?IDBIndex:IDBObjectStore).prototype)||!ne&&!_e.includes(z))return;const te=function(){var ke=(0,g.Z)(function*(Oe,...ut){const Xt=this.transaction(Oe,ne?"readwrite":"readonly");let Ht=Xt.store;return Q&&(Ht=Ht.index(ut.shift())),(yield Promise.all([Ht[z](...ut),ne&&Xt.done]))[0]});return function(ut){return ke.apply(this,arguments)}}();return Ue.set(ge,te),te}!function we(U){Me=U(Me)}(U=>({...U,get:(ge,z,Q)=>je(ge,z)||U.get(ge,z,Q),has:(ge,z)=>!!je(ge,z)||U.has(ge,z)}))},5861:(at,Se,P)=>{function g(O,se,ie,le,ce,de,he){try{var B=O[de](he),j=B.value}catch(K){return void ie(K)}B.done?se(j):Promise.resolve(j).then(le,ce)}function J(O){return function(){var se=this,ie=arguments;return new Promise(function(le,ce){var de=O.apply(se,ie);function he(j){g(de,le,ce,he,B,"next",j)}function B(j){g(de,le,ce,he,B,"throw",j)}he(void 0)})}}P.d(Se,{Z:()=>J})}},at=>{at(at.s=4713)}]);